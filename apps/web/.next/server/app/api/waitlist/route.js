(()=>{var a={};a.id=225,a.ids=[225],a.modules={261:a=>{"use strict";a.exports=require("next/dist/shared/lib/router/utils/app-paths")},339:(a,b,c)=>{var d;(()=>{var e={226:function(e,f){!function(g,h){"use strict";var i="function",j="undefined",k="object",l="string",m="major",n="model",o="name",p="type",q="vendor",r="version",s="architecture",t="console",u="mobile",v="tablet",w="smarttv",x="wearable",y="embedded",z="Amazon",A="Apple",B="ASUS",C="BlackBerry",D="Browser",E="Chrome",F="Firefox",G="Google",H="Huawei",I="Microsoft",J="Motorola",K="Opera",L="Samsung",M="Sharp",N="Sony",O="Xiaomi",P="Zebra",Q="Facebook",R="Chromium OS",S="Mac OS",T=function(a,b){var c={};for(var d in a)b[d]&&b[d].length%2==0?c[d]=b[d].concat(a[d]):c[d]=a[d];return c},U=function(a){for(var b={},c=0;c<a.length;c++)b[a[c].toUpperCase()]=a[c];return b},V=function(a,b){return typeof a===l&&-1!==W(b).indexOf(W(a))},W=function(a){return a.toLowerCase()},X=function(a,b){if(typeof a===l)return a=a.replace(/^\s\s*/,""),typeof b===j?a:a.substring(0,350)},Y=function(a,b){for(var c,d,e,f,g,j,l=0;l<b.length&&!g;){var m=b[l],n=b[l+1];for(c=d=0;c<m.length&&!g&&m[c];)if(g=m[c++].exec(a))for(e=0;e<n.length;e++)j=g[++d],typeof(f=n[e])===k&&f.length>0?2===f.length?typeof f[1]==i?this[f[0]]=f[1].call(this,j):this[f[0]]=f[1]:3===f.length?typeof f[1]!==i||f[1].exec&&f[1].test?this[f[0]]=j?j.replace(f[1],f[2]):void 0:this[f[0]]=j?f[1].call(this,j,f[2]):void 0:4===f.length&&(this[f[0]]=j?f[3].call(this,j.replace(f[1],f[2])):h):this[f]=j||h;l+=2}},Z=function(a,b){for(var c in b)if(typeof b[c]===k&&b[c].length>0){for(var d=0;d<b[c].length;d++)if(V(b[c][d],a))return"?"===c?h:c}else if(V(b[c],a))return"?"===c?h:c;return a},$={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},_={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[r,[o,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[r,[o,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[o,r],[/opios[\/ ]+([\w\.]+)/i],[r,[o,K+" Mini"]],[/\bopr\/([\w\.]+)/i],[r,[o,K]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[o,r],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[r,[o,"UC"+D]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[r,[o,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[r,[o,"WeChat"]],[/konqueror\/([\w\.]+)/i],[r,[o,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[r,[o,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[r,[o,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[o,/(.+)/,"$1 Secure "+D],r],[/\bfocus\/([\w\.]+)/i],[r,[o,F+" Focus"]],[/\bopt\/([\w\.]+)/i],[r,[o,K+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[r,[o,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[r,[o,"Dolphin"]],[/coast\/([\w\.]+)/i],[r,[o,K+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[r,[o,"MIUI "+D]],[/fxios\/([-\w\.]+)/i],[r,[o,F]],[/\bqihu|(qi?ho?o?|360)browser/i],[[o,"360 "+D]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[o,/(.+)/,"$1 "+D],r],[/(comodo_dragon)\/([\w\.]+)/i],[[o,/_/g," "],r],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[o,r],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[o],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[o,Q],r],[/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[o,r],[/\bgsa\/([\w\.]+) .*safari\//i],[r,[o,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[r,[o,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[r,[o,E+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[o,E+" WebView"],r],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[r,[o,"Android "+D]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[o,r],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[r,[o,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[r,o],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[o,[r,Z,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[o,r],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[o,"Netscape"],r],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[r,[o,F+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[o,r],[/(cobalt)\/([\w\.]+)/i],[o,[r,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[s,"amd64"]],[/(ia32(?=;))/i],[[s,W]],[/((?:i[346]|x)86)[;\)]/i],[[s,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[s,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[s,"armhf"]],[/windows (ce|mobile); ppc;/i],[[s,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[s,/ower/,"",W]],[/(sun4\w)[;\)]/i],[[s,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[s,W]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[n,[q,L],[p,v]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[n,[q,L],[p,u]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[n,[q,A],[p,u]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[n,[q,A],[p,v]],[/(macintosh);/i],[n,[q,A]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[n,[q,M],[p,u]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[n,[q,H],[p,v]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[n,[q,H],[p,u]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[n,/_/g," "],[q,O],[p,u]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[n,/_/g," "],[q,O],[p,v]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[n,[q,"OPPO"],[p,u]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[n,[q,"Vivo"],[p,u]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[n,[q,"Realme"],[p,u]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[n,[q,J],[p,u]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[n,[q,J],[p,v]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[n,[q,"LG"],[p,v]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[n,[q,"LG"],[p,u]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[n,[q,"Lenovo"],[p,v]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[n,/_/g," "],[q,"Nokia"],[p,u]],[/(pixel c)\b/i],[n,[q,G],[p,v]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[n,[q,G],[p,u]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[n,[q,N],[p,u]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[n,"Xperia Tablet"],[q,N],[p,v]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[n,[q,"OnePlus"],[p,u]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[n,[q,z],[p,v]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[n,/(.+)/g,"Fire Phone $1"],[q,z],[p,u]],[/(playbook);[-\w\),; ]+(rim)/i],[n,q,[p,v]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[n,[q,C],[p,u]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[n,[q,B],[p,v]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[n,[q,B],[p,u]],[/(nexus 9)/i],[n,[q,"HTC"],[p,v]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[q,[n,/_/g," "],[p,u]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[n,[q,"Acer"],[p,v]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[n,[q,"Meizu"],[p,u]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[q,n,[p,u]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[q,n,[p,v]],[/(surface duo)/i],[n,[q,I],[p,v]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[n,[q,"Fairphone"],[p,u]],[/(u304aa)/i],[n,[q,"AT&T"],[p,u]],[/\bsie-(\w*)/i],[n,[q,"Siemens"],[p,u]],[/\b(rct\w+) b/i],[n,[q,"RCA"],[p,v]],[/\b(venue[\d ]{2,7}) b/i],[n,[q,"Dell"],[p,v]],[/\b(q(?:mv|ta)\w+) b/i],[n,[q,"Verizon"],[p,v]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[n,[q,"Barnes & Noble"],[p,v]],[/\b(tm\d{3}\w+) b/i],[n,[q,"NuVision"],[p,v]],[/\b(k88) b/i],[n,[q,"ZTE"],[p,v]],[/\b(nx\d{3}j) b/i],[n,[q,"ZTE"],[p,u]],[/\b(gen\d{3}) b.+49h/i],[n,[q,"Swiss"],[p,u]],[/\b(zur\d{3}) b/i],[n,[q,"Swiss"],[p,v]],[/\b((zeki)?tb.*\b) b/i],[n,[q,"Zeki"],[p,v]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[q,"Dragon Touch"],n,[p,v]],[/\b(ns-?\w{0,9}) b/i],[n,[q,"Insignia"],[p,v]],[/\b((nxa|next)-?\w{0,9}) b/i],[n,[q,"NextBook"],[p,v]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[q,"Voice"],n,[p,u]],[/\b(lvtel\-)?(v1[12]) b/i],[[q,"LvTel"],n,[p,u]],[/\b(ph-1) /i],[n,[q,"Essential"],[p,u]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[n,[q,"Envizen"],[p,v]],[/\b(trio[-\w\. ]+) b/i],[n,[q,"MachSpeed"],[p,v]],[/\btu_(1491) b/i],[n,[q,"Rotor"],[p,v]],[/(shield[\w ]+) b/i],[n,[q,"Nvidia"],[p,v]],[/(sprint) (\w+)/i],[q,n,[p,u]],[/(kin\.[onetw]{3})/i],[[n,/\./g," "],[q,I],[p,u]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[n,[q,P],[p,v]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[n,[q,P],[p,u]],[/smart-tv.+(samsung)/i],[q,[p,w]],[/hbbtv.+maple;(\d+)/i],[[n,/^/,"SmartTV"],[q,L],[p,w]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[q,"LG"],[p,w]],[/(apple) ?tv/i],[q,[n,A+" TV"],[p,w]],[/crkey/i],[[n,E+"cast"],[q,G],[p,w]],[/droid.+aft(\w)( bui|\))/i],[n,[q,z],[p,w]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[n,[q,M],[p,w]],[/(bravia[\w ]+)( bui|\))/i],[n,[q,N],[p,w]],[/(mitv-\w{5}) bui/i],[n,[q,O],[p,w]],[/Hbbtv.*(technisat) (.*);/i],[q,n,[p,w]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[q,X],[n,X],[p,w]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[p,w]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[q,n,[p,t]],[/droid.+; (shield) bui/i],[n,[q,"Nvidia"],[p,t]],[/(playstation [345portablevi]+)/i],[n,[q,N],[p,t]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[n,[q,I],[p,t]],[/((pebble))app/i],[q,n,[p,x]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[n,[q,A],[p,x]],[/droid.+; (glass) \d/i],[n,[q,G],[p,x]],[/droid.+; (wt63?0{2,3})\)/i],[n,[q,P],[p,x]],[/(quest( 2| pro)?)/i],[n,[q,Q],[p,x]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[q,[p,y]],[/(aeobc)\b/i],[n,[q,z],[p,y]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[n,[p,u]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[n,[p,v]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[p,v]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[p,u]],[/(android[-\w\. ]{0,9});.+buil/i],[n,[q,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[r,[o,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[r,[o,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[o,r],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[r,o]],os:[[/microsoft (windows) (vista|xp)/i],[o,r],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[o,[r,Z,$]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[o,"Windows"],[r,Z,$]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/ios;fbsv\/([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[r,/_/g,"."],[o,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[o,S],[r,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[r,o],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[o,r],[/\(bb(10);/i],[r,[o,C]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[r,[o,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[r,[o,F+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[r,[o,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[r,[o,"watchOS"]],[/crkey\/([\d\.]+)/i],[r,[o,E+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[o,R],r],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[o,r],[/(sunos) ?([\w\.\d]*)/i],[[o,"Solaris"],r],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[o,r]]},aa=function(a,b){if(typeof a===k&&(b=a,a=h),!(this instanceof aa))return new aa(a,b).getResult();var c=typeof g!==j&&g.navigator?g.navigator:h,d=a||(c&&c.userAgent?c.userAgent:""),e=c&&c.userAgentData?c.userAgentData:h,f=b?T(_,b):_,t=c&&c.userAgent==d;return this.getBrowser=function(){var a,b={};return b[o]=h,b[r]=h,Y.call(b,d,f.browser),b[m]=typeof(a=b[r])===l?a.replace(/[^\d\.]/g,"").split(".")[0]:h,t&&c&&c.brave&&typeof c.brave.isBrave==i&&(b[o]="Brave"),b},this.getCPU=function(){var a={};return a[s]=h,Y.call(a,d,f.cpu),a},this.getDevice=function(){var a={};return a[q]=h,a[n]=h,a[p]=h,Y.call(a,d,f.device),t&&!a[p]&&e&&e.mobile&&(a[p]=u),t&&"Macintosh"==a[n]&&c&&typeof c.standalone!==j&&c.maxTouchPoints&&c.maxTouchPoints>2&&(a[n]="iPad",a[p]=v),a},this.getEngine=function(){var a={};return a[o]=h,a[r]=h,Y.call(a,d,f.engine),a},this.getOS=function(){var a={};return a[o]=h,a[r]=h,Y.call(a,d,f.os),t&&!a[o]&&e&&"Unknown"!=e.platform&&(a[o]=e.platform.replace(/chrome os/i,R).replace(/macos/i,S)),a},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return d},this.setUA=function(a){return d=typeof a===l&&a.length>350?X(a,350):a,this},this.setUA(d),this};aa.VERSION="1.0.35",aa.BROWSER=U([o,r,m]),aa.CPU=U([s]),aa.DEVICE=U([n,q,p,t,u,w,v,x,y]),aa.ENGINE=aa.OS=U([o,r]),typeof f!==j?(e.exports&&(f=e.exports=aa),f.UAParser=aa):c.amdO?void 0===(d=(function(){return aa}).call(b,c,b,a))||(a.exports=d):typeof g!==j&&(g.UAParser=aa);var ab=typeof g!==j&&(g.jQuery||g.Zepto);if(ab&&!ab.ua){var ac=new aa;ab.ua=ac.getResult(),ab.ua.get=function(){return ac.getUA()},ab.ua.set=function(a){ac.setUA(a);var b=ac.getResult();for(var c in b)ab.ua[c]=b[c]}}}("object"==typeof window?window:this)}},f={};function g(a){var b=f[a];if(void 0!==b)return b.exports;var c=f[a]={exports:{}},d=!0;try{e[a].call(c.exports,c,c.exports,g),d=!1}finally{d&&delete f[a]}return c.exports}g.ab=__dirname+"/",a.exports=g(226)})()},846:a=>{"use strict";a.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1883:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),function(a,b){Object.keys(a).forEach(function(c){"default"===c||Object.prototype.hasOwnProperty.call(b,c)||Object.defineProperty(b,c,{enumerable:!0,get:function(){return a[c]}})})}(c(9030),b)},2421:(a,b,c)=>{"use strict";a.exports=c(4870)},2756:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{isBot:function(){return e},userAgent:function(){return g},userAgentFromString:function(){return f}});let d=function(a){return a&&a.__esModule?a:{default:a}}(c(339));function e(a){return/Googlebot|Mediapartners-Google|AdsBot-Google|googleweblight|Storebot-Google|Google-PageRenderer|Google-InspectionTool|Bingbot|BingPreview|Slurp|DuckDuckBot|baiduspider|yandex|sogou|LinkedInBot|bitlybot|tumblr|vkShare|quora link preview|facebookexternalhit|facebookcatalog|Twitterbot|applebot|redditbot|Slackbot|Discordbot|WhatsApp|SkypeUriPreview|ia_archiver/i.test(a)}function f(a){return{...(0,d.default)(a),isBot:void 0!==a&&e(a)}}function g({headers:a}){return f(a.get("user-agent")||void 0)}},3033:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:a=>{"use strict";a.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3444:()=>{},3933:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{getRootParam:function(){return n},unstable_rootParams:function(){return m}});let d=c(3039),e=c(3401),f=c(9294),g=c(3033),h=c(1258),i=c(9519),j=c(9121),k=c(311),l=new WeakMap;async function m(){(0,k.warnOnce)("`unstable_rootParams()` is deprecated and will be removed in an upcoming major release. Import specific root params from `next/root-params` instead.");let a=f.workAsyncStorage.getStore();if(!a)throw Object.defineProperty(new d.InvariantError("Missing workStore in unstable_rootParams"),"__NEXT_ERROR_CODE",{value:"E615",enumerable:!1,configurable:!0});let b=g.workUnitAsyncStorage.getStore();if(!b)throw Object.defineProperty(Error(`Route ${a.route} used \`unstable_rootParams()\` in Pages Router. This API is only available within App Router.`),"__NEXT_ERROR_CODE",{value:"E641",enumerable:!1,configurable:!0});switch(b.type){case"cache":case"unstable-cache":throw Object.defineProperty(Error(`Route ${a.route} used \`unstable_rootParams()\` inside \`"use cache"\` or \`unstable_cache\`. Support for this API inside cache scopes is planned for a future version of Next.js.`),"__NEXT_ERROR_CODE",{value:"E642",enumerable:!1,configurable:!0});case"prerender":case"prerender-client":case"prerender-ppr":case"prerender-legacy":return function(a,b,c){switch(c.type){case"prerender-client":{let a="`unstable_rootParams`";throw Object.defineProperty(new d.InvariantError(`${a} must not be used within a client component. Next.js should be preventing ${a} from being included in client components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E693",enumerable:!1,configurable:!0})}case"prerender":{let d=c.fallbackRouteParams;if(d){for(let e in a)if(d.has(e)){let d=l.get(a);if(d)return d;let e=(0,h.makeHangingPromise)(c.renderSignal,b.route,"`unstable_rootParams`");return l.set(a,e),e}}break}case"prerender-ppr":{let d=c.fallbackRouteParams;if(d){for(let f in a)if(d.has(f))return function(a,b,c,d){let f=l.get(a);if(f)return f;let g={...a},h=Promise.resolve(g);return l.set(a,h),Object.keys(a).forEach(f=>{i.wellKnownProperties.has(f)||(b.has(f)?Object.defineProperty(g,f,{get(){let a=(0,i.describeStringPropertyAccess)("unstable_rootParams",f);"prerender-ppr"===d.type?(0,e.postponeWithTracking)(c.route,a,d.dynamicTracking):(0,e.throwToInterruptStaticGeneration)(a,c,d)},enumerable:!0}):h[f]=a[f])}),h}(a,d,b,c)}}}return Promise.resolve(a)}(b.rootParams,a,b);case"private-cache":case"prerender-runtime":case"request":return Promise.resolve(b.rootParams);default:return b}}function n(a){let b=`\`import('next/root-params').${a}()\``,c=f.workAsyncStorage.getStore();if(!c)throw Object.defineProperty(new d.InvariantError(`Missing workStore in ${b}`),"__NEXT_ERROR_CODE",{value:"E764",enumerable:!1,configurable:!0});let e=g.workUnitAsyncStorage.getStore();if(!e)throw Object.defineProperty(Error(`Route ${c.route} used ${b} outside of a Server Component. This is not allowed.`),"__NEXT_ERROR_CODE",{value:"E774",enumerable:!1,configurable:!0});let i=j.actionAsyncStorage.getStore();if(i){if(i.isAppRoute)throw Object.defineProperty(Error(`Route ${c.route} used ${b} inside a Route Handler. Support for this API in Route Handlers is planned for a future version of Next.js.`),"__NEXT_ERROR_CODE",{value:"E765",enumerable:!1,configurable:!0});if(i.isAction&&"action"===e.phase)throw Object.defineProperty(Error(`${b} was used inside a Server Action. This is not supported. Functions from 'next/root-params' can only be called in the context of a route.`),"__NEXT_ERROR_CODE",{value:"E766",enumerable:!1,configurable:!0})}switch(e.type){case"unstable-cache":case"cache":throw Object.defineProperty(Error(`Route ${c.route} used ${b} inside \`"use cache"\` or \`unstable_cache\`. Support for this API inside cache scopes is planned for a future version of Next.js.`),"__NEXT_ERROR_CODE",{value:"E760",enumerable:!1,configurable:!0});case"prerender":case"prerender-client":case"prerender-ppr":case"prerender-legacy":var k=a,l=c,m=e,n=b;if("prerender-client"===m.type)throw Object.defineProperty(new d.InvariantError(`${n} must not be used within a client component. Next.js should be preventing ${n} from being included in client components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E693",enumerable:!1,configurable:!0});let p=m.rootParams;switch(m.type){case"prerender":if(m.fallbackRouteParams&&m.fallbackRouteParams.has(k))return(0,h.makeHangingPromise)(m.renderSignal,l.route,n);break;case"prerender-ppr":if(m.fallbackRouteParams&&m.fallbackRouteParams.has(k))return o(k,l,m,n)}return Promise.resolve(p[k])}return Promise.resolve(e.rootParams[a])}async function o(a,b,c,d){let f=(0,i.describeStringPropertyAccess)(d,a);switch(c.type){case"prerender-ppr":return(0,e.postponeWithTracking)(b.route,f,c.dynamicTracking);case"prerender-legacy":return(0,e.throwToInterruptStaticGeneration)(f,b,c)}}},4774:(a,b,c)=>{"use strict";let d,e,f;c.r(b),c.d(b,{handler:()=>gu,patchFetch:()=>gt,routeModule:()=>gp,serverHooks:()=>gs,workAsyncStorage:()=>gq,workUnitAsyncStorage:()=>gr});var g,h,i,j,k={};c.r(k),c.d(k,{waitlist:()=>gl});var l={};c.r(l),c.d(l,{POST:()=>go});var m=c(2421),n=c(2306),o=c(7489),p=c(5553),q=c(5059),r=c(261),s=c(5753),t=c(6791),u=c(1009),v=c(5202),w=c(6820),x=c(1374),y=c(5892),z=c(9717),A=c(6439),B=c(7899),C=c(8387);let D=require("os"),E=require("fs"),F=new Map,G=new Map,H=Symbol("OriginError"),I={};class J extends Promise{constructor(a,b,c,d,e={}){let f,g;super((a,b)=>{f=a,g=b}),this.tagged=Array.isArray(a.raw),this.strings=a,this.args=b,this.handler=c,this.canceller=d,this.options=e,this.state=null,this.statement=null,this.resolve=a=>(this.active=!1,f(a)),this.reject=a=>(this.active=!1,g(a)),this.active=!1,this.cancelled=null,this.executed=!1,this.signature="",this[H]=this.handler.debug?Error():this.tagged&&function(a){if(F.has(a))return F.get(a);let b=Error.stackTraceLimit;return Error.stackTraceLimit=4,F.set(a,Error()),Error.stackTraceLimit=b,F.get(a)}(this.strings)}get origin(){return(this.handler.debug?this[H].stack:this.tagged&&G.has(this.strings)?G.get(this.strings):G.set(this.strings,this[H].stack).get(this.strings))||""}static get[Symbol.species](){return Promise}cancel(){return this.canceller&&(this.canceller(this),this.canceller=null)}simple(){return this.options.simple=!0,this.options.prepare=!1,this}async readable(){return this.simple(),this.streaming=!0,this}async writable(){return this.simple(),this.streaming=!0,this}cursor(a=1,b){let c;return(this.options.simple=!1,"function"==typeof a&&(b=a,a=1),this.cursorRows=a,"function"==typeof b)?(this.cursorFn=b,this):{[Symbol.asyncIterator]:()=>({next:()=>{if(this.executed&&!this.active)return{done:!0};c&&c();let a=new Promise((a,b)=>{this.cursorFn=b=>(a({value:b,done:!1}),new Promise(a=>c=a)),this.resolve=()=>(this.active=!1,a({done:!0})),this.reject=a=>(this.active=!1,b(a))});return this.execute(),a},return:()=>(c&&c(I),{done:!0})})}}describe(){return this.options.simple=!1,this.onlyDescribe=this.options.prepare=!0,this}stream(){throw Error(".stream has been renamed to .forEach")}forEach(a){return this.forEachFn=a,this.handle(),this}raw(){return this.isRaw=!0,this}values(){return this.isRaw="values",this}async handle(){!this.executed&&(this.executed=!0)&&await 1&&this.handler(this)}execute(){return this.handle(),this}then(){return this.handle(),super.then.apply(this,arguments)}catch(){return this.handle(),super.catch.apply(this,arguments)}finally(){return this.handle(),super.finally.apply(this,arguments)}}class K extends Error{constructor(a){super(a.message),this.name=this.constructor.name,Object.assign(this,a)}}let L={connection:function a(b,c,d){let{host:e,port:f}=d||c,g=Object.assign(Error("write "+b+" "+(c.path||e+":"+f)),{code:b,errno:b,address:c.path||e},c.path?{}:{port:f});return Error.captureStackTrace(g,a),g},postgres:function a(b){let c=new K(b);return Error.captureStackTrace(c,a),c},generic:function a(b,c){let d=Object.assign(Error(b+": "+c),{code:b});return Error.captureStackTrace(d,a),d},notSupported:function a(b){let c=Object.assign(Error(b+" (B) is not supported"),{code:"MESSAGE_NOT_SUPPORTED",name:b});return Error.captureStackTrace(c,a),c}};class M{then(){Z()}catch(){Z()}finally(){Z()}}class N extends M{constructor(a){super(),this.value=ad(a)}}class O extends M{constructor(a,b,c){super(),this.value=a,this.type=b,this.array=c}}class P extends M{constructor(a,b){super(),this.first=a,this.rest=b}build(a,b,c,d){let e=Y.map(([b,c])=>({fn:c,i:a.search(b)})).sort((a,b)=>a.i-b.i).pop();return -1===e.i?ac(this.first,d):e.fn(this.first,this.rest,b,c,d)}}function Q(a,b,c,d){let e=a instanceof O?a.value:a;if(void 0===e&&(a instanceof O?a.value=d.transform.undefined:e=a=d.transform.undefined,void 0===e))throw L.generic("UNDEFINED_VALUE","Undefined values are not allowed");return"$"+c.push(a instanceof O?(b.push(a.value),a.array?a.array[a.type||ae(a.value)]||a.type||function a(b){return Array.isArray(b)?a(b[0]):1009*("string"==typeof b)}(a.value):a.type):(b.push(a),ae(a)))}let R=ab({string:{to:25,from:null,serialize:a=>""+a},number:{to:0,from:[21,23,26,700,701],serialize:a=>""+a,parse:a=>+a},json:{to:114,from:[114,3802],serialize:a=>JSON.stringify(a),parse:a=>JSON.parse(a)},boolean:{to:16,from:16,serialize:a=>!0===a?"t":"f",parse:a=>"t"===a},date:{to:1184,from:[1082,1114,1184],serialize:a=>(a instanceof Date?a:new Date(a)).toISOString(),parse:a=>new Date(a)},bytea:{to:17,from:17,serialize:a=>"\\x"+Buffer.from(a).toString("hex"),parse:a=>Buffer.from(a.slice(2),"hex")}});function S(a,b,c,d,e,f){for(let g=1;g<a.strings.length;g++)b+=T(b,c,d,e,f)+a.strings[g],c=a.args[g];return b}function T(a,b,c,d,e){return b instanceof P?b.build(a,c,d,e):b instanceof J?U(b,c,d,e):b instanceof N?b.value:b&&b[0]instanceof J?b.reduce((a,b)=>a+" "+U(b,c,d,e),""):Q(b,c,d,e)}function U(a,b,c,d){return a.fragment=!0,S(a,a.strings[0],a.args[0],b,c,d)}function V(a,b,c,d,e){return a.map(a=>"("+d.map(d=>T("values",a[d],b,c,e)).join(",")+")").join(",")}function W(a,b,c,d,e){let f=Array.isArray(a[0]),g=b.length?b.flat():Object.keys(f?a[0]:a);return V(f?a:[a],c,d,g,e)}function X(a,b,c,d,e){let f;return("string"==typeof a&&(a=[a].concat(b)),Array.isArray(a))?ac(a,e):(b.length?b.flat():Object.keys(a)).map(b=>((f=a[b])instanceof J?U(f,c,d,e):f instanceof N?f.value:Q(f,c,d,e))+" as "+ad(e.transform.column.to?e.transform.column.to(b):b)).join(",")}let Y=Object.entries({values:W,in:(...a)=>{let b=W(...a);return"()"===b?"(null)":b},select:X,as:X,returning:X,"\\(":X,update:(a,b,c,d,e)=>(b.length?b.flat():Object.keys(a)).map(b=>ad(e.transform.column.to?e.transform.column.to(b):b)+"="+T("values",a[b],c,d,e)),insert(a,b,c,d,e){let f=b.length?b.flat():Object.keys(Array.isArray(a)?a[0]:a);return"("+ac(f,e)+")values"+V(Array.isArray(a)?a:[a],c,d,f,e)}}).map(([a,b])=>[RegExp("((?:^|[\\s(])"+a+"(?:$|[\\s(]))(?![\\s\\S]*\\1)","i"),b]);function Z(){throw L.generic("NOT_TAGGED_CALL","Query not called as a tagged template literal")}let $=R.serializers,_=R.parsers,aa=function(a){let b=ab(a||{});return{serializers:Object.assign({},$,b.serializers),parsers:Object.assign({},_,b.parsers)}};function ab(a){return Object.keys(a).reduce((b,c)=>(a[c].from&&[].concat(a[c].from).forEach(d=>b.parsers[d]=a[c].parse),a[c].serialize&&(b.serializers[a[c].to]=a[c].serialize,a[c].from&&[].concat(a[c].from).forEach(d=>b.serializers[d]=a[c].serialize)),b),{parsers:{},serializers:{}})}function ac(a,{transform:{column:b}}){return a.map(a=>ad(b.to?b.to(a):a)).join(",")}let ad=function(a){return'"'+a.replace(/"/g,'""').replace(/\./g,'"."')+'"'},ae=function a(b){return b instanceof O?b.type:b instanceof Date?1184:b instanceof Uint8Array?17:!0===b||!1===b?16:"bigint"==typeof b?20:Array.isArray(b)?a(b[0]):0},af=/\\/g,ag=/"/g,ah=function a(b,c,d,e){if(!1===Array.isArray(b))return b;if(!b.length)return"{}";let f=b[0],g=1020===e?";":",";return Array.isArray(f)&&!f.type?"{"+b.map(b=>a(b,c,d,e)).join(g)+"}":"{"+b.map(a=>{if(void 0===a&&void 0===(a=d.transform.undefined))throw L.generic("UNDEFINED_VALUE","Undefined values are not allowed");return null===a?"null":'"'+(c?c(a.type?a.value:a):""+a).replace(af,"\\\\").replace(ag,'\\"')+'"'}).join(g)+"}"},ai={i:0,char:null,str:"",quoted:!1,last:0},aj=a=>{let b=a[0];for(let c=1;c<a.length;c++)b+="_"===a[c]?a[++c].toUpperCase():a[c];return b},ak=a=>{let b=a[0].toUpperCase();for(let c=1;c<a.length;c++)b+="_"===a[c]?a[++c].toUpperCase():a[c];return b},al=a=>a.replace(/_/g,"-"),am=a=>a.replace(/([A-Z])/g,"_$1").toLowerCase(),an=a=>(a.slice(0,1)+a.slice(1).replace(/([A-Z])/g,"_$1")).toLowerCase(),ao=a=>a.replace(/-/g,"_");function ap(a){return function b(c,d){return"object"==typeof c&&null!==c&&(114===d.type||3802===d.type)?Array.isArray(c)?c.map(a=>b(a,d)):Object.entries(c).reduce((c,[e,f])=>Object.assign(c,{[a(e)]:b(f,d)}),{}):c}}aj.column={from:aj},aj.value={from:ap(aj)},am.column={to:am};let aq={...aj};aq.column.to=am,ak.column={from:ak},ak.value={from:ap(ak)},an.column={to:an};let ar={...ak};ar.column.to=an,al.column={from:al},al.value={from:ap(al)},ao.column={to:ao};let as={...al};as.column.to=ao;let at=require("net"),au=require("tls"),av=require("crypto"),aw=require("stream"),ax=require("perf_hooks");class ay extends Array{constructor(){super(),Object.defineProperties(this,{count:{value:null,writable:!0},state:{value:null,writable:!0},command:{value:null,writable:!0},columns:{value:null,writable:!0},statement:{value:null,writable:!0}})}static get[Symbol.species](){return Array}}let az=function(a=[]){let b=a.slice(),c=0;return{get length(){return b.length-c},remove:a=>{let c=b.indexOf(a);return -1===c?null:(b.splice(c,1),a)},push:a=>(b.push(a),a),shift:()=>{let a=b[c++];return c===b.length?(c=0,b=[]):b[c-1]=void 0,a}}},aA=Buffer.allocUnsafe(256),aB=Object.assign(function(){return aB.i=0,aB},"BCcDdEFfHPpQSX".split("").reduce((a,b)=>{let c=b.charCodeAt(0);return a[b]=()=>(aA[0]=c,aB.i=5,aB),a},{}),{N:"\0",i:0,inc:a=>(aB.i+=a,aB),str(a){let b=Buffer.byteLength(a);return aC(b),aB.i+=aA.write(a,aB.i,b,"utf8"),aB},i16:a=>(aC(2),aA.writeUInt16BE(a,aB.i),aB.i+=2,aB),i32:(a,b)=>(b||0===b?aA.writeUInt32BE(a,b):(aC(4),aA.writeUInt32BE(a,aB.i),aB.i+=4),aB),z:a=>(aC(a),aA.fill(0,aB.i,aB.i+a),aB.i+=a,aB),raw:a=>(aA=Buffer.concat([aA.subarray(0,aB.i),a]),aB.i=aA.length,aB),end(a=1){aA.writeUInt32BE(aB.i-a,a);let b=aA.subarray(0,aB.i);return aB.i=0,aA=Buffer.allocUnsafe(256),b}});function aC(a){if(aA.length-aB.i<a){let b=aA,c=b.length;aA=Buffer.allocUnsafe(c+(c>>1)+a),b.copy(aA)}}let aD=function a(b,c={},{onopen:d=aK,onend:e=aK,onclose:f=aK}={}){let{sslnegotiation:g,ssl:h,max:i,user:j,host:k,port:l,database:m,parsers:n,transform:o,onnotice:p,onnotify:q,onparameter:r,max_pipeline:s,keep_alive:t,backoff:u,target_session_attrs:v}=b,w=az(),x=aE++,y={pid:null,secret:null},z=aQ(aW,b.idle_timeout),A=aQ(aW,b.max_lifetime),B=aQ(function(){aU(L.connection("CONNECT_TIMEOUT",b,C)),C.destroy()},b.connect_timeout),C=null,D,E=null,F=new ay,G=Buffer.alloc(0),H=b.fetch_types,K={},M={},N=Math.random().toString(36).slice(2),O=1,P=0,R=0,T=0,U=0,V=0,W=0,X=0,Y=null,Z=null,$=!1,_=null,aa=null,ab=null,ac=null,ad=null,ae=null,af=null,ag=null,aj=null,ak=null,al={queue:c.closed,idleTimer:z,connect(a){ab=a,aR()},terminate:aX,execute:ao,cancel:an,end:aW,count:0,id:x};return c.closed&&c.closed.push(al),al;async function am(){let a;try{a=b.socket?await Promise.resolve(b.socket(b)):new at.Socket}catch(a){aT(a);return}return a.on("error",aT),a.on("close",aY),a.on("drain",aC),a}async function an({pid:a,secret:b},c,d){try{D=aB().i32(16).i32(0x4d2162e).i32(a).i32(b).end(16),await aM(),C.once("error",d),C.once("close",c)}catch(a){d(a)}}function ao(a){if($)return aV(a,L.connection("CONNECTION_DESTROYED",b));if(ad)return aV(a,L.generic("COPY_IN_PROGRESS","You cannot execute queries during copy"));if(!a.cancelled)try{return a.state=y,aj?w.push(a):(aj=a).active=!0,function(a){let c=[],d=[],e=S(a,a.strings[0],a.args[0],c,d,b);a.tagged||a.args.forEach(a=>Q(a,c,d,b)),a.prepare=b.prepare&&(!("prepare"in a.options)||a.options.prepare),a.string=e,a.signature=a.prepare&&d+e,a.onlyDescribe&&delete M[a.signature],a.parameters=a.parameters||c,a.prepared=a.prepare&&a.signature in M,a.describeFirst=a.onlyDescribe||c.length&&!a.prepared,a.statement=a.prepared?M[a.signature]:{string:e,types:d,name:a.prepare?N+O++:""},"function"==typeof b.debug&&b.debug(x,e,c,d)}(a),ar(function(a){var b;if(a.parameters.length>=65534)throw L.generic("MAX_PARAMETERS_EXCEEDED","Max number of parameters (65534) exceeded");return a.options.simple?aB().Q().str(a.statement.string+aB.N).end():a.describeFirst?Buffer.concat([ap(a),aG]):a.prepare?a.prepared?aq(a):Buffer.concat([ap(a),aq(a)]):(b=a,Buffer.concat([a6(b.statement.string,b.parameters,b.statement.types),aJ,aq(b)]))}(a))&&!a.describeFirst&&!a.cursorFn&&w.length<s&&(!a.options.onexecute||a.options.onexecute(al))}catch(a){return 0===w.length&&ar(aF),aU(a),!0}}function ap(a){return Buffer.concat([a6(a.statement.string,a.parameters,a.statement.types,a.statement.name),function(a,b=""){return aB().D().str("S").str(b+aB.N).end()}("S",a.statement.name)])}function aq(a){return Buffer.concat([function(a,c,d="",e=""){let f,g;return aB().B().str(e+aB.N).str(d+aB.N).i16(0).i16(a.length),a.forEach((d,e)=>{if(null===d)return aB.i32(0xffffffff);g=c[e],a[e]=d=g in b.serializers?b.serializers[g](d):""+d,f=aB.i,aB.inc(4).str(d).i32(aB.i-f-4,f)}),aB.i16(0),aB.end()}(a.parameters,a.statement.types,a.statement.name,a.cursorName),a.cursorFn?a7("",a.cursorRows):aI])}function ar(a,b){return(ae=ae?Buffer.concat([ae,a]):Buffer.from(a),b||ae.length>=1024)?as(b):(null===Z&&(Z=setImmediate(as)),!0)}function as(a){let b=C.write(ae,a);return null!==Z&&clearImmediate(Z),ae=Z=null,b}async function aA(){if("direct"!==g&&(ar(aH),!await new Promise(a=>C.once("data",b=>a(83===b[0])))&&"prefer"===h))return aS();let a={socket:C,servername:at.isIP(C.host)?void 0:C.host};"direct"===g&&(a.ALPNProtocols=["postgresql"]),"require"===h||"allow"===h||"prefer"===h?a.rejectUnauthorized=!1:"object"==typeof h&&Object.assign(a,h),C.removeAllListeners(),(C=au.connect(a)).on("secureConnect",aS),C.on("error",aT),C.on("close",aY),C.on("drain",aC)}function aC(){aj||d(al)}function aD(c){if(!_||(_.push(c),!((R-=c.length)>0)))for(G=_?Buffer.concat(_,V-R):0===G.length?c:Buffer.concat([G,c],G.length+c.length);G.length>4;){if((V=G.readUInt32BE(1))>=G.length){R=V-G.length,_=[G];break}try{!function(c,e=c[0]){(68===e?function(a){let b,c,d,e=7,f=aj.isRaw?Array(aj.statement.columns.length):{};for(let g=0;g<aj.statement.columns.length;g++)c=aj.statement.columns[g],b=a.readInt32BE(e),e+=4,d=-1===b?null:!0===aj.isRaw?a.subarray(e,e+=b):void 0===c.parser?a.toString("utf8",e,e+=b):!0===c.parser.array?c.parser(a.toString("utf8",e+1,e+=b)):c.parser(a.toString("utf8",e,e+=b)),aj.isRaw?f[g]=!0===aj.isRaw?d:o.value.from?o.value.from(d,c):d:f[c.name]=o.value.from?o.value.from(d,c):d;aj.forEachFn?aj.forEachFn(o.row.from?o.row.from(f):f,F):F[X++]=o.row.from?o.row.from(f):f}:100===e?function(a){ad&&(ad.push(a.subarray(5))||C.pause())}:65===e?function(a){if(!q)return;let b=9;for(;0!==a[b++];);q(a.toString("utf8",9,b-1),a.toString("utf8",b,a.length-1))}:83===e?function(a){let[c,d]=a.toString("utf8",5,a.length-1).split(aB.N);K[c]=d,b.parameters[c]!==d&&(b.parameters[c]=d,r&&r(c,d))}:90===e?function(c){var e,f,g,h;if(aj?E?aj.retried?aU(aj.retried):aj.prepared&&aL.has(E.routine)?(e=aj,f=E,delete M[e.signature],e.retried=f,ao(e)):aU(E):aj.resolve(aa||F):E&&aU(E),aj=aa=E=null,F=new ay,B.cancel(),ab){if(v)if(K.in_hot_standby&&K.default_transaction_read_only){if(g=v,h=K,"read-write"===g&&"on"===h.default_transaction_read_only||"read-only"===g&&"off"===h.default_transaction_read_only||"primary"===g&&"on"===h.in_hot_standby||"standby"===g&&"off"===h.in_hot_standby||"prefer-standby"===g&&"off"===h.in_hot_standby&&b.host[U])return aX()}else{let a=new J([`
      show transaction_read_only;
      select pg_catalog.pg_is_in_recovery()
    `],[],ao,null,{simple:!0});a.resolve=([[a],[b]])=>{K.default_transaction_read_only=a.transaction_read_only,K.in_hot_standby=b.pg_is_in_recovery?"on":"off"},a.execute();return}return H?(ab.reserve&&(ab=null),a4()):(ab&&!ab.reserve&&ao(ab),b.shared.retries=U=0,void(ab=null))}for(;w.length&&(aj=w.shift())&&(aj.active=!0,aj.cancelled);)a(b).cancel(aj.state,aj.cancelled.resolve,aj.cancelled.reject);aj||(al.reserved?al.reserved.release||73!==c[5]?al.reserved():ac?aX():(al.reserved=null,d(al)):ac?aX():d(al))}:67===e?function(a){X=0;for(let b=a.length-1;b>0;b--)if(32===a[b]&&a[b+1]<58&&null===F.count&&(F.count=+a.toString("utf8",b+1,a.length-1)),a[b-1]>=65){F.command=a.toString("utf8",5,b),F.state=y;break}return(ak&&(ak(),ak=null),"BEGIN"!==F.command||1===i||al.reserved)?aj.options.simple?aZ():void(aj.cursorFn&&(F.count&&aj.cursorFn(F),ar(aF))):aU(L.generic("UNSAFE_TRANSACTION","Only use sql.begin, sql.reserved or max: 1"))}:50===e?aZ:49===e?function(){aj.parsing=!1}:116===e?function(a){let b=a.readUInt16BE(5);for(let c=0;c<b;++c)aj.statement.types[c]||(aj.statement.types[c]=a.readUInt32BE(7+4*c));aj.prepare&&(M[aj.signature]=aj.statement),aj.describeFirst&&!aj.onlyDescribe&&(ar(aq(aj)),aj.describeFirst=!1)}:84===e?function(a){let b;F.command&&((aa=aa||[F]).push(F=new ay),F.count=null,aj.statement.columns=null);let c=a.readUInt16BE(5),d=7;aj.statement.columns=Array(c);for(let e=0;e<c;++e){for(b=d;0!==a[d++];);let c=a.readUInt32BE(d),f=a.readUInt16BE(d+4),g=a.readUInt32BE(d+6);aj.statement.columns[e]={name:o.column.from?o.column.from(a.toString("utf8",b,d-1)):a.toString("utf8",b,d-1),parser:n[g],table:c,number:f,type:g},d+=18}if(F.statement=aj.statement,aj.onlyDescribe)return aj.resolve(aj.statement),ar(aF)}:82===e?a$:110===e?function(){if(F.statement=aj.statement,F.statement.columns=[],aj.onlyDescribe)return aj.resolve(aj.statement),ar(aF)}:75===e?function(a){y.pid=a.readUInt32BE(5),y.secret=a.readUInt32BE(9)}:69===e?function(a){aj?((aj.cursorFn||aj.describeFirst)&&ar(aF),E=L.postgres(aN(a))):aU(L.postgres(aN(a)))}:115===e?a5:51===e?function(){F.count&&aj.cursorFn(F),aj.resolve(F)}:71===e?function(){ad=new aw.Writable({autoDestroy:!0,write(a,b,c){C.write(aB().d().raw(a).end(),c)},destroy(a,b){b(a),C.write(aB().f().str(a+aB.N).end()),ad=null},final(a){C.write(aB().c().end()),ak=a,ad=null}}),aj.resolve(ad)}:78===e?function(a){p?p(aN(a)):console.log(aN(a))}:72===e?function(){ad=new aw.Readable({read(){C.resume()}}),aj.resolve(ad)}:99===e?function(){ad&&ad.push(null),ad=null}:73===e?function(){}:86===e?function(){aU(L.notSupported("FunctionCallResponse"))}:118===e?function(){aU(L.notSupported("NegotiateProtocolVersion"))}:87===e?function(){ad=new aw.Duplex({autoDestroy:!0,read(){C.resume()},write(a,b,c){C.write(aB().d().raw(a).end(),c)},destroy(a,b){b(a),C.write(aB().f().str(a+aB.N).end()),ad=null},final(a){C.write(aB().c().end()),ak=a}}),aj.resolve(ad)}:function(a){console.error("Postgres.js : Unknown Message:",a[0])})(c)}(G.subarray(0,V+1))}catch(a){aj&&(aj.cursorFn||aj.describeFirst)&&ar(aF),aU(a)}G=G.subarray(V+1),R=0,_=null}}async function aM(){if($=!1,K={},C||(C=await am()),C){if(B.start(),b.socket)return h?aA():aS();if(C.on("connect",h?aA:aS),b.path)return C.connect(b.path);C.ssl=h,C.connect(l[T],k[T]),C.host=k[T],C.port=l[T],T=(T+1)%l.length}}function aR(){setTimeout(aM,P?Math.max(0,P+W-ax.performance.now()):0)}function aS(){try{M={},H=b.fetch_types,N=Math.random().toString(36).slice(2),O=1,A.start(),C.on("data",aD),t&&C.setKeepAlive&&C.setKeepAlive(!0,1e3*t);let a=D||aB().inc(4).i16(3).z(2).str(Object.entries(Object.assign({user:j,database:m,client_encoding:"UTF8"},b.connection)).filter(([,a])=>a).map(([a,b])=>a+aB.N+b).join(aB.N)).z(2).end(0);ar(a)}catch(a){aT(a)}}function aT(a){if(al.queue!==c.connecting||!b.host[U+1])for(aU(a);w.length;)aV(w.shift(),a)}function aU(a){ad&&(ad.destroy(a),ad=null),aj&&aV(aj,a),ab&&(aV(ab,a),ab=null)}function aV(a,c){if(a.reserve)return a.reject(c);c&&"object"==typeof c||(c=Error(c)),"query"in c||"parameters"in c||Object.defineProperties(c,{stack:{value:c.stack+a.origin.replace(/.*\n/,"\n"),enumerable:b.debug},query:{value:a.string,enumerable:b.debug},parameters:{value:a.parameters,enumerable:b.debug},args:{value:a.args,enumerable:b.debug},types:{value:a.statement&&a.statement.types,enumerable:b.debug}}),a.reject(c)}function aW(){return ac||(al.reserved||e(al),al.reserved||ab||aj||0!==w.length?ac=new Promise(a=>af=a):(aX(),new Promise(a=>C&&"closed"!==C.readyState?C.once("close",a):a())))}function aX(){$=!0,(ad||aj||ab||w.length)&&aT(L.connection("CONNECTION_DESTROYED",b)),clearImmediate(Z),C&&(C.removeListener("data",aD),C.removeListener("connect",aS),"open"===C.readyState&&C.end(aB().X().end())),af&&(af(),ac=af=null)}async function aY(a){if(G=Buffer.alloc(0),R=0,_=null,clearImmediate(Z),C.removeListener("data",aD),C.removeListener("connect",aS),z.cancel(),A.cancel(),B.cancel(),C.removeAllListeners(),C=null,ab)return aR();!a&&(aj||w.length)&&aT(L.connection("CONNECTION_CLOSED",b,C)),P=ax.performance.now(),a&&b.shared.retries++,W=("function"==typeof u?u(b.shared.retries):u)*1e3,f(al,L.connection("CONNECTION_CLOSED",b,C))}function aZ(){F.statement||(F.statement=aj.statement),F.columns=aj.statement.columns}async function a$(a,b=a.readUInt32BE(5)){(3===b?a_:5===b?a0:10===b?a1:11===b?a2:12===b?function(a){a.toString("utf8",9).split(aB.N,1)[0].slice(2)!==Y&&(aU(L.generic("SASL_SIGNATURE_MISMATCH","The server did not return the correct signature")),C.destroy())}:0!==b?function(a,b){console.error("Postgres.js : Unknown Auth:",b)}:aK)(a,b)}async function a_(){let a=await a3();ar(aB().p().str(a).z(1).end())}async function a0(a){let b="md5"+await aO(Buffer.concat([Buffer.from(await aO(await a3()+j)),a.subarray(9)]));ar(aB().p().str(b).z(1).end())}async function a1(){ag=(await av.randomBytes(18)).toString("base64"),aB().p().str("SCRAM-SHA-256"+aB.N);let a=aB.i;ar(aB.inc(4).str("n,,n=*,r="+ag).i32(aB.i-a-4,a).end())}async function a2(a){var b;let c=a.toString("utf8",9).split(",").reduce((a,b)=>(a[b[0]]=b.slice(2),a),{}),d=await av.pbkdf2Sync(await a3(),Buffer.from(c.s,"base64"),parseInt(c.i),32,"sha256"),e=await aP(d,"Client Key"),f="n=*,r="+ag+",r="+c.r+",s="+c.s+",i="+c.i+",c=biws,r="+c.r;Y=(await aP(await aP(d,"Server Key"),f)).toString("base64");let g="c=biws,r="+c.r+",p="+(function(a,b){let c=Math.max(a.length,b.length),d=Buffer.allocUnsafe(c);for(let e=0;e<c;e++)d[e]=a[e]^b[e];return d})(e,Buffer.from(await aP(await (b=e,av.createHash("sha256").update(b).digest()),f))).toString("base64");ar(aB().p().str(g).end())}function a3(){return Promise.resolve("function"==typeof b.pass?b.pass():b.pass)}async function a4(){H=!1,(await new J([`
      select b.oid, b.typarray
      from pg_catalog.pg_type a
      left join pg_catalog.pg_type b on b.oid = a.typelem
      where a.typcategory = 'A'
      group by b.oid, b.typarray
      order by b.oid
    `],[],ao)).forEach(({oid:a,typarray:c})=>(function(a,c){if(b.parsers[c]&&b.serializers[c])return;let d=b.parsers[a];b.shared.typeArrayMap[a]=c,b.parsers[c]=a=>(ai.i=ai.last=0,function a(b,c,d,e){let f=[],g=1020===e?";":",";for(;b.i<c.length;b.i++){if(b.char=c[b.i],b.quoted)"\\"===b.char?b.str+=c[++b.i]:'"'===b.char?(f.push(d?d(b.str):b.str),b.str="",b.quoted='"'===c[b.i+1],b.last=b.i+2):b.str+=b.char;else if('"'===b.char)b.quoted=!0;else if("{"===b.char)b.last=++b.i,f.push(a(b,c,d,e));else if("}"===b.char){b.quoted=!1,b.last<b.i&&f.push(d?d(c.slice(b.last,b.i)):c.slice(b.last,b.i)),b.last=b.i+1;break}else b.char===g&&"}"!==b.p&&'"'!==b.p&&(f.push(d?d(c.slice(b.last,b.i)):c.slice(b.last,b.i)),b.last=b.i+1);b.p=b.char}return b.last<b.i&&f.push(d?d(c.slice(b.last,b.i+1)):c.slice(b.last,b.i+1)),f}(ai,a,d,c)),b.parsers[c].array=!0,b.serializers[c]=d=>ah(d,b.serializers[a],b,c)})(a,c))}async function a5(){try{let a=await Promise.resolve(aj.cursorFn(F));X=0,a===I?ar(function(a=""){return Buffer.concat([aB().C().str("P").str(a+aB.N).end(),aB().S().end()])}(aj.portal)):(F=new ay,ar(a7("",aj.cursorRows)))}catch(a){ar(aF),aj.reject(a)}}function a6(a,b,c,d=""){return aB().P().str(d+aB.N).str(a+aB.N).i16(b.length),b.forEach((a,b)=>aB.i32(c[b]||0)),aB.end()}function a7(a="",b=0){return Buffer.concat([aB().E().str(a+aB.N).i32(b).end(),aG])}},aE=1,aF=aB().S().end(),aG=aB().H().end(),aH=aB().i32(8).i32(0x4d2162f).end(8),aI=Buffer.concat([aB().E().str(aB.N).i32(0).end(),aF]),aJ=aB().D().str("S").str(aB.N).end(),aK=()=>{},aL=new Set(["FetchPreparedStatement","RevalidateCachedQuery","transformAssignedExpr"]),aM={83:"severity_local",86:"severity",67:"code",77:"message",68:"detail",72:"hint",80:"position",112:"internal_position",113:"internal_query",87:"where",115:"schema_name",116:"table_name",99:"column_name",100:"data type_name",110:"constraint_name",70:"file",76:"line",82:"routine"};function aN(a){let b={},c=5;for(let d=5;d<a.length-1;d++)0===a[d]&&(b[aM[a[c]]]=a.toString("utf8",c+1,d),c=d+1);return b}function aO(a){return av.createHash("md5").update(a).digest("hex")}function aP(a,b){return av.createHmac("sha256",a).update(b).digest()}function aQ(a,b){let c;if(!(b="function"==typeof b?b():b))return{cancel:aK,start:aK};return{cancel(){c&&(clearTimeout(c),c=null)},start(){c&&clearTimeout(c),c=setTimeout(d,1e3*b,arguments)}};function d(b){a.apply(null,b),c=null}}let aR=()=>{};function aS(a,b,c,d){let e,f,g,h=d.raw?Array(b.length):{};for(let i=0;i<b.length;i++)e=a[c++],f=b[i],g=110===e?null:117===e?void 0:void 0===f.parser?a.toString("utf8",c+4,c+=4+a.readUInt32BE(c)):!0===f.parser.array?f.parser(a.toString("utf8",c+5,c+=4+a.readUInt32BE(c))):f.parser(a.toString("utf8",c+4,c+=4+a.readUInt32BE(c))),d.raw?h[i]=!0===d.raw?g:d.value.from?d.value.from(g,f):g:h[f.name]=d.value.from?d.value.from(g,f):g;return{i:c,row:d.row.from?d.row.from(h):h}}function aT(a,b,c=393216){return new Promise(async(d,e)=>{await a.begin(async a=>{let e;b||([{oid:b}]=await a`select lo_creat(-1) as oid`);let[{fd:f}]=await a`select lo_open(${b}, ${c}) as fd`,g={writable:i,readable:h,close:()=>a`select lo_close(${f})`.then(e),tell:()=>a`select lo_tell64(${f})`,read:b=>a`select loread(${f}, ${b}) as data`,write:b=>a`select lowrite(${f}, ${b})`,truncate:b=>a`select lo_truncate64(${f}, ${b})`,seek:(b,c=0)=>a`select lo_lseek64(${f}, ${b}, ${c})`,size:()=>a`
          select
            lo_lseek64(${f}, location, 0) as position,
            seek.size
          from (
            select
              lo_lseek64($1, 0, 2) as size,
              tell.location
            from (select lo_tell64($1) as location) tell
          ) seek
        `};return d(g),new Promise(async a=>e=a);async function h({highWaterMark:a=16384,start:b=0,end:c=1/0}={}){let d=c-b;return b&&await g.seek(b),new aw.Readable({highWaterMark:a,async read(a){let b=a>d?a-d:a;d-=a;let[{data:c}]=await g.read(b);this.push(c),c.length<a&&this.push(null)}})}async function i({highWaterMark:a=16384,start:b=0}={}){return b&&await g.seek(b),new aw.Writable({highWaterMark:a,write(a,b,c){g.write(a).then(()=>c(),c)}})}}).catch(e)})}Object.assign(aV,{PostgresError:K,toPascal:ak,pascal:ar,toCamel:aj,camel:aq,toKebab:al,kebab:as,fromPascal:an,fromCamel:am,fromKebab:ao,BigInt:{to:20,from:[20],parse:a=>BigInt(a),serialize:a=>a.toString()}});let aU=aV;function aV(a,b){let c=function(a,b){var c;if(a&&a.shared)return a;let d=process.env,e=(a&&"string"!=typeof a?a:b)||{},{url:f,multihost:g}=function(a){if(!a||"string"!=typeof a)return{url:{searchParams:new Map}};let b=a;b=decodeURIComponent((b=b.slice(b.indexOf("://")+3).split(/[?/]/)[0]).slice(b.indexOf("@")+1));let c=new URL(a.replace(b,b.split(",")[0]));return{url:{username:decodeURIComponent(c.username),password:decodeURIComponent(c.password),host:c.host,hostname:c.hostname,port:c.port,pathname:c.pathname,searchParams:c.searchParams},multihost:b.indexOf(",")>-1&&b}}(a),h=[...f.searchParams].reduce((a,[b,c])=>(a[b]=c,a),{}),i=e.hostname||e.host||g||f.hostname||d.PGHOST||"localhost",j=e.port||f.port||d.PGPORT||5432,k=e.user||e.username||f.username||d.PGUSERNAME||d.PGUSER||function(){try{return D.userInfo().username}catch(a){return process.env.USERNAME||process.env.USER||process.env.LOGNAME}}();e.no_prepare&&(e.prepare=!1),h.sslmode&&(h.ssl=h.sslmode,delete h.sslmode),"timeout"in e&&(console.log("The timeout option is deprecated, use idle_timeout instead"),e.idle_timeout=e.timeout),"system"===h.sslrootcert&&(h.ssl="verify-full");let l=["idle_timeout","connect_timeout","max_lifetime","max_pipeline","backoff","keep_alive"],m={max:globalThis.Cloudflare?3:10,ssl:!1,sslnegotiation:null,idle_timeout:null,connect_timeout:30,max_lifetime:aX,max_pipeline:100,backoff:aW,keep_alive:60,prepare:!0,debug:!1,fetch_types:!0,publications:"alltables",target_session_attrs:null};return{host:Array.isArray(i)?i:i.split(",").map(a=>a.split(":")[0]),port:Array.isArray(j)?j:i.split(",").map(a=>parseInt(a.split(":")[1]||j)),path:e.path||i.indexOf("/")>-1&&i+"/.s.PGSQL."+j,database:e.database||e.db||(f.pathname||"").slice(1)||d.PGDATABASE||k,user:k,pass:e.pass||e.password||f.password||d.PGPASSWORD||"",...Object.entries(m).reduce((a,[b,c])=>{let f=b in e?e[b]:b in h?"disable"!==h[b]&&"false"!==h[b]&&h[b]:d["PG"+b.toUpperCase()]||c;return a[b]="string"==typeof f&&l.includes(b)?+f:f,a},{}),connection:{application_name:d.PGAPPNAME||"postgres.js",...e.connection,...Object.entries(h).reduce((a,[b,c])=>(b in m||(a[b]=c),a),{})},types:e.types||{},target_session_attrs:function(a,b,c){let d=a.target_session_attrs||b.searchParams.get("target_session_attrs")||c.PGTARGETSESSIONATTRS;if(!d||["read-write","read-only","primary","standby","prefer-standby"].includes(d))return d;throw Error("target_session_attrs "+d+" is not supported")}(e,f,d),onnotice:e.onnotice,onnotify:e.onnotify,onclose:e.onclose,onparameter:e.onparameter,socket:e.socket,transform:{undefined:(c=e.transform||{undefined:void 0}).undefined,column:{from:"function"==typeof c.column?c.column:c.column&&c.column.from,to:c.column&&c.column.to},value:{from:"function"==typeof c.value?c.value:c.value&&c.value.from,to:c.value&&c.value.to},row:{from:"function"==typeof c.row?c.row:c.row&&c.row.from,to:c.row&&c.row.to}},parameters:{},shared:{retries:0,typeArrayMap:{}},...aa(e.types)}}(a,b),d=c.no_subscribe||function(a,b){let c=new Map,d="postgresjs_"+Math.random().toString(36).slice(2),e={},f,g,h=!1,i=l.sql=a({...b,transform:{column:{},value:{},row:{}},max:1,fetch_types:!1,idle_timeout:null,max_lifetime:null,connection:{...b.connection,replication:"database"},onclose:async function(){h||(g=null,e.pid=e.secret=void 0,m(await n(i,d,b.publications)),c.forEach(a=>a.forEach(({onsubscribe:a})=>a())))},no_subscribe:!0}),j=i.end,k=i.close;return i.end=async()=>(h=!0,g&&await new Promise(a=>(g.once("close",a),g.end())),j()),i.close=async()=>(g&&await new Promise(a=>(g.once("close",a),g.end())),k()),l;async function l(a,h,j=aR,k=aR){a=function(a){let b=a.match(/^(\*|insert|update|delete)?:?([^.]+?\.?[^=]+)?=?(.+)?/i)||[];if(!b)throw Error("Malformed subscribe pattern: "+a);let[,c,d,e]=b;return(c||"*")+(d?":"+(-1===d.indexOf(".")?"public."+d:d):"")+(e?"="+e:"")}(a),f||(f=n(i,d,b.publications));let o={fn:h,onsubscribe:j},p=c.has(a)?c.get(a).add(o):c.set(a,new Set([o])).get(a),q=()=>{p.delete(o),0===p.size&&c.delete(a)};return f.then(a=>(m(a),j(),g&&g.on("error",k),{unsubscribe:q,state:e,sql:i}))}function m(a){g=a.stream,e.pid=a.state.pid,e.secret=a.state.secret}async function n(a,c,d){if(!d)throw Error("Missing publication names");let e=await a.unsafe(`CREATE_REPLICATION_SLOT ${c} TEMPORARY LOGICAL pgoutput NOEXPORT_SNAPSHOT`),[f]=e,g=await a.unsafe(`START_REPLICATION SLOT ${c} LOGICAL ${f.consistent_point} (proto_version '1', publication_names '${d}')`).writable(),h={lsn:Buffer.concat(f.consistent_point.split("/").map(a=>Buffer.from(("00000000"+a).slice(-8),"hex")))};return g.on("data",function(c){var d,e,f,j,k;119===c[0]?(d=c.subarray(25),e=h,f=a.options.parsers,j=i,k=b.transform,Object.entries({R:a=>{let b=1,c=e[a.readUInt32BE(b)]={schema:a.toString("utf8",b+=4,b=a.indexOf(0,b))||"pg_catalog",table:a.toString("utf8",b+1,b=a.indexOf(0,b+1)),columns:Array(a.readUInt16BE(b+=2)),keys:[]};b+=2;let d=0,g;for(;b<a.length;)(g=c.columns[d++]={key:a[b++],name:k.column.from?k.column.from(a.toString("utf8",b,b=a.indexOf(0,b))):a.toString("utf8",b,b=a.indexOf(0,b)),type:a.readUInt32BE(b+=1),parser:f[a.readUInt32BE(b)],atttypmod:a.readUInt32BE(b+=4)}).key&&c.keys.push(g),b+=4},Y:()=>{},O:()=>{},B:a=>{var b;b=a.readBigInt64BE(9),e.date=new Date(Date.UTC(2e3,0,1)+Number(b/BigInt(1e3))),e.lsn=a.subarray(1,9)},I:a=>{let b=1,c=e[a.readUInt32BE(b)],{row:d}=aS(a,c.columns,b+=7,k);j(d,{command:"insert",relation:c})},D:a=>{let b=1,c=e[a.readUInt32BE(b)],d=75===a[b+=4];j(d||79===a[b]?aS(a,c.columns,b+=3,k).row:null,{command:"delete",relation:c,key:d})},U:a=>{let b=1,c=e[a.readUInt32BE(b)],d=75===a[b+=4],f=d||79===a[b]?aS(a,c.columns,b+=3,k):null;f&&(b=f.i);let{row:g}=aS(a,c.columns,b+3,k);j(g,{command:"update",relation:c,key:d,old:f&&f.row})},T:()=>{},C:()=>{}}).reduce((a,[b,c])=>(a[b.charCodeAt(0)]=c,a),{})[d[0]](d)):107===c[0]&&c[17]&&(h.lsn=c.subarray(1,9),function(){let a=Buffer.alloc(34);a[0]=114,a.fill(h.lsn,1),a.writeBigInt64BE(BigInt(Date.now()-Date.UTC(2e3,0,1))*BigInt(1e3),25),g.write(a)}())}),g.on("error",function(a){console.error("Unexpected error during logical streaming - reconnecting",a)}),g.on("close",a.close),{stream:g,state:e.state};function i(a,b){let c=b.relation.schema+"."+b.relation.table;o("*",a,b),o("*:"+c,a,b),b.relation.keys.length&&o("*:"+c+"="+b.relation.keys.map(b=>a[b.name]),a,b),o(b.command,a,b),o(b.command+":"+c,a,b),b.relation.keys.length&&o(b.command+":"+c+"="+b.relation.keys.map(b=>a[b.name]),a,b)}}function o(a,b,d){c.has(a)&&c.get(a).forEach(({fn:c})=>c(b,d,a))}}(aV,{...c}),e=!1,f=az(),g=az(),h=az(),i=az(),j=az(),k=az(),l=az(),m=az(),n={connecting:g,reserved:h,closed:i,ended:j,open:k,busy:l,full:m},o=[...Array(c.max)].map(()=>aD(c,n,{onopen:G,onend:F,onclose:H})),p=q(function(a){return e?a.reject(L.connection("CONNECTION_ENDED",c,c)):k.length?x(k.shift(),a):i.length?C(i.shift(),a):void(l.length?x(l.shift(),a):f.push(a))});return Object.assign(p,{get parameters(){return c.parameters},largeObject:aT.bind(null,p),subscribe:d,CLOSE:I,END:I,PostgresError:K,options:c,reserve:t,listen:r,begin:u,close:A,end:z}),p;function q(a){return a.debug=c.debug,Object.entries(c.types).reduce((a,[b,c])=>(a[b]=a=>new O(a,c.to),a),b),Object.assign(d,{types:b,typed:b,unsafe:function(b,c=[],d={}){return 2!=arguments.length||Array.isArray(c)||(d=c,c=[]),new J([b],c,a,y,{prepare:!1,...d,simple:"simple"in d?d.simple:0===c.length})},notify:s,array:function a(b,d){return Array.isArray(b)?new O(b,d||(b.length?ae(b)||25:0),c.shared.typeArrayMap):a(Array.from(arguments))},json:w,file:function(b,c=[],d={}){return 2!=arguments.length||Array.isArray(c)||(d=c,c=[]),new J([],c,c=>{E.readFile(b,"utf8",(b,d)=>{if(b)return c.reject(b);c.strings=[d],a(c)})},y,{...d,simple:"simple"in d?d.simple:0===c.length})}}),d;function b(a,b){return new O(a,b)}function d(b,...e){return b&&Array.isArray(b.raw)?new J(b,e,a,y):"string"!=typeof b||e.length?new P(b,e):new N(c.transform.column.to?c.transform.column.to(b):b)}}async function r(a,b,d){let e={fn:b,onlisten:d},f=r.sql||(r.sql=aV({...c,max:1,idle_timeout:null,max_lifetime:null,fetch_types:!1,onclose(){Object.entries(r.channels).forEach(([a,{listeners:b}])=>{delete r.channels[a],Promise.all(b.map(b=>r(a,b.fn,b.onlisten).catch(()=>{})))})},onnotify(a,b){a in r.channels&&r.channels[a].listeners.forEach(a=>a.fn(b))}})),g=r.channels||(r.channels={});if(a in g){g[a].listeners.push(e);let b=await g[a].result;return e.onlisten&&e.onlisten(),{state:b.state,unlisten:i}}g[a]={result:f`listen ${f.unsafe('"'+a.replace(/"/g,'""')+'"')}`,listeners:[e]};let h=await g[a].result;return e.onlisten&&e.onlisten(),{state:h.state,unlisten:i};async function i(){if(a in g!=!1&&(g[a].listeners=g[a].listeners.filter(a=>a!==e),!g[a].listeners.length))return delete g[a],f`unlisten ${f.unsafe('"'+a.replace(/"/g,'""')+'"')}`}}async function s(a,b){return await p`select pg_notify(${a}, ${""+b})`}async function t(){let a=az(),b=k.length?k.shift():await new Promise((a,b)=>{let c={reserve:a,reject:b};f.push(c),i.length&&C(i.shift(),c)});v(b,h),b.reserved=()=>a.length?b.execute(a.shift()):v(b,h),b.reserved.release=!0;let c=q(function(c){b.queue===m?a.push(c):b.execute(c)||v(b,m)});return c.release=()=>{b.reserved=null,G(b)},c}async function u(a,b){b||(b=a,a="");let c=az(),d=0,e,f=null;try{return await p.unsafe("begin "+a.replace(/[^a-z ]/ig,""),[],{onexecute:function(a){e=a,v(a,h),a.reserved=()=>c.length?a.execute(c.shift()):v(a,h)}}).execute(),await Promise.race([g(e,b),new Promise((a,b)=>e.onclose=b)])}catch(a){throw a}async function g(a,b,e){let h,i,j=q(function(b){b.catch(a=>h||(h=a)),a.queue===m?c.push(b):a.execute(b)||v(a,m)});j.savepoint=function b(c,e){return c&&Array.isArray(c.raw)?b(a=>a.apply(a,arguments)):(1==arguments.length&&(e=c,c=null),g(a,e,"s"+d+++(c?"_"+c:"")))},j.prepare=a=>f=a.replace(/[^a-z0-9$-_. ]/gi),e&&await j`savepoint ${j(e)}`;try{if(i=await new Promise((a,c)=>{let d=b(j);Promise.resolve(Array.isArray(d)?Promise.all(d):d).then(a,c)}),h)throw h}catch(a){throw await (e?j`rollback to ${j(e)}`:j`rollback`),a instanceof K&&"25P02"===a.code&&h||a}return e||(f?await j`prepare transaction '${j.unsafe(f)}'`:await j`commit`),i}}function v(a,b){return a.queue.remove(a),b.push(a),a.queue=b,b===k?a.idleTimer.start():a.idleTimer.cancel(),a}function w(a){return new O(a,3802)}function x(a,b){return a.execute(b)?v(a,l):v(a,m)}function y(a){return new Promise((b,d)=>{a.state?a.active?aD(c).cancel(a.state,b,d):a.cancelled={resolve:b,reject:d}:(f.remove(a),a.cancelled=!0,a.reject(L.generic("57014","canceling statement due to user request")),b())})}async function z({timeout:a=null}={}){let b;return e||(await 1,e=Promise.race([new Promise(c=>null!==a&&(b=setTimeout(B,1e3*a,c))),Promise.all(o.map(a=>a.end()).concat(r.sql?r.sql.end({timeout:0}):[],d.sql?d.sql.end({timeout:0}):[]))]).then(()=>clearTimeout(b)))}async function A(){await Promise.all(o.map(a=>a.end()))}async function B(a){for(await Promise.all(o.map(a=>a.terminate()));f.length;)f.shift().reject(L.connection("CONNECTION_DESTROYED",c));a()}function C(a,b){return v(a,g),a.connect(b),a}function F(a){v(a,j)}function G(a){if(0===f.length)return v(a,k);let b=Math.ceil(f.length/(g.length+1)),c=!0;for(;c&&f.length&&b-- >0;){let b=f.shift();if(b.reserve)return b.reserve(a);c=a.execute(b)}c?v(a,l):v(a,m)}function H(a,b){v(a,i),a.reserved=null,a.onclose&&(a.onclose(b),a.onclose=null),c.onclose&&c.onclose(a.id),f.length&&C(a,f.shift())}}function aW(a){return(.5+Math.random()/2)*Math.min(3**a/100,20)}function aX(){return 60*(30+30*Math.random())}let aY=Symbol.for("drizzle:entityKind");function aZ(a,b){if(!a||"object"!=typeof a)return!1;if(a instanceof b)return!0;if(!Object.prototype.hasOwnProperty.call(b,aY))throw Error(`Class "${b.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let c=Object.getPrototypeOf(a).constructor;if(c)for(;c;){if(aY in c&&c[aY]===b[aY])return!0;c=Object.getPrototypeOf(c)}return!1}Symbol.for("drizzle:hasOwnEntityKind");class a${static [aY]="ConsoleLogWriter";write(a){console.log(a)}}class a_{static [aY]="DefaultLogger";writer;constructor(a){this.writer=a?.writer??new a$}logQuery(a,b){let c=b.map(a=>{try{return JSON.stringify(a)}catch{return String(a)}}),d=c.length?` -- params: [${c.join(", ")}]`:"";this.writer.write(`Query: ${a}${d}`)}}class a0{static [aY]="NoopLogger";logQuery(){}}class a1{constructor(a,b){this.table=a,this.config=b,this.name=b.name,this.keyAsName=b.keyAsName,this.notNull=b.notNull,this.default=b.default,this.defaultFn=b.defaultFn,this.onUpdateFn=b.onUpdateFn,this.hasDefault=b.hasDefault,this.primary=b.primaryKey,this.isUnique=b.isUnique,this.uniqueName=b.uniqueName,this.uniqueType=b.uniqueType,this.dataType=b.dataType,this.columnType=b.columnType,this.generated=b.generated,this.generatedIdentity=b.generatedIdentity}static [aY]="Column";name;keyAsName;primary;notNull;default;defaultFn;onUpdateFn;hasDefault;isUnique;uniqueName;uniqueType;dataType;columnType;enumValues=void 0;generated=void 0;generatedIdentity=void 0;config;mapFromDriverValue(a){return a}mapToDriverValue(a){return a}shouldDisableInsert(){return void 0!==this.config.generated&&"byDefault"!==this.config.generated.type}}class a2{static [aY]="ColumnBuilder";config;constructor(a,b,c){this.config={name:a,keyAsName:""===a,notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:b,columnType:c,generated:void 0}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(a){return this.config.default=a,this.config.hasDefault=!0,this}$defaultFn(a){return this.config.defaultFn=a,this.config.hasDefault=!0,this}$default=this.$defaultFn;$onUpdateFn(a){return this.config.onUpdateFn=a,this.config.hasDefault=!0,this}$onUpdate=this.$onUpdateFn;primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}setName(a){""===this.config.name&&(this.config.name=a)}}let a3=Symbol.for("drizzle:Name");class a4{static [aY]="PgForeignKeyBuilder";reference;_onUpdate="no action";_onDelete="no action";constructor(a,b){this.reference=()=>{let{name:b,columns:c,foreignColumns:d}=a();return{name:b,columns:c,foreignTable:d[0].table,foreignColumns:d}},b&&(this._onUpdate=b.onUpdate,this._onDelete=b.onDelete)}onUpdate(a){return this._onUpdate=void 0===a?"no action":a,this}onDelete(a){return this._onDelete=void 0===a?"no action":a,this}build(a){return new a5(a,this)}}class a5{constructor(a,b){this.table=a,this.reference=b.reference,this.onUpdate=b._onUpdate,this.onDelete=b._onDelete}static [aY]="PgForeignKey";reference;onUpdate;onDelete;getName(){let{name:a,columns:b,foreignColumns:c}=this.reference(),d=b.map(a=>a.name),e=c.map(a=>a.name),f=[this.table[a3],...d,c[0].table[a3],...e];return a??`${f.join("_")}_fk`}}function a6(a,...b){return a(...b)}function a7(a,b){return`${a[a3]}_${b.join("_")}_unique`}class a8{constructor(a,b){this.name=b,this.columns=a}static [aY]=null;columns;nullsNotDistinctConfig=!1;nullsNotDistinct(){return this.nullsNotDistinctConfig=!0,this}build(a){return new ba(a,this.columns,this.nullsNotDistinctConfig,this.name)}}class a9{static [aY]=null;name;constructor(a){this.name=a}on(...a){return new a8(a,this.name)}}class ba{constructor(a,b,c,d){this.table=a,this.columns=b,this.name=d??a7(this.table,this.columns.map(a=>a.name)),this.nullsNotDistinct=c}static [aY]=null;columns;name;nullsNotDistinct=!1;getName(){return this.name}}function bb(a,b,c){for(let d=b;d<a.length;d++){let e=a[d];if("\\"===e){d++;continue}if('"'===e)return[a.slice(b,d).replace(/\\/g,""),d+1];if(!c&&(","===e||"}"===e))return[a.slice(b,d).replace(/\\/g,""),d]}return[a.slice(b).replace(/\\/g,""),a.length]}class bc extends a2{foreignKeyConfigs=[];static [aY]="PgColumnBuilder";array(a){return new bg(this.config.name,this,a)}references(a,b={}){return this.foreignKeyConfigs.push({ref:a,actions:b}),this}unique(a,b){return this.config.isUnique=!0,this.config.uniqueName=a,this.config.uniqueType=b?.nulls,this}generatedAlwaysAs(a){return this.config.generated={as:a,type:"always",mode:"stored"},this}buildForeignKeys(a,b){return this.foreignKeyConfigs.map(({ref:c,actions:d})=>a6((c,d)=>{let e=new a4(()=>({columns:[a],foreignColumns:[c()]}));return d.onUpdate&&e.onUpdate(d.onUpdate),d.onDelete&&e.onDelete(d.onDelete),e.build(b)},c,d))}buildExtraConfigColumn(a){return new be(a,this.config)}}class bd extends a1{constructor(a,b){b.uniqueName||(b.uniqueName=a7(a,[b.name])),super(a,b),this.table=a}static [aY]="PgColumn"}class be extends bd{static [aY]="ExtraConfigColumn";getSQLType(){return this.getSQLType()}indexConfig={order:this.config.order??"asc",nulls:this.config.nulls??"last",opClass:this.config.opClass};defaultConfig={order:"asc",nulls:"last",opClass:void 0};asc(){return this.indexConfig.order="asc",this}desc(){return this.indexConfig.order="desc",this}nullsFirst(){return this.indexConfig.nulls="first",this}nullsLast(){return this.indexConfig.nulls="last",this}op(a){return this.indexConfig.opClass=a,this}}class bf{static [aY]="IndexedColumn";constructor(a,b,c,d){this.name=a,this.keyAsName=b,this.type=c,this.indexConfig=d}name;keyAsName;type;indexConfig}class bg extends bc{static [aY]="PgArrayBuilder";constructor(a,b,c){super(a,"array","PgArray"),this.config.baseBuilder=b,this.config.size=c}build(a){let b=this.config.baseBuilder.build(a);return new bh(a,this.config,b)}}class bh extends bd{constructor(a,b,c,d){super(a,b),this.baseColumn=c,this.range=d,this.size=b.size}size;static [aY]="PgArray";getSQLType(){return`${this.baseColumn.getSQLType()}[${"number"==typeof this.size?this.size:""}]`}mapFromDriverValue(a){return"string"==typeof a&&(a=function(a){let[b]=function a(b,c=0){let d=[],e=c,f=!1;for(;e<b.length;){let g=b[e];if(","===g){(f||e===c)&&d.push(""),f=!0,e++;continue}if(f=!1,"\\"===g){e+=2;continue}if('"'===g){let[a,c]=bb(b,e+1,!0);d.push(a),e=c;continue}if("}"===g)return[d,e+1];if("{"===g){let[c,f]=a(b,e+1);d.push(c),e=f;continue}let[h,i]=bb(b,e,!1);d.push(h),e=i}return[d,e]}(a,1);return b}(a)),a.map(a=>this.baseColumn.mapFromDriverValue(a))}mapToDriverValue(a,b=!1){let c=a.map(a=>null===a?null:aZ(this.baseColumn,bh)?this.baseColumn.mapToDriverValue(a,!0):this.baseColumn.mapToDriverValue(a));return b?c:function a(b){return`{${b.map(b=>Array.isArray(b)?a(b):"string"==typeof b?`"${b.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`:`${b}`).join(",")}}`}(c)}}class bi extends bc{static [aY]="PgEnumObjectColumnBuilder";constructor(a,b){super(a,"string","PgEnumObjectColumn"),this.config.enum=b}build(a){return new bj(a,this.config)}}class bj extends bd{static [aY]="PgEnumObjectColumn";enum;enumValues=this.config.enum.enumValues;constructor(a,b){super(a,b),this.enum=b.enum}getSQLType(){return this.enum.enumName}}let bk=Symbol.for("drizzle:isPgEnum");class bl extends bc{static [aY]="PgEnumColumnBuilder";constructor(a,b){super(a,"string","PgEnumColumn"),this.config.enum=b}build(a){return new bm(a,this.config)}}class bm extends bd{static [aY]="PgEnumColumn";enum=this.config.enum;enumValues=this.config.enum.enumValues;constructor(a,b){super(a,b),this.enum=b.enum}getSQLType(){return this.enum.enumName}}class bn{static [aY]="Subquery";constructor(a,b,c,d=!1,e=[]){this._={brand:"Subquery",sql:a,selectedFields:b,alias:c,isWith:d,usedTables:e}}}class bo extends bn{static [aY]="WithSubquery"}let bp={startActiveSpan:(a,b)=>d?(e||(e=d.trace.getTracer("drizzle-orm","0.45.1")),a6((c,d)=>d.startActiveSpan(a,a=>{try{return b(a)}catch(b){throw a.setStatus({code:c.SpanStatusCode.ERROR,message:b instanceof Error?b.message:"Unknown error"}),b}finally{a.end()}}),d,e)):b()},bq=Symbol.for("drizzle:ViewBaseConfig"),br=Symbol.for("drizzle:Schema"),bs=Symbol.for("drizzle:Columns"),bt=Symbol.for("drizzle:ExtraConfigColumns"),bu=Symbol.for("drizzle:OriginalName"),bv=Symbol.for("drizzle:BaseName"),bw=Symbol.for("drizzle:IsAlias"),bx=Symbol.for("drizzle:ExtraConfigBuilder"),by=Symbol.for("drizzle:IsDrizzleTable");class bz{static [aY]="Table";static Symbol={Name:a3,Schema:br,OriginalName:bu,Columns:bs,ExtraConfigColumns:bt,BaseName:bv,IsAlias:bw,ExtraConfigBuilder:bx};[a3];[bu];[br];[bs];[bt];[bv];[bw]=!1;[by]=!0;[bx]=void 0;constructor(a,b,c){this[a3]=this[bu]=a,this[br]=b,this[bv]=c}}function bA(a){return`${a[br]??"public"}.${a[a3]}`}class bB{static [aY]=null}function bC(a){return null!=a&&"function"==typeof a.getSQL}class bD{static [aY]="StringChunk";value;constructor(a){this.value=Array.isArray(a)?a:[a]}getSQL(){return new bE([this])}}class bE{constructor(a){for(let b of(this.queryChunks=a,a))if(aZ(b,bz)){let a=b[bz.Symbol.Schema];this.usedTables.push(void 0===a?b[bz.Symbol.Name]:a+"."+b[bz.Symbol.Name])}}static [aY]="SQL";decoder=bG;shouldInlineParams=!1;usedTables=[];append(a){return this.queryChunks.push(...a.queryChunks),this}toQuery(a){return bp.startActiveSpan("drizzle.buildSQL",b=>{let c=this.buildQueryFromSourceParams(this.queryChunks,a);return b?.setAttributes({"drizzle.query.text":c.sql,"drizzle.query.params":JSON.stringify(c.params)}),c})}buildQueryFromSourceParams(a,b){let c=Object.assign({},b,{inlineParams:b.inlineParams||this.shouldInlineParams,paramStartIndex:b.paramStartIndex||{value:0}}),{casing:d,escapeName:e,escapeParam:f,prepareTyping:g,inlineParams:h,paramStartIndex:i}=c;var j=a.map(a=>{if(aZ(a,bD))return{sql:a.value.join(""),params:[]};if(aZ(a,bF))return{sql:e(a.value),params:[]};if(void 0===a)return{sql:"",params:[]};if(Array.isArray(a)){let b=[new bD("(")];for(let[c,d]of a.entries())b.push(d),c<a.length-1&&b.push(new bD(", "));return b.push(new bD(")")),this.buildQueryFromSourceParams(b,c)}if(aZ(a,bE))return this.buildQueryFromSourceParams(a.queryChunks,{...c,inlineParams:h||a.shouldInlineParams});if(aZ(a,bz)){let b=a[bz.Symbol.Schema],c=a[bz.Symbol.Name];return{sql:void 0===b||a[bw]?e(c):e(b)+"."+e(c),params:[]}}if(aZ(a,a1)){let c=d.getColumnCasing(a);if("indexes"===b.invokeSource)return{sql:e(c),params:[]};let f=a.table[bz.Symbol.Schema];return{sql:a.table[bw]||void 0===f?e(a.table[bz.Symbol.Name])+"."+e(c):e(f)+"."+e(a.table[bz.Symbol.Name])+"."+e(c),params:[]}}if(aZ(a,bN)){let b=a[bq].schema,c=a[bq].name;return{sql:void 0===b||a[bq].isAlias?e(c):e(b)+"."+e(c),params:[]}}if(aZ(a,bI)){if(aZ(a.value,bK))return{sql:f(i.value++,a),params:[a],typings:["none"]};let b=null===a.value?null:a.encoder.mapToDriverValue(a.value);if(aZ(b,bE))return this.buildQueryFromSourceParams([b],c);if(h)return{sql:this.mapInlineParam(b,c),params:[]};let d=["none"];return g&&(d=[g(a.encoder)]),{sql:f(i.value++,b),params:[b],typings:d}}return aZ(a,bK)?{sql:f(i.value++,a),params:[a],typings:["none"]}:aZ(a,bE.Aliased)&&void 0!==a.fieldAlias?{sql:e(a.fieldAlias),params:[]}:aZ(a,bn)?a._.isWith?{sql:e(a._.alias),params:[]}:this.buildQueryFromSourceParams([new bD("("),a._.sql,new bD(") "),new bF(a._.alias)],c):a&&"function"==typeof a&&bk in a&&!0===a[bk]?a.schema?{sql:e(a.schema)+"."+e(a.enumName),params:[]}:{sql:e(a.enumName),params:[]}:bC(a)?a.shouldOmitSQLParens?.()?this.buildQueryFromSourceParams([a.getSQL()],c):this.buildQueryFromSourceParams([new bD("("),a.getSQL(),new bD(")")],c):h?{sql:this.mapInlineParam(a,c),params:[]}:{sql:f(i.value++,a),params:[a],typings:["none"]}});let k={sql:"",params:[]};for(let a of j)k.sql+=a.sql,k.params.push(...a.params),a.typings?.length&&(k.typings||(k.typings=[]),k.typings.push(...a.typings));return k}mapInlineParam(a,{escapeString:b}){if(null===a)return"null";if("number"==typeof a||"boolean"==typeof a)return a.toString();if("string"==typeof a)return b(a);if("object"==typeof a){let c=a.toString();return"[object Object]"===c?b(JSON.stringify(a)):b(c)}throw Error("Unexpected param value: "+a)}getSQL(){return this}as(a){return void 0===a?this:new bE.Aliased(this,a)}mapWith(a){return this.decoder="function"==typeof a?{mapFromDriverValue:a}:a,this}inlineParams(){return this.shouldInlineParams=!0,this}if(a){return a?this:void 0}}class bF{constructor(a){this.value=a}static [aY]="Name";brand;getSQL(){return new bE([this])}}let bG={mapFromDriverValue:a=>a},bH={mapToDriverValue:a=>a};({...bG,...bH});class bI{constructor(a,b=bH){this.value=a,this.encoder=b}static [aY]="Param";brand;getSQL(){return new bE([this])}}function bJ(a,...b){let c=[];for(let[d,e]of((b.length>0||a.length>0&&""!==a[0])&&c.push(new bD(a[0])),b.entries()))c.push(e,new bD(a[d+1]));return new bE(c)}(a=>{a.empty=function(){return new bE([])},a.fromList=function(a){return new bE(a)},a.raw=function(a){return new bE([new bD(a)])},a.join=function(a,b){let c=[];for(let[d,e]of a.entries())d>0&&void 0!==b&&c.push(b),c.push(e);return new bE(c)},a.identifier=function(a){return new bF(a)},a.placeholder=function(a){return new bK(a)},a.param=function(a,b){return new bI(a,b)}})(bJ||(bJ={})),(a=>{class b{constructor(a,b){this.sql=a,this.fieldAlias=b}static [aY]="SQL.Aliased";isSelectionField=!1;getSQL(){return this.sql}clone(){return new b(this.sql,this.fieldAlias)}}a.Aliased=b})(bE||(bE={}));class bK{constructor(a){this.name=a}static [aY]="Placeholder";getSQL(){return new bE([this])}}function bL(a,b){return a.map(a=>{if(aZ(a,bK)){if(!(a.name in b))throw Error(`No value for placeholder "${a.name}" was provided`);return b[a.name]}if(aZ(a,bI)&&aZ(a.value,bK)){if(!(a.value.name in b))throw Error(`No value for placeholder "${a.value.name}" was provided`);return a.encoder.mapToDriverValue(b[a.value.name])}return a})}let bM=Symbol.for("drizzle:IsDrizzleView");class bN{static [aY]="View";[bq];[bM]=!0;constructor({name:a,schema:b,selectedFields:c,query:d}){this[bq]={name:a,originalName:a,schema:b,selectedFields:c,query:d,isExisting:!d,isAlias:!1}}getSQL(){return new bE([this])}}a1.prototype.getSQL=function(){return new bE([this])},bz.prototype.getSQL=function(){return new bE([this])},bn.prototype.getSQL=function(){return new bE([this])};class bO{constructor(a){this.table=a}static [aY]="ColumnAliasProxyHandler";get(a,b){return"table"===b?this.table:a[b]}}class bP{constructor(a,b){this.alias=a,this.replaceOriginalName=b}static [aY]="TableAliasProxyHandler";get(a,b){if(b===bz.Symbol.IsAlias)return!0;if(b===bz.Symbol.Name||this.replaceOriginalName&&b===bz.Symbol.OriginalName)return this.alias;if(b===bq)return{...a[bq],name:this.alias,isAlias:!0};if(b===bz.Symbol.Columns){let b=a[bz.Symbol.Columns];if(!b)return b;let c={};return Object.keys(b).map(d=>{c[d]=new Proxy(b[d],new bO(new Proxy(a,this)))}),c}let c=a[b];return aZ(c,a1)?new Proxy(c,new bO(new Proxy(a,this))):c}}class bQ{constructor(a){this.alias=a}static [aY]=null;get(a,b){return"sourceTable"===b?bR(a.sourceTable,this.alias):a[b]}}function bR(a,b){return new Proxy(a,new bP(b,!1))}function bS(a,b){return new Proxy(a,new bO(new Proxy(a.table,new bP(b,!1))))}function bT(a,b){return new bE.Aliased(bU(a.sql,b),a.fieldAlias)}function bU(a,b){return bJ.join(a.queryChunks.map(a=>aZ(a,a1)?bS(a,b):aZ(a,bE)?bU(a,b):aZ(a,bE.Aliased)?bT(a,b):a))}function bV(a){return(a.replace(/['\u2019]/g,"").match(/[\da-z]+|[A-Z]+(?![a-z])|[A-Z][\da-z]+/g)??[]).map(a=>a.toLowerCase()).join("_")}function bW(a){return(a.replace(/['\u2019]/g,"").match(/[\da-z]+|[A-Z]+(?![a-z])|[A-Z][\da-z]+/g)??[]).reduce((a,b,c)=>a+(0===c?b.toLowerCase():`${b[0].toUpperCase()}${b.slice(1)}`),"")}function bX(a){return a}class bY{static [aY]="CasingCache";cache={};cachedTables={};convert;constructor(a){this.convert="snake_case"===a?bV:"camelCase"===a?bW:bX}getColumnCasing(a){if(!a.keyAsName)return a.name;let b=a.table[bz.Symbol.Schema]??"public",c=a.table[bz.Symbol.OriginalName],d=`${b}.${c}.${a.name}`;return this.cache[d]||this.cacheTable(a.table),this.cache[d]}cacheTable(a){let b=a[bz.Symbol.Schema]??"public",c=a[bz.Symbol.OriginalName],d=`${b}.${c}`;if(!this.cachedTables[d]){for(let b of Object.values(a[bz.Symbol.Columns])){let a=`${d}.${b.name}`;this.cache[a]=this.convert(b.name)}this.cachedTables[d]=!0}}clearCache(){this.cache={},this.cachedTables={}}}class bZ extends Error{static [aY]="DrizzleError";constructor({message:a,cause:b}){super(a),this.name="DrizzleError",this.cause=b}}class b$ extends Error{constructor(a,b,c){super(`Failed query: ${a}
params: ${b}`),this.query=a,this.params=b,this.cause=c,Error.captureStackTrace(this,b$),c&&(this.cause=c)}}class b_ extends bZ{static [aY]="TransactionRollbackError";constructor(){super({message:"Rollback"})}}class b0 extends bc{static [aY]="PgJsonbBuilder";constructor(a){super(a,"json","PgJsonb")}build(a){return new b1(a,this.config)}}class b1 extends bd{static [aY]="PgJsonb";constructor(a,b){super(a,b)}getSQLType(){return"jsonb"}mapToDriverValue(a){return JSON.stringify(a)}mapFromDriverValue(a){if("string"==typeof a)try{return JSON.parse(a)}catch{}return a}}function b2(a){return new b0(a??"")}class b3 extends bc{static [aY]="PgJsonBuilder";constructor(a){super(a,"json","PgJson")}build(a){return new b4(a,this.config)}}class b4 extends bd{static [aY]="PgJson";constructor(a,b){super(a,b)}getSQLType(){return"json"}mapToDriverValue(a){return JSON.stringify(a)}mapFromDriverValue(a){if("string"==typeof a)try{return JSON.parse(a)}catch{}return a}}function b5(a){return new b3(a??"")}function b6(a,b){return Object.entries(a).reduce((a,[c,d])=>{if("string"!=typeof c)return a;let e=b?[...b,c]:[c];return aZ(d,a1)||aZ(d,bE)||aZ(d,bE.Aliased)||aZ(d,bn)?a.push({path:e,field:d}):aZ(d,bz)?a.push(...b6(d[bz.Symbol.Columns],e)):a.push(...b6(d,e)),a},[])}function b7(a,b){let c=Object.keys(a),d=Object.keys(b);if(c.length!==d.length)return!1;for(let[a,b]of c.entries())if(b!==d[a])return!1;return!0}function b8(a,b){let c=Object.entries(b).filter(([,a])=>void 0!==a).map(([b,c])=>aZ(c,bE)||aZ(c,a1)?[b,c]:[b,new bI(c,a[bz.Symbol.Columns][b])]);if(0===c.length)throw Error("No values to set");return Object.fromEntries(c)}function b9(a){return aZ(a,bn)?a._.alias:aZ(a,bN)?a[bq].name:aZ(a,bE)?void 0:a[bz.Symbol.IsAlias]?a[bz.Symbol.Name]:a[bz.Symbol.BaseName]}function ca(a,b){return{name:"string"==typeof a&&a.length>0?a:"",config:"object"==typeof a?a:b}}"undefined"==typeof TextDecoder||new TextDecoder;class cb extends bc{static [aY]="PgNumericBuilder";constructor(a,b,c){super(a,"string","PgNumeric"),this.config.precision=b,this.config.scale=c}build(a){return new cc(a,this.config)}}class cc extends bd{static [aY]="PgNumeric";precision;scale;constructor(a,b){super(a,b),this.precision=b.precision,this.scale=b.scale}mapFromDriverValue(a){return"string"==typeof a?a:String(a)}getSQLType(){return void 0!==this.precision&&void 0!==this.scale?`numeric(${this.precision}, ${this.scale})`:void 0===this.precision?"numeric":`numeric(${this.precision})`}}class cd extends bc{static [aY]="PgNumericNumberBuilder";constructor(a,b,c){super(a,"number","PgNumericNumber"),this.config.precision=b,this.config.scale=c}build(a){return new ce(a,this.config)}}class ce extends bd{static [aY]="PgNumericNumber";precision;scale;constructor(a,b){super(a,b),this.precision=b.precision,this.scale=b.scale}mapFromDriverValue(a){return"number"==typeof a?a:Number(a)}mapToDriverValue=String;getSQLType(){return void 0!==this.precision&&void 0!==this.scale?`numeric(${this.precision}, ${this.scale})`:void 0===this.precision?"numeric":`numeric(${this.precision})`}}class cf extends bc{static [aY]="PgNumericBigIntBuilder";constructor(a,b,c){super(a,"bigint","PgNumericBigInt"),this.config.precision=b,this.config.scale=c}build(a){return new cg(a,this.config)}}class cg extends bd{static [aY]="PgNumericBigInt";precision;scale;constructor(a,b){super(a,b),this.precision=b.precision,this.scale=b.scale}mapFromDriverValue=BigInt;mapToDriverValue=String;getSQLType(){return void 0!==this.precision&&void 0!==this.scale?`numeric(${this.precision}, ${this.scale})`:void 0===this.precision?"numeric":`numeric(${this.precision})`}}function ch(a,b){let{name:c,config:d}=ca(a,b),e=d?.mode;return"number"===e?new cd(c,d?.precision,d?.scale):"bigint"===e?new cf(c,d?.precision,d?.scale):new cb(c,d?.precision,d?.scale)}class ci extends bc{static [aY]="PgDateColumnBaseBuilder";defaultNow(){return this.default(bJ`now()`)}}class cj extends ci{constructor(a,b,c){super(a,"string","PgTime"),this.withTimezone=b,this.precision=c,this.config.withTimezone=b,this.config.precision=c}static [aY]="PgTimeBuilder";build(a){return new ck(a,this.config)}}class ck extends bd{static [aY]="PgTime";withTimezone;precision;constructor(a,b){super(a,b),this.withTimezone=b.withTimezone,this.precision=b.precision}getSQLType(){let a=void 0===this.precision?"":`(${this.precision})`;return`time${a}${this.withTimezone?" with time zone":""}`}}function cl(a,b={}){let{name:c,config:d}=ca(a,b);return new cj(c,d.withTimezone??!1,d.precision)}class cm extends ci{static [aY]="PgTimestampBuilder";constructor(a,b,c){super(a,"date","PgTimestamp"),this.config.withTimezone=b,this.config.precision=c}build(a){return new cn(a,this.config)}}class cn extends bd{static [aY]="PgTimestamp";withTimezone;precision;constructor(a,b){super(a,b),this.withTimezone=b.withTimezone,this.precision=b.precision}getSQLType(){let a=void 0===this.precision?"":` (${this.precision})`;return`timestamp${a}${this.withTimezone?" with time zone":""}`}mapFromDriverValue(a){return"string"==typeof a?new Date(this.withTimezone?a:a+"+0000"):a}mapToDriverValue=a=>a.toISOString()}class co extends ci{static [aY]="PgTimestampStringBuilder";constructor(a,b,c){super(a,"string","PgTimestampString"),this.config.withTimezone=b,this.config.precision=c}build(a){return new cp(a,this.config)}}class cp extends bd{static [aY]="PgTimestampString";withTimezone;precision;constructor(a,b){super(a,b),this.withTimezone=b.withTimezone,this.precision=b.precision}getSQLType(){let a=void 0===this.precision?"":`(${this.precision})`;return`timestamp${a}${this.withTimezone?" with time zone":""}`}mapFromDriverValue(a){if("string"==typeof a)return a;let b=a.toISOString().slice(0,-1).replace("T"," ");if(this.withTimezone){let c=a.getTimezoneOffset();return`${b}${c<=0?"+":"-"}${Math.floor(Math.abs(c)/60).toString().padStart(2,"0")}`}return b}}function cq(a,b={}){let{name:c,config:d}=ca(a,b);return d?.mode==="string"?new co(c,d.withTimezone??!1,d.precision):new cm(c,d?.withTimezone??!1,d?.precision)}class cr extends ci{static [aY]="PgDateBuilder";constructor(a){super(a,"date","PgDate")}build(a){return new cs(a,this.config)}}class cs extends bd{static [aY]="PgDate";getSQLType(){return"date"}mapFromDriverValue(a){return"string"==typeof a?new Date(a):a}mapToDriverValue(a){return a.toISOString()}}class ct extends ci{static [aY]="PgDateStringBuilder";constructor(a){super(a,"string","PgDateString")}build(a){return new cu(a,this.config)}}class cu extends bd{static [aY]="PgDateString";getSQLType(){return"date"}mapFromDriverValue(a){return"string"==typeof a?a:a.toISOString().slice(0,-14)}}function cv(a,b){let{name:c,config:d}=ca(a,b);return d?.mode==="date"?new cr(c):new ct(c)}class cw extends bc{static [aY]="PgUUIDBuilder";constructor(a){super(a,"string","PgUUID")}defaultRandom(){return this.default(bJ`gen_random_uuid()`)}build(a){return new cx(a,this.config)}}class cx extends bd{static [aY]="PgUUID";getSQLType(){return"uuid"}}function cy(a){return new cw(a??"")}class cz extends bc{static [aY]="PgIntColumnBaseBuilder";generatedAlwaysAsIdentity(a){if(a){let{name:b,...c}=a;this.config.generatedIdentity={type:"always",sequenceName:b,sequenceOptions:c}}else this.config.generatedIdentity={type:"always"};return this.config.hasDefault=!0,this.config.notNull=!0,this}generatedByDefaultAsIdentity(a){if(a){let{name:b,...c}=a;this.config.generatedIdentity={type:"byDefault",sequenceName:b,sequenceOptions:c}}else this.config.generatedIdentity={type:"byDefault"};return this.config.hasDefault=!0,this.config.notNull=!0,this}}class cA extends cz{static [aY]="PgBigInt53Builder";constructor(a){super(a,"number","PgBigInt53")}build(a){return new cB(a,this.config)}}class cB extends bd{static [aY]="PgBigInt53";getSQLType(){return"bigint"}mapFromDriverValue(a){return"number"==typeof a?a:Number(a)}}class cC extends cz{static [aY]="PgBigInt64Builder";constructor(a){super(a,"bigint","PgBigInt64")}build(a){return new cD(a,this.config)}}class cD extends bd{static [aY]="PgBigInt64";getSQLType(){return"bigint"}mapFromDriverValue(a){return BigInt(a)}}function cE(a,b){let{name:c,config:d}=ca(a,b);return"number"===d.mode?new cA(c):new cC(c)}class cF extends bc{static [aY]="PgBigSerial53Builder";constructor(a){super(a,"number","PgBigSerial53"),this.config.hasDefault=!0,this.config.notNull=!0}build(a){return new cG(a,this.config)}}class cG extends bd{static [aY]="PgBigSerial53";getSQLType(){return"bigserial"}mapFromDriverValue(a){return"number"==typeof a?a:Number(a)}}class cH extends bc{static [aY]="PgBigSerial64Builder";constructor(a){super(a,"bigint","PgBigSerial64"),this.config.hasDefault=!0}build(a){return new cI(a,this.config)}}class cI extends bd{static [aY]="PgBigSerial64";getSQLType(){return"bigserial"}mapFromDriverValue(a){return BigInt(a)}}function cJ(a,b){let{name:c,config:d}=ca(a,b);return"number"===d.mode?new cF(c):new cH(c)}class cK extends bc{static [aY]="PgBooleanBuilder";constructor(a){super(a,"boolean","PgBoolean")}build(a){return new cL(a,this.config)}}class cL extends bd{static [aY]="PgBoolean";getSQLType(){return"boolean"}}function cM(a){return new cK(a??"")}class cN extends bc{static [aY]="PgCharBuilder";constructor(a,b){super(a,"string","PgChar"),this.config.length=b.length,this.config.enumValues=b.enum}build(a){return new cO(a,this.config)}}class cO extends bd{static [aY]="PgChar";length=this.config.length;enumValues=this.config.enumValues;getSQLType(){return void 0===this.length?"char":`char(${this.length})`}}function cP(a,b={}){let{name:c,config:d}=ca(a,b);return new cN(c,d)}class cQ extends bc{static [aY]="PgCidrBuilder";constructor(a){super(a,"string","PgCidr")}build(a){return new cR(a,this.config)}}class cR extends bd{static [aY]="PgCidr";getSQLType(){return"cidr"}}function cS(a){return new cQ(a??"")}class cT extends bc{static [aY]="PgCustomColumnBuilder";constructor(a,b,c){super(a,"custom","PgCustomColumn"),this.config.fieldConfig=b,this.config.customTypeParams=c}build(a){return new cU(a,this.config)}}class cU extends bd{static [aY]="PgCustomColumn";sqlName;mapTo;mapFrom;constructor(a,b){super(a,b),this.sqlName=b.customTypeParams.dataType(b.fieldConfig),this.mapTo=b.customTypeParams.toDriver,this.mapFrom=b.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(a){return"function"==typeof this.mapFrom?this.mapFrom(a):a}mapToDriverValue(a){return"function"==typeof this.mapTo?this.mapTo(a):a}}function cV(a){return(b,c)=>{let{name:d,config:e}=ca(b,c);return new cT(d,e,a)}}class cW extends bc{static [aY]="PgDoublePrecisionBuilder";constructor(a){super(a,"number","PgDoublePrecision")}build(a){return new cX(a,this.config)}}class cX extends bd{static [aY]="PgDoublePrecision";getSQLType(){return"double precision"}mapFromDriverValue(a){return"string"==typeof a?Number.parseFloat(a):a}}function cY(a){return new cW(a??"")}class cZ extends bc{static [aY]="PgInetBuilder";constructor(a){super(a,"string","PgInet")}build(a){return new c$(a,this.config)}}class c$ extends bd{static [aY]="PgInet";getSQLType(){return"inet"}}function c_(a){return new cZ(a??"")}class c0 extends cz{static [aY]="PgIntegerBuilder";constructor(a){super(a,"number","PgInteger")}build(a){return new c1(a,this.config)}}class c1 extends bd{static [aY]="PgInteger";getSQLType(){return"integer"}mapFromDriverValue(a){return"string"==typeof a?Number.parseInt(a):a}}function c2(a){return new c0(a??"")}class c3 extends bc{static [aY]="PgIntervalBuilder";constructor(a,b){super(a,"string","PgInterval"),this.config.intervalConfig=b}build(a){return new c4(a,this.config)}}class c4 extends bd{static [aY]="PgInterval";fields=this.config.intervalConfig.fields;precision=this.config.intervalConfig.precision;getSQLType(){let a=this.fields?` ${this.fields}`:"",b=this.precision?`(${this.precision})`:"";return`interval${a}${b}`}}function c5(a,b={}){let{name:c,config:d}=ca(a,b);return new c3(c,d)}class c6 extends bc{static [aY]="PgLineBuilder";constructor(a){super(a,"array","PgLine")}build(a){return new c7(a,this.config)}}class c7 extends bd{static [aY]="PgLine";getSQLType(){return"line"}mapFromDriverValue(a){let[b,c,d]=a.slice(1,-1).split(",");return[Number.parseFloat(b),Number.parseFloat(c),Number.parseFloat(d)]}mapToDriverValue(a){return`{${a[0]},${a[1]},${a[2]}}`}}class c8 extends bc{static [aY]="PgLineABCBuilder";constructor(a){super(a,"json","PgLineABC")}build(a){return new c9(a,this.config)}}class c9 extends bd{static [aY]="PgLineABC";getSQLType(){return"line"}mapFromDriverValue(a){let[b,c,d]=a.slice(1,-1).split(",");return{a:Number.parseFloat(b),b:Number.parseFloat(c),c:Number.parseFloat(d)}}mapToDriverValue(a){return`{${a.a},${a.b},${a.c}}`}}function da(a,b){let{name:c,config:d}=ca(a,b);return d?.mode&&"tuple"!==d.mode?new c8(c):new c6(c)}class db extends bc{static [aY]="PgMacaddrBuilder";constructor(a){super(a,"string","PgMacaddr")}build(a){return new dc(a,this.config)}}class dc extends bd{static [aY]="PgMacaddr";getSQLType(){return"macaddr"}}function dd(a){return new db(a??"")}class de extends bc{static [aY]="PgMacaddr8Builder";constructor(a){super(a,"string","PgMacaddr8")}build(a){return new df(a,this.config)}}class df extends bd{static [aY]="PgMacaddr8";getSQLType(){return"macaddr8"}}function dg(a){return new de(a??"")}class dh extends bc{static [aY]="PgPointTupleBuilder";constructor(a){super(a,"array","PgPointTuple")}build(a){return new di(a,this.config)}}class di extends bd{static [aY]="PgPointTuple";getSQLType(){return"point"}mapFromDriverValue(a){if("string"==typeof a){let[b,c]=a.slice(1,-1).split(",");return[Number.parseFloat(b),Number.parseFloat(c)]}return[a.x,a.y]}mapToDriverValue(a){return`(${a[0]},${a[1]})`}}class dj extends bc{static [aY]="PgPointObjectBuilder";constructor(a){super(a,"json","PgPointObject")}build(a){return new dk(a,this.config)}}class dk extends bd{static [aY]="PgPointObject";getSQLType(){return"point"}mapFromDriverValue(a){if("string"==typeof a){let[b,c]=a.slice(1,-1).split(",");return{x:Number.parseFloat(b),y:Number.parseFloat(c)}}return a}mapToDriverValue(a){return`(${a.x},${a.y})`}}function dl(a,b){let{name:c,config:d}=ca(a,b);return d?.mode&&"tuple"!==d.mode?new dj(c):new dh(c)}function dm(a,b){let c=new DataView(new ArrayBuffer(8));for(let d=0;d<8;d++)c.setUint8(d,a[b+d]);return c.getFloat64(0,!0)}function dn(a){let b=function(a){let b=[];for(let c=0;c<a.length;c+=2)b.push(Number.parseInt(a.slice(c,c+2),16));return new Uint8Array(b)}(a),c=0,d=b[0];c+=1;let e=new DataView(b.buffer),f=e.getUint32(c,1===d);if(c+=4,0x20000000&f&&(e.getUint32(c,1===d),c+=4),(65535&f)==1){let a=dm(b,c),d=dm(b,c+=8);return c+=8,[a,d]}throw Error("Unsupported geometry type")}class dp extends bc{static [aY]="PgGeometryBuilder";constructor(a){super(a,"array","PgGeometry")}build(a){return new dq(a,this.config)}}class dq extends bd{static [aY]="PgGeometry";getSQLType(){return"geometry(point)"}mapFromDriverValue(a){return dn(a)}mapToDriverValue(a){return`point(${a[0]} ${a[1]})`}}class dr extends bc{static [aY]="PgGeometryObjectBuilder";constructor(a){super(a,"json","PgGeometryObject")}build(a){return new ds(a,this.config)}}class ds extends bd{static [aY]="PgGeometryObject";getSQLType(){return"geometry(point)"}mapFromDriverValue(a){let b=dn(a);return{x:b[0],y:b[1]}}mapToDriverValue(a){return`point(${a.x} ${a.y})`}}function dt(a,b){let{name:c,config:d}=ca(a,b);return d?.mode&&"tuple"!==d.mode?new dr(c):new dp(c)}class du extends bc{static [aY]="PgRealBuilder";constructor(a,b){super(a,"number","PgReal"),this.config.length=b}build(a){return new dv(a,this.config)}}class dv extends bd{static [aY]="PgReal";constructor(a,b){super(a,b)}getSQLType(){return"real"}mapFromDriverValue=a=>"string"==typeof a?Number.parseFloat(a):a}function dw(a){return new du(a??"")}class dx extends bc{static [aY]="PgSerialBuilder";constructor(a){super(a,"number","PgSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(a){return new dy(a,this.config)}}class dy extends bd{static [aY]="PgSerial";getSQLType(){return"serial"}}function dz(a){return new dx(a??"")}class dA extends cz{static [aY]="PgSmallIntBuilder";constructor(a){super(a,"number","PgSmallInt")}build(a){return new dB(a,this.config)}}class dB extends bd{static [aY]="PgSmallInt";getSQLType(){return"smallint"}mapFromDriverValue=a=>"string"==typeof a?Number(a):a}function dC(a){return new dA(a??"")}class dD extends bc{static [aY]="PgSmallSerialBuilder";constructor(a){super(a,"number","PgSmallSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(a){return new dE(a,this.config)}}class dE extends bd{static [aY]="PgSmallSerial";getSQLType(){return"smallserial"}}function dF(a){return new dD(a??"")}class dG extends bc{static [aY]="PgTextBuilder";constructor(a,b){super(a,"string","PgText"),this.config.enumValues=b.enum}build(a){return new dH(a,this.config)}}class dH extends bd{static [aY]="PgText";enumValues=this.config.enumValues;getSQLType(){return"text"}}function dI(a,b={}){let{name:c,config:d}=ca(a,b);return new dG(c,d)}class dJ extends bc{static [aY]="PgVarcharBuilder";constructor(a,b){super(a,"string","PgVarchar"),this.config.length=b.length,this.config.enumValues=b.enum}build(a){return new dK(a,this.config)}}class dK extends bd{static [aY]="PgVarchar";length=this.config.length;enumValues=this.config.enumValues;getSQLType(){return void 0===this.length?"varchar":`varchar(${this.length})`}}function dL(a,b={}){let{name:c,config:d}=ca(a,b);return new dJ(c,d)}class dM extends bc{static [aY]="PgBinaryVectorBuilder";constructor(a,b){super(a,"string","PgBinaryVector"),this.config.dimensions=b.dimensions}build(a){return new dN(a,this.config)}}class dN extends bd{static [aY]="PgBinaryVector";dimensions=this.config.dimensions;getSQLType(){return`bit(${this.dimensions})`}}function dO(a,b){let{name:c,config:d}=ca(a,b);return new dM(c,d)}class dP extends bc{static [aY]="PgHalfVectorBuilder";constructor(a,b){super(a,"array","PgHalfVector"),this.config.dimensions=b.dimensions}build(a){return new dQ(a,this.config)}}class dQ extends bd{static [aY]="PgHalfVector";dimensions=this.config.dimensions;getSQLType(){return`halfvec(${this.dimensions})`}mapToDriverValue(a){return JSON.stringify(a)}mapFromDriverValue(a){return a.slice(1,-1).split(",").map(a=>Number.parseFloat(a))}}function dR(a,b){let{name:c,config:d}=ca(a,b);return new dP(c,d)}class dS extends bc{static [aY]="PgSparseVectorBuilder";constructor(a,b){super(a,"string","PgSparseVector"),this.config.dimensions=b.dimensions}build(a){return new dT(a,this.config)}}class dT extends bd{static [aY]="PgSparseVector";dimensions=this.config.dimensions;getSQLType(){return`sparsevec(${this.dimensions})`}}function dU(a,b){let{name:c,config:d}=ca(a,b);return new dS(c,d)}class dV extends bc{static [aY]="PgVectorBuilder";constructor(a,b){super(a,"array","PgVector"),this.config.dimensions=b.dimensions}build(a){return new dW(a,this.config)}}class dW extends bd{static [aY]="PgVector";dimensions=this.config.dimensions;getSQLType(){return`vector(${this.dimensions})`}mapToDriverValue(a){return JSON.stringify(a)}mapFromDriverValue(a){return a.slice(1,-1).split(",").map(a=>Number.parseFloat(a))}}function dX(a,b){let{name:c,config:d}=ca(a,b);return new dV(c,d)}let dY=Symbol.for("drizzle:PgInlineForeignKeys"),dZ=Symbol.for("drizzle:EnableRLS");class d$ extends bz{static [aY]="PgTable";static Symbol=Object.assign({},bz.Symbol,{InlineForeignKeys:dY,EnableRLS:dZ});[dY]=[];[dZ]=!1;[bz.Symbol.ExtraConfigBuilder]=void 0;[bz.Symbol.ExtraConfigColumns]={}}class d_{static [aY]="PgPrimaryKeyBuilder";columns;name;constructor(a,b){this.columns=a,this.name=b}build(a){return new d0(a,this.columns,this.name)}}class d0{constructor(a,b,c){this.table=a,this.columns=b,this.name=c}static [aY]="PgPrimaryKey";columns;name;getName(){return this.name??`${this.table[d$.Symbol.Name]}_${this.columns.map(a=>a.name).join("_")}_pk`}}function d1(a,b){return"object"!=typeof b||null===b||!("mapToDriverValue"in b)||"function"!=typeof b.mapToDriverValue||bC(a)||aZ(a,bI)||aZ(a,bK)||aZ(a,a1)||aZ(a,bz)||aZ(a,bN)?a:new bI(a,b)}let d2=(a,b)=>bJ`${a} = ${d1(b,a)}`,d3=(a,b)=>bJ`${a} <> ${d1(b,a)}`;function d4(...a){let b=a.filter(a=>void 0!==a);if(0!==b.length)return new bE(1===b.length?b:[new bD("("),bJ.join(b,new bD(" and ")),new bD(")")])}function d5(...a){let b=a.filter(a=>void 0!==a);if(0!==b.length)return new bE(1===b.length?b:[new bD("("),bJ.join(b,new bD(" or ")),new bD(")")])}function d6(a){return bJ`not ${a}`}let d7=(a,b)=>bJ`${a} > ${d1(b,a)}`,d8=(a,b)=>bJ`${a} >= ${d1(b,a)}`,d9=(a,b)=>bJ`${a} < ${d1(b,a)}`,ea=(a,b)=>bJ`${a} <= ${d1(b,a)}`;function eb(a,b){return Array.isArray(b)?0===b.length?bJ`false`:bJ`${a} in ${b.map(b=>d1(b,a))}`:bJ`${a} in ${d1(b,a)}`}function ec(a,b){return Array.isArray(b)?0===b.length?bJ`true`:bJ`${a} not in ${b.map(b=>d1(b,a))}`:bJ`${a} not in ${d1(b,a)}`}function ed(a){return bJ`${a} is null`}function ee(a){return bJ`${a} is not null`}function ef(a){return bJ`exists ${a}`}function eg(a){return bJ`not exists ${a}`}function eh(a,b,c){return bJ`${a} between ${d1(b,a)} and ${d1(c,a)}`}function ei(a,b,c){return bJ`${a} not between ${d1(b,a)} and ${d1(c,a)}`}function ej(a,b){return bJ`${a} like ${b}`}function ek(a,b){return bJ`${a} not like ${b}`}function el(a,b){return bJ`${a} ilike ${b}`}function em(a,b){return bJ`${a} not ilike ${b}`}function en(a){return bJ`${a} asc`}function eo(a){return bJ`${a} desc`}class ep{constructor(a,b,c){this.sourceTable=a,this.referencedTable=b,this.relationName=c,this.referencedTableName=b[bz.Symbol.Name]}static [aY]="Relation";referencedTableName;fieldName}class eq{constructor(a,b){this.table=a,this.config=b}static [aY]="Relations"}class er extends ep{constructor(a,b,c,d){super(a,b,c?.relationName),this.config=c,this.isNullable=d}static [aY]="One";withFieldName(a){let b=new er(this.sourceTable,this.referencedTable,this.config,this.isNullable);return b.fieldName=a,b}}class es extends ep{constructor(a,b,c){super(a,b,c?.relationName),this.config=c}static [aY]="Many";withFieldName(a){let b=new es(this.sourceTable,this.referencedTable,this.config);return b.fieldName=a,b}}function et(a){return{one:function(b,c){return new er(a,b,c,c?.fields.reduce((a,b)=>a&&b.notNull,!0)??!1)},many:function(b,c){return new es(a,b,c)}}}class eu extends bN{static [aY]="PgViewBase"}class ev{static [aY]="PgDialect";casing;constructor(a){this.casing=new bY(a?.casing)}async migrate(a,b,c){let d="string"==typeof c?"__drizzle_migrations":c.migrationsTable??"__drizzle_migrations",e="string"==typeof c?"drizzle":c.migrationsSchema??"drizzle",f=bJ`
			CREATE TABLE IF NOT EXISTS ${bJ.identifier(e)}.${bJ.identifier(d)} (
				id SERIAL PRIMARY KEY,
				hash text NOT NULL,
				created_at bigint
			)
		`;await b.execute(bJ`CREATE SCHEMA IF NOT EXISTS ${bJ.identifier(e)}`),await b.execute(f);let g=(await b.all(bJ`select id, hash, created_at from ${bJ.identifier(e)}.${bJ.identifier(d)} order by created_at desc limit 1`))[0];await b.transaction(async b=>{for await(let c of a)if(!g||Number(g.created_at)<c.folderMillis){for(let a of c.sql)await b.execute(bJ.raw(a));await b.execute(bJ`insert into ${bJ.identifier(e)}.${bJ.identifier(d)} ("hash", "created_at") values(${c.hash}, ${c.folderMillis})`)}})}escapeName(a){return`"${a}"`}escapeParam(a){return`$${a+1}`}escapeString(a){return`'${a.replace(/'/g,"''")}'`}buildWithCTE(a){if(!a?.length)return;let b=[bJ`with `];for(let[c,d]of a.entries())b.push(bJ`${bJ.identifier(d._.alias)} as (${d._.sql})`),c<a.length-1&&b.push(bJ`, `);return b.push(bJ` `),bJ.join(b)}buildDeleteQuery({table:a,where:b,returning:c,withList:d}){let e=this.buildWithCTE(d),f=c?bJ` returning ${this.buildSelection(c,{isSingleTable:!0})}`:void 0,g=b?bJ` where ${b}`:void 0;return bJ`${e}delete from ${a}${g}${f}`}buildUpdateSet(a,b){let c=a[bz.Symbol.Columns],d=Object.keys(c).filter(a=>void 0!==b[a]||c[a]?.onUpdateFn!==void 0),e=d.length;return bJ.join(d.flatMap((a,d)=>{let f=c[a],g=f.onUpdateFn?.(),h=b[a]??(aZ(g,bE)?g:bJ.param(g,f)),i=bJ`${bJ.identifier(this.casing.getColumnCasing(f))} = ${h}`;return d<e-1?[i,bJ.raw(", ")]:[i]}))}buildUpdateQuery({table:a,set:b,where:c,returning:d,withList:e,from:f,joins:g}){let h=this.buildWithCTE(e),i=a[d$.Symbol.Name],j=a[d$.Symbol.Schema],k=a[d$.Symbol.OriginalName],l=i===k?void 0:i,m=bJ`${j?bJ`${bJ.identifier(j)}.`:void 0}${bJ.identifier(k)}${l&&bJ` ${bJ.identifier(l)}`}`,n=this.buildUpdateSet(a,b),o=f&&bJ.join([bJ.raw(" from "),this.buildFromTable(f)]),p=this.buildJoins(g),q=d?bJ` returning ${this.buildSelection(d,{isSingleTable:!f})}`:void 0,r=c?bJ` where ${c}`:void 0;return bJ`${h}update ${m} set ${n}${o}${p}${r}${q}`}buildSelection(a,{isSingleTable:b=!1}={}){let c=a.length,d=a.flatMap(({field:a},d)=>{let e=[];if(aZ(a,bE.Aliased)&&a.isSelectionField)e.push(bJ.identifier(a.fieldAlias));else if(aZ(a,bE.Aliased)||aZ(a,bE)){let c=aZ(a,bE.Aliased)?a.sql:a;b?e.push(new bE(c.queryChunks.map(a=>aZ(a,bd)?bJ.identifier(this.casing.getColumnCasing(a)):a))):e.push(c),aZ(a,bE.Aliased)&&e.push(bJ` as ${bJ.identifier(a.fieldAlias)}`)}else if(aZ(a,a1))b?e.push(bJ.identifier(this.casing.getColumnCasing(a))):e.push(a);else if(aZ(a,bn)){let b=Object.entries(a._.selectedFields);if(1===b.length){let c=b[0][1],d=aZ(c,bE)?c.decoder:aZ(c,a1)?{mapFromDriverValue:a=>c.mapFromDriverValue(a)}:c.sql.decoder;d&&(a._.sql.decoder=d)}e.push(a)}return d<c-1&&e.push(bJ`, `),e});return bJ.join(d)}buildJoins(a){if(!a||0===a.length)return;let b=[];for(let[c,d]of a.entries()){0===c&&b.push(bJ` `);let e=d.table,f=d.lateral?bJ` lateral`:void 0,g=d.on?bJ` on ${d.on}`:void 0;if(aZ(e,d$)){let a=e[d$.Symbol.Name],c=e[d$.Symbol.Schema],h=e[d$.Symbol.OriginalName],i=a===h?void 0:d.alias;b.push(bJ`${bJ.raw(d.joinType)} join${f} ${c?bJ`${bJ.identifier(c)}.`:void 0}${bJ.identifier(h)}${i&&bJ` ${bJ.identifier(i)}`}${g}`)}else if(aZ(e,bN)){let a=e[bq].name,c=e[bq].schema,h=e[bq].originalName,i=a===h?void 0:d.alias;b.push(bJ`${bJ.raw(d.joinType)} join${f} ${c?bJ`${bJ.identifier(c)}.`:void 0}${bJ.identifier(h)}${i&&bJ` ${bJ.identifier(i)}`}${g}`)}else b.push(bJ`${bJ.raw(d.joinType)} join${f} ${e}${g}`);c<a.length-1&&b.push(bJ` `)}return bJ.join(b)}buildFromTable(a){if(aZ(a,bz)&&a[bz.Symbol.IsAlias]){let b=bJ`${bJ.identifier(a[bz.Symbol.OriginalName])}`;return a[bz.Symbol.Schema]&&(b=bJ`${bJ.identifier(a[bz.Symbol.Schema])}.${b}`),bJ`${b} ${bJ.identifier(a[bz.Symbol.Name])}`}return a}buildSelectQuery({withList:a,fields:b,fieldsFlat:c,where:d,having:e,table:f,joins:g,orderBy:h,groupBy:i,limit:j,offset:k,lockingClause:l,distinct:m,setOperators:n}){let o,p,q,r=c??b6(b);for(let a of r){let b;if(aZ(a.field,a1)&&a.field.table[a3]!==(aZ(f,bn)?f._.alias:aZ(f,eu)?f[bq].name:aZ(f,bE)?void 0:f[a3])&&(b=a.field.table,!g?.some(({alias:a})=>a===(b[bz.Symbol.IsAlias]?b[a3]:b[bz.Symbol.BaseName])))){let b=a.field.table[a3];throw Error(`Your "${a.path.join("->")}" field references a column "${b}"."${a.field.name}", but the table "${b}" is not part of the query! Did you forget to join it?`)}}let s=!g||0===g.length,t=this.buildWithCTE(a);m&&(o=!0===m?bJ` distinct`:bJ` distinct on (${bJ.join(m.on,bJ`, `)})`);let u=this.buildSelection(r,{isSingleTable:s}),v=this.buildFromTable(f),w=this.buildJoins(g),x=d?bJ` where ${d}`:void 0,y=e?bJ` having ${e}`:void 0;h&&h.length>0&&(p=bJ` order by ${bJ.join(h,bJ`, `)}`),i&&i.length>0&&(q=bJ` group by ${bJ.join(i,bJ`, `)}`);let z="object"==typeof j||"number"==typeof j&&j>=0?bJ` limit ${j}`:void 0,A=k?bJ` offset ${k}`:void 0,B=bJ.empty();if(l){let a=bJ` for ${bJ.raw(l.strength)}`;l.config.of&&a.append(bJ` of ${bJ.join(Array.isArray(l.config.of)?l.config.of:[l.config.of],bJ`, `)}`),l.config.noWait?a.append(bJ` nowait`):l.config.skipLocked&&a.append(bJ` skip locked`),B.append(a)}let C=bJ`${t}select${o} ${u} from ${v}${w}${x}${q}${y}${p}${z}${A}${B}`;return n.length>0?this.buildSetOperations(C,n):C}buildSetOperations(a,b){let[c,...d]=b;if(!c)throw Error("Cannot pass undefined values to any set operator");return 0===d.length?this.buildSetOperationQuery({leftSelect:a,setOperator:c}):this.buildSetOperations(this.buildSetOperationQuery({leftSelect:a,setOperator:c}),d)}buildSetOperationQuery({leftSelect:a,setOperator:{type:b,isAll:c,rightSelect:d,limit:e,orderBy:f,offset:g}}){let h,i=bJ`(${a.getSQL()}) `,j=bJ`(${d.getSQL()})`;if(f&&f.length>0){let a=[];for(let b of f)if(aZ(b,bd))a.push(bJ.identifier(b.name));else if(aZ(b,bE)){for(let a=0;a<b.queryChunks.length;a++){let c=b.queryChunks[a];aZ(c,bd)&&(b.queryChunks[a]=bJ.identifier(c.name))}a.push(bJ`${b}`)}else a.push(bJ`${b}`);h=bJ` order by ${bJ.join(a,bJ`, `)} `}let k="object"==typeof e||"number"==typeof e&&e>=0?bJ` limit ${e}`:void 0,l=bJ.raw(`${b} ${c?"all ":""}`),m=g?bJ` offset ${g}`:void 0;return bJ`${i}${l}${j}${h}${k}${m}`}buildInsertQuery({table:a,values:b,onConflict:c,returning:d,withList:e,select:f,overridingSystemValue_:g}){let h=[],i=Object.entries(a[bz.Symbol.Columns]).filter(([a,b])=>!b.shouldDisableInsert()),j=i.map(([,a])=>bJ.identifier(this.casing.getColumnCasing(a)));if(f)aZ(b,bE)?h.push(b):h.push(b.getSQL());else for(let[a,c]of(h.push(bJ.raw("values ")),b.entries())){let d=[];for(let[a,b]of i){let e=c[a];if(void 0===e||aZ(e,bI)&&void 0===e.value)if(void 0!==b.defaultFn){let a=b.defaultFn(),c=aZ(a,bE)?a:bJ.param(a,b);d.push(c)}else if(b.default||void 0===b.onUpdateFn)d.push(bJ`default`);else{let a=b.onUpdateFn(),c=aZ(a,bE)?a:bJ.param(a,b);d.push(c)}else d.push(e)}h.push(d),a<b.length-1&&h.push(bJ`, `)}let k=this.buildWithCTE(e),l=bJ.join(h),m=d?bJ` returning ${this.buildSelection(d,{isSingleTable:!0})}`:void 0,n=c?bJ` on conflict ${c}`:void 0,o=!0===g?bJ`overriding system value `:void 0;return bJ`${k}insert into ${a} ${j} ${o}${l}${n}${m}`}buildRefreshMaterializedViewQuery({view:a,concurrently:b,withNoData:c}){let d=b?bJ` concurrently`:void 0,e=c?bJ` with no data`:void 0;return bJ`refresh materialized view${d} ${a}${e}`}prepareTyping(a){if(aZ(a,b1)||aZ(a,b4))return"json";if(aZ(a,cc))return"decimal";if(aZ(a,ck))return"time";if(aZ(a,cn)||aZ(a,cp))return"timestamp";if(aZ(a,cs)||aZ(a,cu))return"date";else if(aZ(a,cx))return"uuid";else return"none"}sqlToQuery(a,b){return a.toQuery({casing:this.casing,escapeName:this.escapeName,escapeParam:this.escapeParam,escapeString:this.escapeString,prepareTyping:this.prepareTyping,invokeSource:b})}buildRelationalQueryWithoutPK({fullSchema:a,schema:b,tableNamesMap:c,table:d,tableConfig:e,queryConfig:f,tableAlias:g,nestedQueryRelation:h,joinOn:i}){let j,k=[],l,m,n=[],o,p=[];if(!0===f)k=Object.entries(e.columns).map(([a,b])=>({dbKey:b.name,tsKey:a,field:bS(b,g),relationTableTsKey:void 0,isJson:!1,selection:[]}));else{let d=Object.fromEntries(Object.entries(e.columns).map(([a,b])=>[a,bS(b,g)]));if(f.where){let a="function"==typeof f.where?f.where(d,{and:d4,between:eh,eq:d2,exists:ef,gt:d7,gte:d8,ilike:el,inArray:eb,isNull:ed,isNotNull:ee,like:ej,lt:d9,lte:ea,ne:d3,not:d6,notBetween:ei,notExists:eg,notLike:ek,notIlike:em,notInArray:ec,or:d5,sql:bJ}):f.where;o=a&&bU(a,g)}let h=[],i=[];if(f.columns){let a=!1;for(let[b,c]of Object.entries(f.columns))void 0!==c&&b in e.columns&&(a||!0!==c||(a=!0),i.push(b));i.length>0&&(i=a?i.filter(a=>f.columns?.[a]===!0):Object.keys(e.columns).filter(a=>!i.includes(a)))}else i=Object.keys(e.columns);for(let a of i){let b=e.columns[a];h.push({tsKey:a,value:b})}let j=[];if(f.with&&(j=Object.entries(f.with).filter(a=>!!a[1]).map(([a,b])=>({tsKey:a,queryConfig:b,relation:e.relations[a]}))),f.extras)for(let[a,b]of Object.entries("function"==typeof f.extras?f.extras(d,{sql:bJ}):f.extras))h.push({tsKey:a,value:bT(b,g)});for(let{tsKey:a,value:b}of h)k.push({dbKey:aZ(b,bE.Aliased)?b.fieldAlias:e.columns[a].name,tsKey:a,field:aZ(b,a1)?bS(b,g):b,relationTableTsKey:void 0,isJson:!1,selection:[]});let q="function"==typeof f.orderBy?f.orderBy(d,{sql:bJ,asc:en,desc:eo}):f.orderBy??[];for(let{tsKey:d,queryConfig:e,relation:h}of(Array.isArray(q)||(q=[q]),n=q.map(a=>aZ(a,a1)?bS(a,g):bU(a,g)),l=f.limit,m=f.offset,j)){let f=function(a,b,c){if(aZ(c,er)&&c.config)return{fields:c.config.fields,references:c.config.references};let d=b[bA(c.referencedTable)];if(!d)throw Error(`Table "${c.referencedTable[bz.Symbol.Name]}" not found in schema`);let e=a[d];if(!e)throw Error(`Table "${d}" not found in schema`);let f=c.sourceTable,g=b[bA(f)];if(!g)throw Error(`Table "${f[bz.Symbol.Name]}" not found in schema`);let h=[];for(let a of Object.values(e.relations))(c.relationName&&c!==a&&a.relationName===c.relationName||!c.relationName&&a.referencedTable===c.sourceTable)&&h.push(a);if(h.length>1)throw c.relationName?Error(`There are multiple relations with name "${c.relationName}" in table "${d}"`):Error(`There are multiple relations between "${d}" and "${c.sourceTable[bz.Symbol.Name]}". Please specify relation name`);if(h[0]&&aZ(h[0],er)&&h[0].config)return{fields:h[0].config.references,references:h[0].config.fields};throw Error(`There is not enough information to infer relation "${g}.${c.fieldName}"`)}(b,c,h),i=c[bA(h.referencedTable)],j=`${g}_${d}`,l=d4(...f.fields.map((a,b)=>d2(bS(f.references[b],j),bS(a,g)))),m=this.buildRelationalQueryWithoutPK({fullSchema:a,schema:b,tableNamesMap:c,table:a[i],tableConfig:b[i],queryConfig:aZ(h,er)?!0===e?{limit:1}:{...e,limit:1}:e,tableAlias:j,joinOn:l,nestedQueryRelation:h}),n=bJ`${bJ.identifier(j)}.${bJ.identifier("data")}`.as(d);p.push({on:bJ`true`,table:new bn(m.sql,{},j),alias:j,joinType:"left",lateral:!0}),k.push({dbKey:d,tsKey:d,field:n,relationTableTsKey:i,isJson:!0,selection:m.selection})}}if(0===k.length)throw new bZ({message:`No fields selected for table "${e.tsName}" ("${g}")`});if(o=d4(i,o),h){let a=bJ`json_build_array(${bJ.join(k.map(({field:a,tsKey:b,isJson:c})=>c?bJ`${bJ.identifier(`${g}_${b}`)}.${bJ.identifier("data")}`:aZ(a,bE.Aliased)?a.sql:a),bJ`, `)})`;aZ(h,es)&&(a=bJ`coalesce(json_agg(${a}${n.length>0?bJ` order by ${bJ.join(n,bJ`, `)}`:void 0}), '[]'::json)`);let b=[{dbKey:"data",tsKey:"data",field:a.as("data"),isJson:!0,relationTableTsKey:e.tsName,selection:k}];void 0!==l||void 0!==m||n.length>0?(j=this.buildSelectQuery({table:bR(d,g),fields:{},fieldsFlat:[{path:[],field:bJ.raw("*")}],where:o,limit:l,offset:m,orderBy:n,setOperators:[]}),o=void 0,l=void 0,m=void 0,n=[]):j=bR(d,g),j=this.buildSelectQuery({table:aZ(j,d$)?j:new bn(j,{},g),fields:{},fieldsFlat:b.map(({field:a})=>({path:[],field:aZ(a,a1)?bS(a,g):a})),joins:p,where:o,limit:l,offset:m,orderBy:n,setOperators:[]})}else j=this.buildSelectQuery({table:bR(d,g),fields:{},fieldsFlat:k.map(({field:a})=>({path:[],field:aZ(a,a1)?bS(a,g):a})),joins:p,where:o,limit:l,offset:m,orderBy:n,setOperators:[]});return{tableTsKey:e.tsName,sql:j,selection:k}}}class ew{static [aY]="SelectionProxyHandler";config;constructor(a){this.config={...a}}get(a,b){if("_"===b)return{...a._,selectedFields:new Proxy(a._.selectedFields,this)};if(b===bq)return{...a[bq],selectedFields:new Proxy(a[bq].selectedFields,this)};if("symbol"==typeof b)return a[b];let c=(aZ(a,bn)?a._.selectedFields:aZ(a,bN)?a[bq].selectedFields:a)[b];if(aZ(c,bE.Aliased)){if("sql"===this.config.sqlAliasedBehavior&&!c.isSelectionField)return c.sql;let a=c.clone();return a.isSelectionField=!0,a}if(aZ(c,bE)){if("sql"===this.config.sqlBehavior)return c;throw Error(`You tried to reference "${b}" field from a subquery, which is a raw SQL field, but it doesn't have an alias declared. Please add an alias to the field using ".as('alias')" method.`)}return aZ(c,a1)?this.config.alias?new Proxy(c,new bO(new Proxy(c.table,new bP(this.config.alias,this.config.replaceOriginalName??!1)))):c:"object"!=typeof c||null===c?c:new Proxy(c,new ew(this.config))}}class ex{static [aY]="TypedQueryBuilder";getSelectedFields(){return this._.selectedFields}}class ey{static [aY]="QueryPromise";[Symbol.toStringTag]="QueryPromise";catch(a){return this.then(void 0,a)}finally(a){return this.then(b=>(a?.(),b),b=>{throw a?.(),b})}then(a,b){return this.execute().then(a,b)}}function ez(a){return aZ(a,d$)?[a[br]?`${a[br]}.${a[bz.Symbol.BaseName]}`:a[bz.Symbol.BaseName]]:aZ(a,bn)?a._.usedTables??[]:aZ(a,bE)?a.usedTables??[]:[]}class eA{static [aY]="PgSelectBuilder";fields;session;dialect;withList=[];distinct;constructor(a){this.fields=a.fields,this.session=a.session,this.dialect=a.dialect,a.withList&&(this.withList=a.withList),this.distinct=a.distinct}authToken;setToken(a){return this.authToken=a,this}from(a){let b,c=!!this.fields;return b=this.fields?this.fields:aZ(a,bn)?Object.fromEntries(Object.keys(a._.selectedFields).map(b=>[b,a[b]])):aZ(a,eu)?a[bq].selectedFields:aZ(a,bE)?{}:a[bz.Symbol.Columns],new eC({table:a,fields:b,isPartialSelect:c,session:this.session,dialect:this.dialect,withList:this.withList,distinct:this.distinct}).setToken(this.authToken)}}class eB extends ex{static [aY]="PgSelectQueryBuilder";_;config;joinsNotNullableMap;tableName;isPartialSelect;session;dialect;cacheConfig=void 0;usedTables=new Set;constructor({table:a,fields:b,isPartialSelect:c,session:d,dialect:e,withList:f,distinct:g}){for(let h of(super(),this.config={withList:f,table:a,fields:{...b},distinct:g,setOperators:[]},this.isPartialSelect=c,this.session=d,this.dialect=e,this._={selectedFields:b,config:this.config},this.tableName=b9(a),this.joinsNotNullableMap="string"==typeof this.tableName?{[this.tableName]:!0}:{},ez(a)))this.usedTables.add(h)}getUsedTables(){return[...this.usedTables]}createJoin(a,b){return(c,d)=>{let e=this.tableName,f=b9(c);for(let a of ez(c))this.usedTables.add(a);if("string"==typeof f&&this.config.joins?.some(a=>a.alias===f))throw Error(`Alias "${f}" is already used in this query`);if(!this.isPartialSelect&&(1===Object.keys(this.joinsNotNullableMap).length&&"string"==typeof e&&(this.config.fields={[e]:this.config.fields}),"string"==typeof f&&!aZ(c,bE))){let a=aZ(c,bn)?c._.selectedFields:aZ(c,bN)?c[bq].selectedFields:c[bz.Symbol.Columns];this.config.fields[f]=a}if("function"==typeof d&&(d=d(new Proxy(this.config.fields,new ew({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.joins||(this.config.joins=[]),this.config.joins.push({on:d,table:c,joinType:a,alias:f,lateral:b}),"string"==typeof f)switch(a){case"left":this.joinsNotNullableMap[f]=!1;break;case"right":this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([a])=>[a,!1])),this.joinsNotNullableMap[f]=!0;break;case"cross":case"inner":this.joinsNotNullableMap[f]=!0;break;case"full":this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([a])=>[a,!1])),this.joinsNotNullableMap[f]=!1}return this}}leftJoin=this.createJoin("left",!1);leftJoinLateral=this.createJoin("left",!0);rightJoin=this.createJoin("right",!1);innerJoin=this.createJoin("inner",!1);innerJoinLateral=this.createJoin("inner",!0);fullJoin=this.createJoin("full",!1);crossJoin=this.createJoin("cross",!1);crossJoinLateral=this.createJoin("cross",!0);createSetOperator(a,b){return c=>{let d="function"==typeof c?c(eE()):c;if(!b7(this.getSelectedFields(),d.getSelectedFields()))throw Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return this.config.setOperators.push({type:a,isAll:b,rightSelect:d}),this}}union=this.createSetOperator("union",!1);unionAll=this.createSetOperator("union",!0);intersect=this.createSetOperator("intersect",!1);intersectAll=this.createSetOperator("intersect",!0);except=this.createSetOperator("except",!1);exceptAll=this.createSetOperator("except",!0);addSetOperators(a){return this.config.setOperators.push(...a),this}where(a){return"function"==typeof a&&(a=a(new Proxy(this.config.fields,new ew({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.where=a,this}having(a){return"function"==typeof a&&(a=a(new Proxy(this.config.fields,new ew({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.having=a,this}groupBy(...a){if("function"==typeof a[0]){let b=a[0](new Proxy(this.config.fields,new ew({sqlAliasedBehavior:"alias",sqlBehavior:"sql"})));this.config.groupBy=Array.isArray(b)?b:[b]}else this.config.groupBy=a;return this}orderBy(...a){if("function"==typeof a[0]){let b=a[0](new Proxy(this.config.fields,new ew({sqlAliasedBehavior:"alias",sqlBehavior:"sql"}))),c=Array.isArray(b)?b:[b];this.config.setOperators.length>0?this.config.setOperators.at(-1).orderBy=c:this.config.orderBy=c}else this.config.setOperators.length>0?this.config.setOperators.at(-1).orderBy=a:this.config.orderBy=a;return this}limit(a){return this.config.setOperators.length>0?this.config.setOperators.at(-1).limit=a:this.config.limit=a,this}offset(a){return this.config.setOperators.length>0?this.config.setOperators.at(-1).offset=a:this.config.offset=a,this}for(a,b={}){return this.config.lockingClause={strength:a,config:b},this}getSQL(){return this.dialect.buildSelectQuery(this.config)}toSQL(){let{typings:a,...b}=this.dialect.sqlToQuery(this.getSQL());return b}as(a){let b=[];if(b.push(...ez(this.config.table)),this.config.joins)for(let a of this.config.joins)b.push(...ez(a.table));return new Proxy(new bn(this.getSQL(),this.config.fields,a,!1,[...new Set(b)]),new ew({alias:a,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}getSelectedFields(){return new Proxy(this.config.fields,new ew({alias:this.tableName,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}$dynamic(){return this}$withCache(a){return this.cacheConfig=void 0===a?{config:{},enable:!0,autoInvalidate:!0}:!1===a?{enable:!1}:{enable:!0,autoInvalidate:!0,...a},this}}class eC extends eB{static [aY]="PgSelect";_prepare(a){let{session:b,config:c,dialect:d,joinsNotNullableMap:e,authToken:f,cacheConfig:g,usedTables:h}=this;if(!b)throw Error("Cannot execute a query on a query builder. Please use a database instance instead.");let{fields:i}=c;return bp.startActiveSpan("drizzle.prepareQuery",()=>{let c=b6(i),j=b.prepareQuery(d.sqlToQuery(this.getSQL()),c,a,!0,void 0,{type:"select",tables:[...h]},g);return j.joinsNotNullableMap=e,j.setToken(f)})}prepare(a){return this._prepare(a)}authToken;setToken(a){return this.authToken=a,this}execute=a=>bp.startActiveSpan("drizzle.operation",()=>this._prepare().execute(a,this.authToken))}for(let a of[ey])for(let b of Object.getOwnPropertyNames(a.prototype))"constructor"!==b&&Object.defineProperty(eC.prototype,b,Object.getOwnPropertyDescriptor(a.prototype,b)||Object.create(null));function eD(a,b){return(c,d,...e)=>{let f=[d,...e].map(c=>({type:a,isAll:b,rightSelect:c}));for(let a of f)if(!b7(c.getSelectedFields(),a.rightSelect.getSelectedFields()))throw Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return c.addSetOperators(f)}}let eE=()=>({union:eF,unionAll:eG,intersect:eH,intersectAll:eI,except:eJ,exceptAll:eK}),eF=eD("union",!1),eG=eD("union",!0),eH=eD("intersect",!1),eI=eD("intersect",!0),eJ=eD("except",!1),eK=eD("except",!0);class eL{static [aY]="PgQueryBuilder";dialect;dialectConfig;constructor(a){this.dialect=aZ(a,ev)?a:void 0,this.dialectConfig=aZ(a,ev)?void 0:a}$with=(a,b)=>{let c=this;return{as:d=>("function"==typeof d&&(d=d(c)),new Proxy(new bo(d.getSQL(),b??("getSelectedFields"in d?d.getSelectedFields()??{}:{}),a,!0),new ew({alias:a,sqlAliasedBehavior:"alias",sqlBehavior:"error"})))}};with(...a){let b=this;return{select:function(c){return new eA({fields:c??void 0,session:void 0,dialect:b.getDialect(),withList:a})},selectDistinct:function(a){return new eA({fields:a??void 0,session:void 0,dialect:b.getDialect(),distinct:!0})},selectDistinctOn:function(a,c){return new eA({fields:c??void 0,session:void 0,dialect:b.getDialect(),distinct:{on:a}})}}}select(a){return new eA({fields:a??void 0,session:void 0,dialect:this.getDialect()})}selectDistinct(a){return new eA({fields:a??void 0,session:void 0,dialect:this.getDialect(),distinct:!0})}selectDistinctOn(a,b){return new eA({fields:b??void 0,session:void 0,dialect:this.getDialect(),distinct:{on:a}})}getDialect(){return this.dialect||(this.dialect=new ev(this.dialectConfig)),this.dialect}}class eM{constructor(a,b,c,d){this.table=a,this.session=b,this.dialect=c,this.withList=d}static [aY]="PgUpdateBuilder";authToken;setToken(a){return this.authToken=a,this}set(a){return new eN(this.table,b8(this.table,a),this.session,this.dialect,this.withList).setToken(this.authToken)}}class eN extends ey{constructor(a,b,c,d,e){super(),this.session=c,this.dialect=d,this.config={set:b,table:a,withList:e,joins:[]},this.tableName=b9(a),this.joinsNotNullableMap="string"==typeof this.tableName?{[this.tableName]:!0}:{}}static [aY]="PgUpdate";config;tableName;joinsNotNullableMap;cacheConfig;from(a){let b=b9(a);return"string"==typeof b&&(this.joinsNotNullableMap[b]=!0),this.config.from=a,this}getTableLikeFields(a){return aZ(a,d$)?a[bz.Symbol.Columns]:aZ(a,bn)?a._.selectedFields:a[bq].selectedFields}createJoin(a){return(b,c)=>{let d=b9(b);if("string"==typeof d&&this.config.joins.some(a=>a.alias===d))throw Error(`Alias "${d}" is already used in this query`);if("function"==typeof c){let a=this.config.from&&!aZ(this.config.from,bE)?this.getTableLikeFields(this.config.from):void 0;c=c(new Proxy(this.config.table[bz.Symbol.Columns],new ew({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})),a&&new Proxy(a,new ew({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))}if(this.config.joins.push({on:c,table:b,joinType:a,alias:d}),"string"==typeof d)switch(a){case"left":this.joinsNotNullableMap[d]=!1;break;case"right":this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([a])=>[a,!1])),this.joinsNotNullableMap[d]=!0;break;case"inner":this.joinsNotNullableMap[d]=!0;break;case"full":this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([a])=>[a,!1])),this.joinsNotNullableMap[d]=!1}return this}}leftJoin=this.createJoin("left");rightJoin=this.createJoin("right");innerJoin=this.createJoin("inner");fullJoin=this.createJoin("full");where(a){return this.config.where=a,this}returning(a){if(!a&&(a=Object.assign({},this.config.table[bz.Symbol.Columns]),this.config.from)){let b=b9(this.config.from);if("string"==typeof b&&this.config.from&&!aZ(this.config.from,bE)){let c=this.getTableLikeFields(this.config.from);a[b]=c}for(let b of this.config.joins){let c=b9(b.table);if("string"==typeof c&&!aZ(b.table,bE)){let d=this.getTableLikeFields(b.table);a[c]=d}}}return this.config.returningFields=a,this.config.returning=b6(a),this}getSQL(){return this.dialect.buildUpdateQuery(this.config)}toSQL(){let{typings:a,...b}=this.dialect.sqlToQuery(this.getSQL());return b}_prepare(a){let b=this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning,a,!0,void 0,{type:"insert",tables:ez(this.config.table)},this.cacheConfig);return b.joinsNotNullableMap=this.joinsNotNullableMap,b}prepare(a){return this._prepare(a)}authToken;setToken(a){return this.authToken=a,this}execute=a=>this._prepare().execute(a,this.authToken);getSelectedFields(){return this.config.returningFields?new Proxy(this.config.returningFields,new ew({alias:this.config.table[a3],sqlAliasedBehavior:"alias",sqlBehavior:"error"})):void 0}$dynamic(){return this}}class eO{constructor(a,b,c,d,e){this.table=a,this.session=b,this.dialect=c,this.withList=d,this.overridingSystemValue_=e}static [aY]="PgInsertBuilder";authToken;setToken(a){return this.authToken=a,this}overridingSystemValue(){return this.overridingSystemValue_=!0,this}values(a){if(0===(a=Array.isArray(a)?a:[a]).length)throw Error("values() must be called with at least one value");let b=a.map(a=>{let b={},c=this.table[bz.Symbol.Columns];for(let d of Object.keys(a)){let e=a[d];b[d]=aZ(e,bE)?e:new bI(e,c[d])}return b});return new eP(this.table,b,this.session,this.dialect,this.withList,!1,this.overridingSystemValue_).setToken(this.authToken)}select(a){let b="function"==typeof a?a(new eL):a;if(!aZ(b,bE)&&!b7(this.table[bs],b._.selectedFields))throw Error("Insert select error: selected fields are not the same or are in a different order compared to the table definition");return new eP(this.table,b,this.session,this.dialect,this.withList,!0)}}class eP extends ey{constructor(a,b,c,d,e,f,g){super(),this.session=c,this.dialect=d,this.config={table:a,values:b,withList:e,select:f,overridingSystemValue_:g}}static [aY]="PgInsert";config;cacheConfig;returning(a=this.config.table[bz.Symbol.Columns]){return this.config.returningFields=a,this.config.returning=b6(a),this}onConflictDoNothing(a={}){if(void 0===a.target)this.config.onConflict=bJ`do nothing`;else{let b="";b=Array.isArray(a.target)?a.target.map(a=>this.dialect.escapeName(this.dialect.casing.getColumnCasing(a))).join(","):this.dialect.escapeName(this.dialect.casing.getColumnCasing(a.target));let c=a.where?bJ` where ${a.where}`:void 0;this.config.onConflict=bJ`(${bJ.raw(b)})${c} do nothing`}return this}onConflictDoUpdate(a){if(a.where&&(a.targetWhere||a.setWhere))throw Error('You cannot use both "where" and "targetWhere"/"setWhere" at the same time - "where" is deprecated, use "targetWhere" or "setWhere" instead.');let b=a.where?bJ` where ${a.where}`:void 0,c=a.targetWhere?bJ` where ${a.targetWhere}`:void 0,d=a.setWhere?bJ` where ${a.setWhere}`:void 0,e=this.dialect.buildUpdateSet(this.config.table,b8(this.config.table,a.set)),f="";return f=Array.isArray(a.target)?a.target.map(a=>this.dialect.escapeName(this.dialect.casing.getColumnCasing(a))).join(","):this.dialect.escapeName(this.dialect.casing.getColumnCasing(a.target)),this.config.onConflict=bJ`(${bJ.raw(f)})${c} do update set ${e}${b}${d}`,this}getSQL(){return this.dialect.buildInsertQuery(this.config)}toSQL(){let{typings:a,...b}=this.dialect.sqlToQuery(this.getSQL());return b}_prepare(a){return bp.startActiveSpan("drizzle.prepareQuery",()=>this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning,a,!0,void 0,{type:"insert",tables:ez(this.config.table)},this.cacheConfig))}prepare(a){return this._prepare(a)}authToken;setToken(a){return this.authToken=a,this}execute=a=>bp.startActiveSpan("drizzle.operation",()=>this._prepare().execute(a,this.authToken));getSelectedFields(){return this.config.returningFields?new Proxy(this.config.returningFields,new ew({alias:this.config.table[a3],sqlAliasedBehavior:"alias",sqlBehavior:"error"})):void 0}$dynamic(){return this}}class eQ extends ey{constructor(a,b,c,d){super(),this.session=b,this.dialect=c,this.config={table:a,withList:d}}static [aY]="PgDelete";config;cacheConfig;where(a){return this.config.where=a,this}returning(a=this.config.table[bz.Symbol.Columns]){return this.config.returningFields=a,this.config.returning=b6(a),this}getSQL(){return this.dialect.buildDeleteQuery(this.config)}toSQL(){let{typings:a,...b}=this.dialect.sqlToQuery(this.getSQL());return b}_prepare(a){return bp.startActiveSpan("drizzle.prepareQuery",()=>this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning,a,!0,void 0,{type:"delete",tables:ez(this.config.table)},this.cacheConfig))}prepare(a){return this._prepare(a)}authToken;setToken(a){return this.authToken=a,this}execute=a=>bp.startActiveSpan("drizzle.operation",()=>this._prepare().execute(a,this.authToken));getSelectedFields(){return this.config.returningFields?new Proxy(this.config.returningFields,new ew({alias:this.config.table[a3],sqlAliasedBehavior:"alias",sqlBehavior:"error"})):void 0}$dynamic(){return this}}class eR extends bE{constructor(a){super(eR.buildEmbeddedCount(a.source,a.filters).queryChunks),this.params=a,this.mapWith(Number),this.session=a.session,this.sql=eR.buildCount(a.source,a.filters)}sql;token;static [aY]="PgCountBuilder";[Symbol.toStringTag]="PgCountBuilder";session;static buildEmbeddedCount(a,b){return bJ`(select count(*) from ${a}${bJ.raw(" where ").if(b)}${b})`}static buildCount(a,b){return bJ`select count(*) as count from ${a}${bJ.raw(" where ").if(b)}${b};`}setToken(a){return this.token=a,this}then(a,b){return Promise.resolve(this.session.count(this.sql,this.token)).then(a,b)}catch(a){return this.then(void 0,a)}finally(a){return this.then(b=>(a?.(),b),b=>{throw a?.(),b})}}class eS{constructor(a,b,c,d,e,f,g){this.fullSchema=a,this.schema=b,this.tableNamesMap=c,this.table=d,this.tableConfig=e,this.dialect=f,this.session=g}static [aY]="PgRelationalQueryBuilder";findMany(a){return new eT(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,a||{},"many")}findFirst(a){return new eT(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,a?{...a,limit:1}:{limit:1},"first")}}class eT extends ey{constructor(a,b,c,d,e,f,g,h,i){super(),this.fullSchema=a,this.schema=b,this.tableNamesMap=c,this.table=d,this.tableConfig=e,this.dialect=f,this.session=g,this.config=h,this.mode=i}static [aY]="PgRelationalQuery";_prepare(a){return bp.startActiveSpan("drizzle.prepareQuery",()=>{let{query:b,builtQuery:c}=this._toSQL();return this.session.prepareQuery(c,void 0,a,!0,(a,c)=>{let d=a.map(a=>(function a(b,c,d,e,f=a=>a){let g={};for(let[h,i]of e.entries())if(i.isJson){let e=c.relations[i.tsKey],j=d[h],k="string"==typeof j?JSON.parse(j):j;g[i.tsKey]=aZ(e,er)?k&&a(b,b[i.relationTableTsKey],k,i.selection,f):k.map(c=>a(b,b[i.relationTableTsKey],c,i.selection,f))}else{let a,b=f(d[h]),c=i.field;a=aZ(c,a1)?c:aZ(c,bE)?c.decoder:c.sql.decoder,g[i.tsKey]=null===b?null:a.mapFromDriverValue(b)}return g})(this.schema,this.tableConfig,a,b.selection,c));return"first"===this.mode?d[0]:d})})}prepare(a){return this._prepare(a)}_getQuery(){return this.dialect.buildRelationalQueryWithoutPK({fullSchema:this.fullSchema,schema:this.schema,tableNamesMap:this.tableNamesMap,table:this.table,tableConfig:this.tableConfig,queryConfig:this.config,tableAlias:this.tableConfig.tsName})}getSQL(){return this._getQuery().sql}_toSQL(){let a=this._getQuery(),b=this.dialect.sqlToQuery(a.sql);return{query:a,builtQuery:b}}toSQL(){return this._toSQL().builtQuery}authToken;setToken(a){return this.authToken=a,this}execute(){return bp.startActiveSpan("drizzle.operation",()=>this._prepare().execute(void 0,this.authToken))}}class eU extends ey{constructor(a,b,c,d){super(),this.execute=a,this.sql=b,this.query=c,this.mapBatchResult=d}static [aY]="PgRaw";getSQL(){return this.sql}getQuery(){return this.query}mapResult(a,b){return b?this.mapBatchResult(a):a}_prepare(){return this}isResponseInArrayMode(){return!1}}class eV extends ey{constructor(a,b,c){super(),this.session=b,this.dialect=c,this.config={view:a}}static [aY]="PgRefreshMaterializedView";config;concurrently(){if(void 0!==this.config.withNoData)throw Error("Cannot use concurrently and withNoData together");return this.config.concurrently=!0,this}withNoData(){if(void 0!==this.config.concurrently)throw Error("Cannot use concurrently and withNoData together");return this.config.withNoData=!0,this}getSQL(){return this.dialect.buildRefreshMaterializedViewQuery(this.config)}toSQL(){let{typings:a,...b}=this.dialect.sqlToQuery(this.getSQL());return b}_prepare(a){return bp.startActiveSpan("drizzle.prepareQuery",()=>this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),void 0,a,!0))}prepare(a){return this._prepare(a)}authToken;setToken(a){return this.authToken=a,this}execute=a=>bp.startActiveSpan("drizzle.operation",()=>this._prepare().execute(a,this.authToken))}class eW{constructor(a,b,c){if(this.dialect=a,this.session=b,this._=c?{schema:c.schema,fullSchema:c.fullSchema,tableNamesMap:c.tableNamesMap,session:b}:{schema:void 0,fullSchema:{},tableNamesMap:{},session:b},this.query={},this._.schema)for(let[d,e]of Object.entries(this._.schema))this.query[d]=new eS(c.fullSchema,this._.schema,this._.tableNamesMap,c.fullSchema[d],e,a,b);this.$cache={invalidate:async a=>{}}}static [aY]="PgDatabase";query;$with=(a,b)=>{let c=this;return{as:d=>("function"==typeof d&&(d=d(new eL(c.dialect))),new Proxy(new bo(d.getSQL(),b??("getSelectedFields"in d?d.getSelectedFields()??{}:{}),a,!0),new ew({alias:a,sqlAliasedBehavior:"alias",sqlBehavior:"error"})))}};$count(a,b){return new eR({source:a,filters:b,session:this.session})}$cache;with(...a){let b=this;return{select:function(c){return new eA({fields:c??void 0,session:b.session,dialect:b.dialect,withList:a})},selectDistinct:function(c){return new eA({fields:c??void 0,session:b.session,dialect:b.dialect,withList:a,distinct:!0})},selectDistinctOn:function(c,d){return new eA({fields:d??void 0,session:b.session,dialect:b.dialect,withList:a,distinct:{on:c}})},update:function(c){return new eM(c,b.session,b.dialect,a)},insert:function(c){return new eO(c,b.session,b.dialect,a)},delete:function(c){return new eQ(c,b.session,b.dialect,a)}}}select(a){return new eA({fields:a??void 0,session:this.session,dialect:this.dialect})}selectDistinct(a){return new eA({fields:a??void 0,session:this.session,dialect:this.dialect,distinct:!0})}selectDistinctOn(a,b){return new eA({fields:b??void 0,session:this.session,dialect:this.dialect,distinct:{on:a}})}update(a){return new eM(a,this.session,this.dialect)}insert(a){return new eO(a,this.session,this.dialect)}delete(a){return new eQ(a,this.session,this.dialect)}refreshMaterializedView(a){return new eV(a,this.session,this.dialect)}authToken;execute(a){let b="string"==typeof a?bJ.raw(a):a.getSQL(),c=this.dialect.sqlToQuery(b),d=this.session.prepareQuery(c,void 0,void 0,!1);return new eU(()=>d.execute(void 0,this.authToken),b,c,a=>d.mapResult(a,!0))}transaction(a,b){return this.session.transaction(a,b)}}class eX{static [aY]="Cache"}class eY extends eX{strategy(){return"all"}static [aY]="NoopCache";async get(a){}async put(a,b,c,d){}async onMutate(a){}}async function eZ(a,b){let c=`${a}-${JSON.stringify(b)}`,d=new TextEncoder().encode(c);return[...new Uint8Array(await crypto.subtle.digest("SHA-256",d))].map(a=>a.toString(16).padStart(2,"0")).join("")}class e${constructor(a,b,c,d){this.query=a,this.cache=b,this.queryMetadata=c,this.cacheConfig=d,b&&"all"===b.strategy()&&void 0===d&&(this.cacheConfig={enable:!0,autoInvalidate:!0}),this.cacheConfig?.enable||(this.cacheConfig=void 0)}authToken;getQuery(){return this.query}mapResult(a,b){return a}setToken(a){return this.authToken=a,this}static [aY]="PgPreparedQuery";joinsNotNullableMap;async queryWithCache(a,b,c){if(void 0===this.cache||aZ(this.cache,eY)||void 0===this.queryMetadata||this.cacheConfig&&!this.cacheConfig.enable)try{return await c()}catch(c){throw new b$(a,b,c)}if(("insert"===this.queryMetadata.type||"update"===this.queryMetadata.type||"delete"===this.queryMetadata.type)&&this.queryMetadata.tables.length>0)try{let[a]=await Promise.all([c(),this.cache.onMutate({tables:this.queryMetadata.tables})]);return a}catch(c){throw new b$(a,b,c)}if(!this.cacheConfig)try{return await c()}catch(c){throw new b$(a,b,c)}if("select"===this.queryMetadata.type){let d=await this.cache.get(this.cacheConfig.tag??await eZ(a,b),this.queryMetadata.tables,void 0!==this.cacheConfig.tag,this.cacheConfig.autoInvalidate);if(void 0===d){let d;try{d=await c()}catch(c){throw new b$(a,b,c)}return await this.cache.put(this.cacheConfig.tag??await eZ(a,b),d,this.cacheConfig.autoInvalidate?this.queryMetadata.tables:[],void 0!==this.cacheConfig.tag,this.cacheConfig.config),d}return d}try{return await c()}catch(c){throw new b$(a,b,c)}}}class e_{constructor(a){this.dialect=a}static [aY]="PgSession";execute(a,b){return bp.startActiveSpan("drizzle.operation",()=>bp.startActiveSpan("drizzle.prepareQuery",()=>this.prepareQuery(this.dialect.sqlToQuery(a),void 0,void 0,!1)).setToken(b).execute(void 0,b))}all(a){return this.prepareQuery(this.dialect.sqlToQuery(a),void 0,void 0,!1).all()}async count(a,b){return Number((await this.execute(a,b))[0].count)}}class e0 extends eW{constructor(a,b,c,d=0){super(a,b,c),this.schema=c,this.nestedIndex=d}static [aY]="PgTransaction";rollback(){throw new b_}getTransactionConfigSQL(a){let b=[];return a.isolationLevel&&b.push(`isolation level ${a.isolationLevel}`),a.accessMode&&b.push(a.accessMode),"boolean"==typeof a.deferrable&&b.push(a.deferrable?"deferrable":"not deferrable"),bJ.raw(b.join(" "))}setTransaction(a){return this.session.execute(bJ`set transaction ${this.getTransactionConfigSQL(a)}`)}}class e1 extends e${constructor(a,b,c,d,e,f,g,h,i,j){super({sql:b,params:c},e,f,g),this.client=a,this.queryString=b,this.params=c,this.logger=d,this.fields=h,this._isResponseInArrayMode=i,this.customResultMapper=j}static [aY]="PostgresJsPreparedQuery";async execute(a={}){return bp.startActiveSpan("drizzle.execute",async b=>{let c=bL(this.params,a);b?.setAttributes({"drizzle.query.text":this.queryString,"drizzle.query.params":JSON.stringify(c)}),this.logger.logQuery(this.queryString,c);let{fields:d,queryString:e,client:f,joinsNotNullableMap:g,customResultMapper:h}=this;if(!d&&!h)return bp.startActiveSpan("drizzle.driver.execute",()=>this.queryWithCache(e,c,async()=>await f.unsafe(e,c)));let i=await bp.startActiveSpan("drizzle.driver.execute",()=>(b?.setAttributes({"drizzle.query.text":e,"drizzle.query.params":JSON.stringify(c)}),this.queryWithCache(e,c,async()=>await f.unsafe(e,c).values())));return bp.startActiveSpan("drizzle.mapResponse",()=>h?h(i):i.map(a=>(function(a,b,c){let d={},e=a.reduce((a,{path:e,field:f},g)=>{let h;h=aZ(f,a1)?f:aZ(f,bE)?f.decoder:aZ(f,bn)?f._.sql.decoder:f.sql.decoder;let i=a;for(let[a,j]of e.entries())if(a<e.length-1)j in i||(i[j]={}),i=i[j];else{let a=b[g],k=i[j]=null===a?null:h.mapFromDriverValue(a);if(c&&aZ(f,a1)&&2===e.length){let a=e[0];a in d?"string"==typeof d[a]&&d[a]!==f.table[a3]&&(d[a]=!1):d[a]=null===k&&f.table[a3]}}return a},{});if(c&&Object.keys(d).length>0)for(let[a,b]of Object.entries(d))"string"!=typeof b||c[b]||(e[a]=null);return e})(d,a,g)))})}all(a={}){return bp.startActiveSpan("drizzle.execute",async b=>{let c=bL(this.params,a);return b?.setAttributes({"drizzle.query.text":this.queryString,"drizzle.query.params":JSON.stringify(c)}),this.logger.logQuery(this.queryString,c),bp.startActiveSpan("drizzle.driver.execute",()=>(b?.setAttributes({"drizzle.query.text":this.queryString,"drizzle.query.params":JSON.stringify(c)}),this.queryWithCache(this.queryString,c,async()=>this.client.unsafe(this.queryString,c))))})}isResponseInArrayMode(){return this._isResponseInArrayMode}}class e2 extends e_{constructor(a,b,c,d={}){super(b),this.client=a,this.schema=c,this.options=d,this.logger=d.logger??new a0,this.cache=d.cache??new eY}static [aY]="PostgresJsSession";logger;cache;prepareQuery(a,b,c,d,e,f,g){return new e1(this.client,a.sql,a.params,this.logger,this.cache,f,g,b,d,e)}query(a,b){return this.logger.logQuery(a,b),this.client.unsafe(a,b).values()}queryObjects(a,b){return this.client.unsafe(a,b)}transaction(a,b){return this.client.begin(async c=>{let d=new e2(c,this.dialect,this.schema,this.options),e=new e3(this.dialect,d,this.schema);return b&&await e.setTransaction(b),a(e)})}}class e3 extends e0{constructor(a,b,c,d=0){super(a,b,c,d),this.session=b}static [aY]="PostgresJsTransaction";transaction(a){return this.session.client.savepoint(b=>{let c=new e2(b,this.dialect,this.schema,this.session.options);return a(new e3(this.dialect,c,this.schema))})}}class e4 extends eW{static [aY]="PostgresJsDatabase"}function e5(a,b={}){let c,d,e=a=>a;for(let b of["1184","1082","1083","1114","1182","1185","1115","1231"])a.options.parsers[b]=e,a.options.serializers[b]=e;a.options.serializers["114"]=e,a.options.serializers["3802"]=e;let f=new ev({casing:b.casing});if(!0===b.logger?c=new a_:!1!==b.logger&&(c=b.logger),b.schema){let a=function(a,b){1===Object.keys(a).length&&"default"in a&&!aZ(a.default,bz)&&(a=a.default);let c={},d={},e={};for(let[f,g]of Object.entries(a))if(aZ(g,bz)){let a=bA(g),b=d[a];for(let d of(c[a]=f,e[f]={tsName:f,dbName:g[bz.Symbol.Name],schema:g[bz.Symbol.Schema],columns:g[bz.Symbol.Columns],relations:b?.relations??{},primaryKey:b?.primaryKey??[]},Object.values(g[bz.Symbol.Columns])))d.primary&&e[f].primaryKey.push(d);let h=g[bz.Symbol.ExtraConfigBuilder]?.(g[bz.Symbol.ExtraConfigColumns]);if(h)for(let a of Object.values(h))aZ(a,d_)&&e[f].primaryKey.push(...a.columns)}else if(aZ(g,eq)){let a,f=bA(g.table),h=c[f];for(let[c,i]of Object.entries(g.config(b(g.table))))if(h){let b=e[h];b.relations[c]=i,a&&b.primaryKey.push(...a)}else f in d||(d[f]={relations:{},primaryKey:a}),d[f].relations[c]=i}return{tables:e,tableNamesMap:c}}(b.schema,et);d={fullSchema:b.schema,schema:a.tables,tableNamesMap:a.tableNamesMap}}let g=new e2(a,f,d,{logger:c,cache:b.cache}),h=new e4(f,g,d);return h.$client=a,h.$cache=b.cache,h.$cache&&(h.$cache.invalidate=b.cache?.onMutate),h}function e6(...a){if("string"==typeof a[0])return e5(aU(a[0]),a[1]);if(function(a){if("object"!=typeof a||null===a||"Object"!==a.constructor.name)return!1;if("logger"in a){let b=typeof a.logger;return"boolean"===b||"object"===b&&"function"==typeof a.logger.logQuery||"undefined"===b}if("schema"in a){let b=typeof a.schema;return"object"===b||"undefined"===b}if("casing"in a){let b=typeof a.casing;return"string"===b||"undefined"===b}if("mode"in a)return"default"===a.mode&&"planetscale"===a.mode&&void 0===a.mode;if("connection"in a){let b=typeof a.connection;return"string"===b||"object"===b||"undefined"===b}if("client"in a){let b=typeof a.client;return"object"===b||"function"===b||"undefined"===b}return 0===Object.keys(a).length}(a[0])){let{connection:b,client:c,...d}=a[0];if(c)return e5(c,d);if("object"==typeof b&&void 0!==b.url){let{url:a,...c}=b;return e5(aU(a,c),d)}return e5(aU(b),d)}return e5(a[0],a[1])}(e6||(e6={})).mock=function(a){return e5({options:{parsers:{},serializers:{}}},a)},!function(a){a.assertEqual=a=>{},a.assertIs=function(a){},a.assertNever=function(a){throw Error()},a.arrayToEnum=a=>{let b={};for(let c of a)b[c]=c;return b},a.getValidEnumValues=b=>{let c=a.objectKeys(b).filter(a=>"number"!=typeof b[b[a]]),d={};for(let a of c)d[a]=b[a];return a.objectValues(d)},a.objectValues=b=>a.objectKeys(b).map(function(a){return b[a]}),a.objectKeys="function"==typeof Object.keys?a=>Object.keys(a):a=>{let b=[];for(let c in a)Object.prototype.hasOwnProperty.call(a,c)&&b.push(c);return b},a.find=(a,b)=>{for(let c of a)if(b(c))return c},a.isInteger="function"==typeof Number.isInteger?a=>Number.isInteger(a):a=>"number"==typeof a&&Number.isFinite(a)&&Math.floor(a)===a,a.joinValues=function(a,b=" | "){return a.map(a=>"string"==typeof a?`'${a}'`:a).join(b)},a.jsonStringifyReplacer=(a,b)=>"bigint"==typeof b?b.toString():b}(g||(g={})),(h||(h={})).mergeShapes=(a,b)=>({...a,...b});let e7=g.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),e8=a=>{switch(typeof a){case"undefined":return e7.undefined;case"string":return e7.string;case"number":return Number.isNaN(a)?e7.nan:e7.number;case"boolean":return e7.boolean;case"function":return e7.function;case"bigint":return e7.bigint;case"symbol":return e7.symbol;case"object":if(Array.isArray(a))return e7.array;if(null===a)return e7.null;if(a.then&&"function"==typeof a.then&&a.catch&&"function"==typeof a.catch)return e7.promise;if("undefined"!=typeof Map&&a instanceof Map)return e7.map;if("undefined"!=typeof Set&&a instanceof Set)return e7.set;if("undefined"!=typeof Date&&a instanceof Date)return e7.date;return e7.object;default:return e7.unknown}},e9=g.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class fa extends Error{get errors(){return this.issues}constructor(a){super(),this.issues=[],this.addIssue=a=>{this.issues=[...this.issues,a]},this.addIssues=(a=[])=>{this.issues=[...this.issues,...a]};let b=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,b):this.__proto__=b,this.name="ZodError",this.issues=a}format(a){let b=a||function(a){return a.message},c={_errors:[]},d=a=>{for(let e of a.issues)if("invalid_union"===e.code)e.unionErrors.map(d);else if("invalid_return_type"===e.code)d(e.returnTypeError);else if("invalid_arguments"===e.code)d(e.argumentsError);else if(0===e.path.length)c._errors.push(b(e));else{let a=c,d=0;for(;d<e.path.length;){let c=e.path[d];d===e.path.length-1?(a[c]=a[c]||{_errors:[]},a[c]._errors.push(b(e))):a[c]=a[c]||{_errors:[]},a=a[c],d++}}};return d(this),c}static assert(a){if(!(a instanceof fa))throw Error(`Not a ZodError: ${a}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,g.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(a=a=>a.message){let b={},c=[];for(let d of this.issues)if(d.path.length>0){let c=d.path[0];b[c]=b[c]||[],b[c].push(a(d))}else c.push(a(d));return{formErrors:c,fieldErrors:b}}get formErrors(){return this.flatten()}}fa.create=a=>new fa(a);let fb=(a,b)=>{let c;switch(a.code){case e9.invalid_type:c=a.received===e7.undefined?"Required":`Expected ${a.expected}, received ${a.received}`;break;case e9.invalid_literal:c=`Invalid literal value, expected ${JSON.stringify(a.expected,g.jsonStringifyReplacer)}`;break;case e9.unrecognized_keys:c=`Unrecognized key(s) in object: ${g.joinValues(a.keys,", ")}`;break;case e9.invalid_union:c="Invalid input";break;case e9.invalid_union_discriminator:c=`Invalid discriminator value. Expected ${g.joinValues(a.options)}`;break;case e9.invalid_enum_value:c=`Invalid enum value. Expected ${g.joinValues(a.options)}, received '${a.received}'`;break;case e9.invalid_arguments:c="Invalid function arguments";break;case e9.invalid_return_type:c="Invalid function return type";break;case e9.invalid_date:c="Invalid date";break;case e9.invalid_string:"object"==typeof a.validation?"includes"in a.validation?(c=`Invalid input: must include "${a.validation.includes}"`,"number"==typeof a.validation.position&&(c=`${c} at one or more positions greater than or equal to ${a.validation.position}`)):"startsWith"in a.validation?c=`Invalid input: must start with "${a.validation.startsWith}"`:"endsWith"in a.validation?c=`Invalid input: must end with "${a.validation.endsWith}"`:g.assertNever(a.validation):c="regex"!==a.validation?`Invalid ${a.validation}`:"Invalid";break;case e9.too_small:c="array"===a.type?`Array must contain ${a.exact?"exactly":a.inclusive?"at least":"more than"} ${a.minimum} element(s)`:"string"===a.type?`String must contain ${a.exact?"exactly":a.inclusive?"at least":"over"} ${a.minimum} character(s)`:"number"===a.type||"bigint"===a.type?`Number must be ${a.exact?"exactly equal to ":a.inclusive?"greater than or equal to ":"greater than "}${a.minimum}`:"date"===a.type?`Date must be ${a.exact?"exactly equal to ":a.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(a.minimum))}`:"Invalid input";break;case e9.too_big:c="array"===a.type?`Array must contain ${a.exact?"exactly":a.inclusive?"at most":"less than"} ${a.maximum} element(s)`:"string"===a.type?`String must contain ${a.exact?"exactly":a.inclusive?"at most":"under"} ${a.maximum} character(s)`:"number"===a.type?`Number must be ${a.exact?"exactly":a.inclusive?"less than or equal to":"less than"} ${a.maximum}`:"bigint"===a.type?`BigInt must be ${a.exact?"exactly":a.inclusive?"less than or equal to":"less than"} ${a.maximum}`:"date"===a.type?`Date must be ${a.exact?"exactly":a.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(a.maximum))}`:"Invalid input";break;case e9.custom:c="Invalid input";break;case e9.invalid_intersection_types:c="Intersection results could not be merged";break;case e9.not_multiple_of:c=`Number must be a multiple of ${a.multipleOf}`;break;case e9.not_finite:c="Number must be finite";break;default:c=b.defaultError,g.assertNever(a)}return{message:c}};!function(a){a.errToObj=a=>"string"==typeof a?{message:a}:a||{},a.toString=a=>"string"==typeof a?a:a?.message}(i||(i={}));let fc=a=>{let{data:b,path:c,errorMaps:d,issueData:e}=a,f=[...c,...e.path||[]],g={...e,path:f};if(void 0!==e.message)return{...e,path:f,message:e.message};let h="";for(let a of d.filter(a=>!!a).slice().reverse())h=a(g,{data:b,defaultError:h}).message;return{...e,path:f,message:h}};function fd(a,b){let c=fc({issueData:b,data:a.data,path:a.path,errorMaps:[a.common.contextualErrorMap,a.schemaErrorMap,fb,void 0].filter(a=>!!a)});a.common.issues.push(c)}class fe{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(a,b){let c=[];for(let d of b){if("aborted"===d.status)return ff;"dirty"===d.status&&a.dirty(),c.push(d.value)}return{status:a.value,value:c}}static async mergeObjectAsync(a,b){let c=[];for(let a of b){let b=await a.key,d=await a.value;c.push({key:b,value:d})}return fe.mergeObjectSync(a,c)}static mergeObjectSync(a,b){let c={};for(let d of b){let{key:b,value:e}=d;if("aborted"===b.status||"aborted"===e.status)return ff;"dirty"===b.status&&a.dirty(),"dirty"===e.status&&a.dirty(),"__proto__"!==b.value&&(void 0!==e.value||d.alwaysSet)&&(c[b.value]=e.value)}return{status:a.value,value:c}}}let ff=Object.freeze({status:"aborted"}),fg=a=>({status:"dirty",value:a}),fh=a=>({status:"valid",value:a}),fi=a=>"undefined"!=typeof Promise&&a instanceof Promise;class fj{constructor(a,b,c,d){this._cachedPath=[],this.parent=a,this.data=b,this._path=c,this._key=d}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}let fk=(a,b)=>{if("valid"===b.status)return{success:!0,data:b.value};if(!a.common.issues.length)throw Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let b=new fa(a.common.issues);return this._error=b,this._error}}};function fl(a){if(!a)return{};let{errorMap:b,invalid_type_error:c,required_error:d,description:e}=a;if(b&&(c||d))throw Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');return b?{errorMap:b,description:e}:{errorMap:(b,e)=>{let{message:f}=a;return"invalid_enum_value"===b.code?{message:f??e.defaultError}:void 0===e.data?{message:f??d??e.defaultError}:"invalid_type"!==b.code?{message:e.defaultError}:{message:f??c??e.defaultError}},description:e}}class fm{get description(){return this._def.description}_getType(a){return e8(a.data)}_getOrReturnCtx(a,b){return b||{common:a.parent.common,data:a.data,parsedType:e8(a.data),schemaErrorMap:this._def.errorMap,path:a.path,parent:a.parent}}_processInputParams(a){return{status:new fe,ctx:{common:a.parent.common,data:a.data,parsedType:e8(a.data),schemaErrorMap:this._def.errorMap,path:a.path,parent:a.parent}}}_parseSync(a){let b=this._parse(a);if(fi(b))throw Error("Synchronous parse encountered promise.");return b}_parseAsync(a){return Promise.resolve(this._parse(a))}parse(a,b){let c=this.safeParse(a,b);if(c.success)return c.data;throw c.error}safeParse(a,b){let c={common:{issues:[],async:b?.async??!1,contextualErrorMap:b?.errorMap},path:b?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:a,parsedType:e8(a)},d=this._parseSync({data:a,path:c.path,parent:c});return fk(c,d)}"~validate"(a){let b={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:a,parsedType:e8(a)};if(!this["~standard"].async)try{let c=this._parseSync({data:a,path:[],parent:b});return"valid"===c.status?{value:c.value}:{issues:b.common.issues}}catch(a){a?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),b.common={issues:[],async:!0}}return this._parseAsync({data:a,path:[],parent:b}).then(a=>"valid"===a.status?{value:a.value}:{issues:b.common.issues})}async parseAsync(a,b){let c=await this.safeParseAsync(a,b);if(c.success)return c.data;throw c.error}async safeParseAsync(a,b){let c={common:{issues:[],contextualErrorMap:b?.errorMap,async:!0},path:b?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:a,parsedType:e8(a)},d=this._parse({data:a,path:c.path,parent:c});return fk(c,await (fi(d)?d:Promise.resolve(d)))}refine(a,b){return this._refinement((c,d)=>{let e=a(c),f=()=>d.addIssue({code:e9.custom,..."string"==typeof b||void 0===b?{message:b}:"function"==typeof b?b(c):b});return"undefined"!=typeof Promise&&e instanceof Promise?e.then(a=>!!a||(f(),!1)):!!e||(f(),!1)})}refinement(a,b){return this._refinement((c,d)=>!!a(c)||(d.addIssue("function"==typeof b?b(c,d):b),!1))}_refinement(a){return new f5({schema:this,typeName:j.ZodEffects,effect:{type:"refinement",refinement:a}})}superRefine(a){return this._refinement(a)}constructor(a){this.spa=this.safeParseAsync,this._def=a,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:a=>this["~validate"](a)}}optional(){return f6.create(this,this._def)}nullable(){return f7.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return fQ.create(this)}promise(){return f4.create(this,this._def)}or(a){return fS.create([this,a],this._def)}and(a){return fV.create(this,a,this._def)}transform(a){return new f5({...fl(this._def),schema:this,typeName:j.ZodEffects,effect:{type:"transform",transform:a}})}default(a){return new f8({...fl(this._def),innerType:this,defaultValue:"function"==typeof a?a:()=>a,typeName:j.ZodDefault})}brand(){return new gb({typeName:j.ZodBranded,type:this,...fl(this._def)})}catch(a){return new f9({...fl(this._def),innerType:this,catchValue:"function"==typeof a?a:()=>a,typeName:j.ZodCatch})}describe(a){return new this.constructor({...this._def,description:a})}pipe(a){return gc.create(this,a)}readonly(){return gd.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}let fn=/^c[^\s-]{8,}$/i,fo=/^[0-9a-z]+$/,fp=/^[0-9A-HJKMNP-TV-Z]{26}$/i,fq=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,fr=/^[a-z0-9_-]{21}$/i,fs=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,ft=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,fu=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,fv=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,fw=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,fx=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,fy=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,fz=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,fA=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,fB="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",fC=RegExp(`^${fB}$`);function fD(a){let b="[0-5]\\d";a.precision?b=`${b}\\.\\d{${a.precision}}`:null==a.precision&&(b=`${b}(\\.\\d+)?`);let c=a.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${b})${c}`}class fE extends fm{_parse(a){var b,c,d,e;let h;if(this._def.coerce&&(a.data=String(a.data)),this._getType(a)!==e7.string){let b=this._getOrReturnCtx(a);return fd(b,{code:e9.invalid_type,expected:e7.string,received:b.parsedType}),ff}let i=new fe;for(let j of this._def.checks)if("min"===j.kind)a.data.length<j.value&&(fd(h=this._getOrReturnCtx(a,h),{code:e9.too_small,minimum:j.value,type:"string",inclusive:!0,exact:!1,message:j.message}),i.dirty());else if("max"===j.kind)a.data.length>j.value&&(fd(h=this._getOrReturnCtx(a,h),{code:e9.too_big,maximum:j.value,type:"string",inclusive:!0,exact:!1,message:j.message}),i.dirty());else if("length"===j.kind){let b=a.data.length>j.value,c=a.data.length<j.value;(b||c)&&(h=this._getOrReturnCtx(a,h),b?fd(h,{code:e9.too_big,maximum:j.value,type:"string",inclusive:!0,exact:!0,message:j.message}):c&&fd(h,{code:e9.too_small,minimum:j.value,type:"string",inclusive:!0,exact:!0,message:j.message}),i.dirty())}else if("email"===j.kind)fu.test(a.data)||(fd(h=this._getOrReturnCtx(a,h),{validation:"email",code:e9.invalid_string,message:j.message}),i.dirty());else if("emoji"===j.kind)f||(f=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),f.test(a.data)||(fd(h=this._getOrReturnCtx(a,h),{validation:"emoji",code:e9.invalid_string,message:j.message}),i.dirty());else if("uuid"===j.kind)fq.test(a.data)||(fd(h=this._getOrReturnCtx(a,h),{validation:"uuid",code:e9.invalid_string,message:j.message}),i.dirty());else if("nanoid"===j.kind)fr.test(a.data)||(fd(h=this._getOrReturnCtx(a,h),{validation:"nanoid",code:e9.invalid_string,message:j.message}),i.dirty());else if("cuid"===j.kind)fn.test(a.data)||(fd(h=this._getOrReturnCtx(a,h),{validation:"cuid",code:e9.invalid_string,message:j.message}),i.dirty());else if("cuid2"===j.kind)fo.test(a.data)||(fd(h=this._getOrReturnCtx(a,h),{validation:"cuid2",code:e9.invalid_string,message:j.message}),i.dirty());else if("ulid"===j.kind)fp.test(a.data)||(fd(h=this._getOrReturnCtx(a,h),{validation:"ulid",code:e9.invalid_string,message:j.message}),i.dirty());else if("url"===j.kind)try{new URL(a.data)}catch{fd(h=this._getOrReturnCtx(a,h),{validation:"url",code:e9.invalid_string,message:j.message}),i.dirty()}else"regex"===j.kind?(j.regex.lastIndex=0,j.regex.test(a.data)||(fd(h=this._getOrReturnCtx(a,h),{validation:"regex",code:e9.invalid_string,message:j.message}),i.dirty())):"trim"===j.kind?a.data=a.data.trim():"includes"===j.kind?a.data.includes(j.value,j.position)||(fd(h=this._getOrReturnCtx(a,h),{code:e9.invalid_string,validation:{includes:j.value,position:j.position},message:j.message}),i.dirty()):"toLowerCase"===j.kind?a.data=a.data.toLowerCase():"toUpperCase"===j.kind?a.data=a.data.toUpperCase():"startsWith"===j.kind?a.data.startsWith(j.value)||(fd(h=this._getOrReturnCtx(a,h),{code:e9.invalid_string,validation:{startsWith:j.value},message:j.message}),i.dirty()):"endsWith"===j.kind?a.data.endsWith(j.value)||(fd(h=this._getOrReturnCtx(a,h),{code:e9.invalid_string,validation:{endsWith:j.value},message:j.message}),i.dirty()):"datetime"===j.kind?(function(a){let b=`${fB}T${fD(a)}`,c=[];return c.push(a.local?"Z?":"Z"),a.offset&&c.push("([+-]\\d{2}:?\\d{2})"),b=`${b}(${c.join("|")})`,RegExp(`^${b}$`)})(j).test(a.data)||(fd(h=this._getOrReturnCtx(a,h),{code:e9.invalid_string,validation:"datetime",message:j.message}),i.dirty()):"date"===j.kind?fC.test(a.data)||(fd(h=this._getOrReturnCtx(a,h),{code:e9.invalid_string,validation:"date",message:j.message}),i.dirty()):"time"===j.kind?RegExp(`^${fD(j)}$`).test(a.data)||(fd(h=this._getOrReturnCtx(a,h),{code:e9.invalid_string,validation:"time",message:j.message}),i.dirty()):"duration"===j.kind?ft.test(a.data)||(fd(h=this._getOrReturnCtx(a,h),{validation:"duration",code:e9.invalid_string,message:j.message}),i.dirty()):"ip"===j.kind?(b=a.data,!(("v4"===(c=j.version)||!c)&&fv.test(b)||("v6"===c||!c)&&fx.test(b))&&1&&(fd(h=this._getOrReturnCtx(a,h),{validation:"ip",code:e9.invalid_string,message:j.message}),i.dirty())):"jwt"===j.kind?!function(a,b){if(!fs.test(a))return!1;try{let[c]=a.split(".");if(!c)return!1;let d=c.replace(/-/g,"+").replace(/_/g,"/").padEnd(c.length+(4-c.length%4)%4,"="),e=JSON.parse(atob(d));if("object"!=typeof e||null===e||"typ"in e&&e?.typ!=="JWT"||!e.alg||b&&e.alg!==b)return!1;return!0}catch{return!1}}(a.data,j.alg)&&(fd(h=this._getOrReturnCtx(a,h),{validation:"jwt",code:e9.invalid_string,message:j.message}),i.dirty()):"cidr"===j.kind?(d=a.data,!(("v4"===(e=j.version)||!e)&&fw.test(d)||("v6"===e||!e)&&fy.test(d))&&1&&(fd(h=this._getOrReturnCtx(a,h),{validation:"cidr",code:e9.invalid_string,message:j.message}),i.dirty())):"base64"===j.kind?fz.test(a.data)||(fd(h=this._getOrReturnCtx(a,h),{validation:"base64",code:e9.invalid_string,message:j.message}),i.dirty()):"base64url"===j.kind?fA.test(a.data)||(fd(h=this._getOrReturnCtx(a,h),{validation:"base64url",code:e9.invalid_string,message:j.message}),i.dirty()):g.assertNever(j);return{status:i.value,value:a.data}}_regex(a,b,c){return this.refinement(b=>a.test(b),{validation:b,code:e9.invalid_string,...i.errToObj(c)})}_addCheck(a){return new fE({...this._def,checks:[...this._def.checks,a]})}email(a){return this._addCheck({kind:"email",...i.errToObj(a)})}url(a){return this._addCheck({kind:"url",...i.errToObj(a)})}emoji(a){return this._addCheck({kind:"emoji",...i.errToObj(a)})}uuid(a){return this._addCheck({kind:"uuid",...i.errToObj(a)})}nanoid(a){return this._addCheck({kind:"nanoid",...i.errToObj(a)})}cuid(a){return this._addCheck({kind:"cuid",...i.errToObj(a)})}cuid2(a){return this._addCheck({kind:"cuid2",...i.errToObj(a)})}ulid(a){return this._addCheck({kind:"ulid",...i.errToObj(a)})}base64(a){return this._addCheck({kind:"base64",...i.errToObj(a)})}base64url(a){return this._addCheck({kind:"base64url",...i.errToObj(a)})}jwt(a){return this._addCheck({kind:"jwt",...i.errToObj(a)})}ip(a){return this._addCheck({kind:"ip",...i.errToObj(a)})}cidr(a){return this._addCheck({kind:"cidr",...i.errToObj(a)})}datetime(a){return"string"==typeof a?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:a}):this._addCheck({kind:"datetime",precision:void 0===a?.precision?null:a?.precision,offset:a?.offset??!1,local:a?.local??!1,...i.errToObj(a?.message)})}date(a){return this._addCheck({kind:"date",message:a})}time(a){return"string"==typeof a?this._addCheck({kind:"time",precision:null,message:a}):this._addCheck({kind:"time",precision:void 0===a?.precision?null:a?.precision,...i.errToObj(a?.message)})}duration(a){return this._addCheck({kind:"duration",...i.errToObj(a)})}regex(a,b){return this._addCheck({kind:"regex",regex:a,...i.errToObj(b)})}includes(a,b){return this._addCheck({kind:"includes",value:a,position:b?.position,...i.errToObj(b?.message)})}startsWith(a,b){return this._addCheck({kind:"startsWith",value:a,...i.errToObj(b)})}endsWith(a,b){return this._addCheck({kind:"endsWith",value:a,...i.errToObj(b)})}min(a,b){return this._addCheck({kind:"min",value:a,...i.errToObj(b)})}max(a,b){return this._addCheck({kind:"max",value:a,...i.errToObj(b)})}length(a,b){return this._addCheck({kind:"length",value:a,...i.errToObj(b)})}nonempty(a){return this.min(1,i.errToObj(a))}trim(){return new fE({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new fE({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new fE({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(a=>"datetime"===a.kind)}get isDate(){return!!this._def.checks.find(a=>"date"===a.kind)}get isTime(){return!!this._def.checks.find(a=>"time"===a.kind)}get isDuration(){return!!this._def.checks.find(a=>"duration"===a.kind)}get isEmail(){return!!this._def.checks.find(a=>"email"===a.kind)}get isURL(){return!!this._def.checks.find(a=>"url"===a.kind)}get isEmoji(){return!!this._def.checks.find(a=>"emoji"===a.kind)}get isUUID(){return!!this._def.checks.find(a=>"uuid"===a.kind)}get isNANOID(){return!!this._def.checks.find(a=>"nanoid"===a.kind)}get isCUID(){return!!this._def.checks.find(a=>"cuid"===a.kind)}get isCUID2(){return!!this._def.checks.find(a=>"cuid2"===a.kind)}get isULID(){return!!this._def.checks.find(a=>"ulid"===a.kind)}get isIP(){return!!this._def.checks.find(a=>"ip"===a.kind)}get isCIDR(){return!!this._def.checks.find(a=>"cidr"===a.kind)}get isBase64(){return!!this._def.checks.find(a=>"base64"===a.kind)}get isBase64url(){return!!this._def.checks.find(a=>"base64url"===a.kind)}get minLength(){let a=null;for(let b of this._def.checks)"min"===b.kind&&(null===a||b.value>a)&&(a=b.value);return a}get maxLength(){let a=null;for(let b of this._def.checks)"max"===b.kind&&(null===a||b.value<a)&&(a=b.value);return a}}fE.create=a=>new fE({checks:[],typeName:j.ZodString,coerce:a?.coerce??!1,...fl(a)});class fF extends fm{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(a){let b;if(this._def.coerce&&(a.data=Number(a.data)),this._getType(a)!==e7.number){let b=this._getOrReturnCtx(a);return fd(b,{code:e9.invalid_type,expected:e7.number,received:b.parsedType}),ff}let c=new fe;for(let d of this._def.checks)"int"===d.kind?g.isInteger(a.data)||(fd(b=this._getOrReturnCtx(a,b),{code:e9.invalid_type,expected:"integer",received:"float",message:d.message}),c.dirty()):"min"===d.kind?(d.inclusive?a.data<d.value:a.data<=d.value)&&(fd(b=this._getOrReturnCtx(a,b),{code:e9.too_small,minimum:d.value,type:"number",inclusive:d.inclusive,exact:!1,message:d.message}),c.dirty()):"max"===d.kind?(d.inclusive?a.data>d.value:a.data>=d.value)&&(fd(b=this._getOrReturnCtx(a,b),{code:e9.too_big,maximum:d.value,type:"number",inclusive:d.inclusive,exact:!1,message:d.message}),c.dirty()):"multipleOf"===d.kind?0!==function(a,b){let c=(a.toString().split(".")[1]||"").length,d=(b.toString().split(".")[1]||"").length,e=c>d?c:d;return Number.parseInt(a.toFixed(e).replace(".",""))%Number.parseInt(b.toFixed(e).replace(".",""))/10**e}(a.data,d.value)&&(fd(b=this._getOrReturnCtx(a,b),{code:e9.not_multiple_of,multipleOf:d.value,message:d.message}),c.dirty()):"finite"===d.kind?Number.isFinite(a.data)||(fd(b=this._getOrReturnCtx(a,b),{code:e9.not_finite,message:d.message}),c.dirty()):g.assertNever(d);return{status:c.value,value:a.data}}gte(a,b){return this.setLimit("min",a,!0,i.toString(b))}gt(a,b){return this.setLimit("min",a,!1,i.toString(b))}lte(a,b){return this.setLimit("max",a,!0,i.toString(b))}lt(a,b){return this.setLimit("max",a,!1,i.toString(b))}setLimit(a,b,c,d){return new fF({...this._def,checks:[...this._def.checks,{kind:a,value:b,inclusive:c,message:i.toString(d)}]})}_addCheck(a){return new fF({...this._def,checks:[...this._def.checks,a]})}int(a){return this._addCheck({kind:"int",message:i.toString(a)})}positive(a){return this._addCheck({kind:"min",value:0,inclusive:!1,message:i.toString(a)})}negative(a){return this._addCheck({kind:"max",value:0,inclusive:!1,message:i.toString(a)})}nonpositive(a){return this._addCheck({kind:"max",value:0,inclusive:!0,message:i.toString(a)})}nonnegative(a){return this._addCheck({kind:"min",value:0,inclusive:!0,message:i.toString(a)})}multipleOf(a,b){return this._addCheck({kind:"multipleOf",value:a,message:i.toString(b)})}finite(a){return this._addCheck({kind:"finite",message:i.toString(a)})}safe(a){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:i.toString(a)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:i.toString(a)})}get minValue(){let a=null;for(let b of this._def.checks)"min"===b.kind&&(null===a||b.value>a)&&(a=b.value);return a}get maxValue(){let a=null;for(let b of this._def.checks)"max"===b.kind&&(null===a||b.value<a)&&(a=b.value);return a}get isInt(){return!!this._def.checks.find(a=>"int"===a.kind||"multipleOf"===a.kind&&g.isInteger(a.value))}get isFinite(){let a=null,b=null;for(let c of this._def.checks)if("finite"===c.kind||"int"===c.kind||"multipleOf"===c.kind)return!0;else"min"===c.kind?(null===b||c.value>b)&&(b=c.value):"max"===c.kind&&(null===a||c.value<a)&&(a=c.value);return Number.isFinite(b)&&Number.isFinite(a)}}fF.create=a=>new fF({checks:[],typeName:j.ZodNumber,coerce:a?.coerce||!1,...fl(a)});class fG extends fm{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(a){let b;if(this._def.coerce)try{a.data=BigInt(a.data)}catch{return this._getInvalidInput(a)}if(this._getType(a)!==e7.bigint)return this._getInvalidInput(a);let c=new fe;for(let d of this._def.checks)"min"===d.kind?(d.inclusive?a.data<d.value:a.data<=d.value)&&(fd(b=this._getOrReturnCtx(a,b),{code:e9.too_small,type:"bigint",minimum:d.value,inclusive:d.inclusive,message:d.message}),c.dirty()):"max"===d.kind?(d.inclusive?a.data>d.value:a.data>=d.value)&&(fd(b=this._getOrReturnCtx(a,b),{code:e9.too_big,type:"bigint",maximum:d.value,inclusive:d.inclusive,message:d.message}),c.dirty()):"multipleOf"===d.kind?a.data%d.value!==BigInt(0)&&(fd(b=this._getOrReturnCtx(a,b),{code:e9.not_multiple_of,multipleOf:d.value,message:d.message}),c.dirty()):g.assertNever(d);return{status:c.value,value:a.data}}_getInvalidInput(a){let b=this._getOrReturnCtx(a);return fd(b,{code:e9.invalid_type,expected:e7.bigint,received:b.parsedType}),ff}gte(a,b){return this.setLimit("min",a,!0,i.toString(b))}gt(a,b){return this.setLimit("min",a,!1,i.toString(b))}lte(a,b){return this.setLimit("max",a,!0,i.toString(b))}lt(a,b){return this.setLimit("max",a,!1,i.toString(b))}setLimit(a,b,c,d){return new fG({...this._def,checks:[...this._def.checks,{kind:a,value:b,inclusive:c,message:i.toString(d)}]})}_addCheck(a){return new fG({...this._def,checks:[...this._def.checks,a]})}positive(a){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:i.toString(a)})}negative(a){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:i.toString(a)})}nonpositive(a){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:i.toString(a)})}nonnegative(a){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:i.toString(a)})}multipleOf(a,b){return this._addCheck({kind:"multipleOf",value:a,message:i.toString(b)})}get minValue(){let a=null;for(let b of this._def.checks)"min"===b.kind&&(null===a||b.value>a)&&(a=b.value);return a}get maxValue(){let a=null;for(let b of this._def.checks)"max"===b.kind&&(null===a||b.value<a)&&(a=b.value);return a}}fG.create=a=>new fG({checks:[],typeName:j.ZodBigInt,coerce:a?.coerce??!1,...fl(a)});class fH extends fm{_parse(a){if(this._def.coerce&&(a.data=!!a.data),this._getType(a)!==e7.boolean){let b=this._getOrReturnCtx(a);return fd(b,{code:e9.invalid_type,expected:e7.boolean,received:b.parsedType}),ff}return fh(a.data)}}fH.create=a=>new fH({typeName:j.ZodBoolean,coerce:a?.coerce||!1,...fl(a)});class fI extends fm{_parse(a){let b;if(this._def.coerce&&(a.data=new Date(a.data)),this._getType(a)!==e7.date){let b=this._getOrReturnCtx(a);return fd(b,{code:e9.invalid_type,expected:e7.date,received:b.parsedType}),ff}if(Number.isNaN(a.data.getTime()))return fd(this._getOrReturnCtx(a),{code:e9.invalid_date}),ff;let c=new fe;for(let d of this._def.checks)"min"===d.kind?a.data.getTime()<d.value&&(fd(b=this._getOrReturnCtx(a,b),{code:e9.too_small,message:d.message,inclusive:!0,exact:!1,minimum:d.value,type:"date"}),c.dirty()):"max"===d.kind?a.data.getTime()>d.value&&(fd(b=this._getOrReturnCtx(a,b),{code:e9.too_big,message:d.message,inclusive:!0,exact:!1,maximum:d.value,type:"date"}),c.dirty()):g.assertNever(d);return{status:c.value,value:new Date(a.data.getTime())}}_addCheck(a){return new fI({...this._def,checks:[...this._def.checks,a]})}min(a,b){return this._addCheck({kind:"min",value:a.getTime(),message:i.toString(b)})}max(a,b){return this._addCheck({kind:"max",value:a.getTime(),message:i.toString(b)})}get minDate(){let a=null;for(let b of this._def.checks)"min"===b.kind&&(null===a||b.value>a)&&(a=b.value);return null!=a?new Date(a):null}get maxDate(){let a=null;for(let b of this._def.checks)"max"===b.kind&&(null===a||b.value<a)&&(a=b.value);return null!=a?new Date(a):null}}fI.create=a=>new fI({checks:[],coerce:a?.coerce||!1,typeName:j.ZodDate,...fl(a)});class fJ extends fm{_parse(a){if(this._getType(a)!==e7.symbol){let b=this._getOrReturnCtx(a);return fd(b,{code:e9.invalid_type,expected:e7.symbol,received:b.parsedType}),ff}return fh(a.data)}}fJ.create=a=>new fJ({typeName:j.ZodSymbol,...fl(a)});class fK extends fm{_parse(a){if(this._getType(a)!==e7.undefined){let b=this._getOrReturnCtx(a);return fd(b,{code:e9.invalid_type,expected:e7.undefined,received:b.parsedType}),ff}return fh(a.data)}}fK.create=a=>new fK({typeName:j.ZodUndefined,...fl(a)});class fL extends fm{_parse(a){if(this._getType(a)!==e7.null){let b=this._getOrReturnCtx(a);return fd(b,{code:e9.invalid_type,expected:e7.null,received:b.parsedType}),ff}return fh(a.data)}}fL.create=a=>new fL({typeName:j.ZodNull,...fl(a)});class fM extends fm{constructor(){super(...arguments),this._any=!0}_parse(a){return fh(a.data)}}fM.create=a=>new fM({typeName:j.ZodAny,...fl(a)});class fN extends fm{constructor(){super(...arguments),this._unknown=!0}_parse(a){return fh(a.data)}}fN.create=a=>new fN({typeName:j.ZodUnknown,...fl(a)});class fO extends fm{_parse(a){let b=this._getOrReturnCtx(a);return fd(b,{code:e9.invalid_type,expected:e7.never,received:b.parsedType}),ff}}fO.create=a=>new fO({typeName:j.ZodNever,...fl(a)});class fP extends fm{_parse(a){if(this._getType(a)!==e7.undefined){let b=this._getOrReturnCtx(a);return fd(b,{code:e9.invalid_type,expected:e7.void,received:b.parsedType}),ff}return fh(a.data)}}fP.create=a=>new fP({typeName:j.ZodVoid,...fl(a)});class fQ extends fm{_parse(a){let{ctx:b,status:c}=this._processInputParams(a),d=this._def;if(b.parsedType!==e7.array)return fd(b,{code:e9.invalid_type,expected:e7.array,received:b.parsedType}),ff;if(null!==d.exactLength){let a=b.data.length>d.exactLength.value,e=b.data.length<d.exactLength.value;(a||e)&&(fd(b,{code:a?e9.too_big:e9.too_small,minimum:e?d.exactLength.value:void 0,maximum:a?d.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:d.exactLength.message}),c.dirty())}if(null!==d.minLength&&b.data.length<d.minLength.value&&(fd(b,{code:e9.too_small,minimum:d.minLength.value,type:"array",inclusive:!0,exact:!1,message:d.minLength.message}),c.dirty()),null!==d.maxLength&&b.data.length>d.maxLength.value&&(fd(b,{code:e9.too_big,maximum:d.maxLength.value,type:"array",inclusive:!0,exact:!1,message:d.maxLength.message}),c.dirty()),b.common.async)return Promise.all([...b.data].map((a,c)=>d.type._parseAsync(new fj(b,a,b.path,c)))).then(a=>fe.mergeArray(c,a));let e=[...b.data].map((a,c)=>d.type._parseSync(new fj(b,a,b.path,c)));return fe.mergeArray(c,e)}get element(){return this._def.type}min(a,b){return new fQ({...this._def,minLength:{value:a,message:i.toString(b)}})}max(a,b){return new fQ({...this._def,maxLength:{value:a,message:i.toString(b)}})}length(a,b){return new fQ({...this._def,exactLength:{value:a,message:i.toString(b)}})}nonempty(a){return this.min(1,a)}}fQ.create=(a,b)=>new fQ({type:a,minLength:null,maxLength:null,exactLength:null,typeName:j.ZodArray,...fl(b)});class fR extends fm{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;let a=this._def.shape(),b=g.objectKeys(a);return this._cached={shape:a,keys:b},this._cached}_parse(a){if(this._getType(a)!==e7.object){let b=this._getOrReturnCtx(a);return fd(b,{code:e9.invalid_type,expected:e7.object,received:b.parsedType}),ff}let{status:b,ctx:c}=this._processInputParams(a),{shape:d,keys:e}=this._getCached(),f=[];if(!(this._def.catchall instanceof fO&&"strip"===this._def.unknownKeys))for(let a in c.data)e.includes(a)||f.push(a);let g=[];for(let a of e){let b=d[a],e=c.data[a];g.push({key:{status:"valid",value:a},value:b._parse(new fj(c,e,c.path,a)),alwaysSet:a in c.data})}if(this._def.catchall instanceof fO){let a=this._def.unknownKeys;if("passthrough"===a)for(let a of f)g.push({key:{status:"valid",value:a},value:{status:"valid",value:c.data[a]}});else if("strict"===a)f.length>0&&(fd(c,{code:e9.unrecognized_keys,keys:f}),b.dirty());else if("strip"===a);else throw Error("Internal ZodObject error: invalid unknownKeys value.")}else{let a=this._def.catchall;for(let b of f){let d=c.data[b];g.push({key:{status:"valid",value:b},value:a._parse(new fj(c,d,c.path,b)),alwaysSet:b in c.data})}}return c.common.async?Promise.resolve().then(async()=>{let a=[];for(let b of g){let c=await b.key,d=await b.value;a.push({key:c,value:d,alwaysSet:b.alwaysSet})}return a}).then(a=>fe.mergeObjectSync(b,a)):fe.mergeObjectSync(b,g)}get shape(){return this._def.shape()}strict(a){return i.errToObj,new fR({...this._def,unknownKeys:"strict",...void 0!==a?{errorMap:(b,c)=>{let d=this._def.errorMap?.(b,c).message??c.defaultError;return"unrecognized_keys"===b.code?{message:i.errToObj(a).message??d}:{message:d}}}:{}})}strip(){return new fR({...this._def,unknownKeys:"strip"})}passthrough(){return new fR({...this._def,unknownKeys:"passthrough"})}extend(a){return new fR({...this._def,shape:()=>({...this._def.shape(),...a})})}merge(a){return new fR({unknownKeys:a._def.unknownKeys,catchall:a._def.catchall,shape:()=>({...this._def.shape(),...a._def.shape()}),typeName:j.ZodObject})}setKey(a,b){return this.augment({[a]:b})}catchall(a){return new fR({...this._def,catchall:a})}pick(a){let b={};for(let c of g.objectKeys(a))a[c]&&this.shape[c]&&(b[c]=this.shape[c]);return new fR({...this._def,shape:()=>b})}omit(a){let b={};for(let c of g.objectKeys(this.shape))a[c]||(b[c]=this.shape[c]);return new fR({...this._def,shape:()=>b})}deepPartial(){return function a(b){if(b instanceof fR){let c={};for(let d in b.shape){let e=b.shape[d];c[d]=f6.create(a(e))}return new fR({...b._def,shape:()=>c})}if(b instanceof fQ)return new fQ({...b._def,type:a(b.element)});if(b instanceof f6)return f6.create(a(b.unwrap()));if(b instanceof f7)return f7.create(a(b.unwrap()));if(b instanceof fW)return fW.create(b.items.map(b=>a(b)));else return b}(this)}partial(a){let b={};for(let c of g.objectKeys(this.shape)){let d=this.shape[c];a&&!a[c]?b[c]=d:b[c]=d.optional()}return new fR({...this._def,shape:()=>b})}required(a){let b={};for(let c of g.objectKeys(this.shape))if(a&&!a[c])b[c]=this.shape[c];else{let a=this.shape[c];for(;a instanceof f6;)a=a._def.innerType;b[c]=a}return new fR({...this._def,shape:()=>b})}keyof(){return f1(g.objectKeys(this.shape))}}fR.create=(a,b)=>new fR({shape:()=>a,unknownKeys:"strip",catchall:fO.create(),typeName:j.ZodObject,...fl(b)}),fR.strictCreate=(a,b)=>new fR({shape:()=>a,unknownKeys:"strict",catchall:fO.create(),typeName:j.ZodObject,...fl(b)}),fR.lazycreate=(a,b)=>new fR({shape:a,unknownKeys:"strip",catchall:fO.create(),typeName:j.ZodObject,...fl(b)});class fS extends fm{_parse(a){let{ctx:b}=this._processInputParams(a),c=this._def.options;if(b.common.async)return Promise.all(c.map(async a=>{let c={...b,common:{...b.common,issues:[]},parent:null};return{result:await a._parseAsync({data:b.data,path:b.path,parent:c}),ctx:c}})).then(function(a){for(let b of a)if("valid"===b.result.status)return b.result;for(let c of a)if("dirty"===c.result.status)return b.common.issues.push(...c.ctx.common.issues),c.result;let c=a.map(a=>new fa(a.ctx.common.issues));return fd(b,{code:e9.invalid_union,unionErrors:c}),ff});{let a,d=[];for(let e of c){let c={...b,common:{...b.common,issues:[]},parent:null},f=e._parseSync({data:b.data,path:b.path,parent:c});if("valid"===f.status)return f;"dirty"!==f.status||a||(a={result:f,ctx:c}),c.common.issues.length&&d.push(c.common.issues)}if(a)return b.common.issues.push(...a.ctx.common.issues),a.result;let e=d.map(a=>new fa(a));return fd(b,{code:e9.invalid_union,unionErrors:e}),ff}}get options(){return this._def.options}}fS.create=(a,b)=>new fS({options:a,typeName:j.ZodUnion,...fl(b)});let fT=a=>{if(a instanceof f_)return fT(a.schema);if(a instanceof f5)return fT(a.innerType());if(a instanceof f0)return[a.value];if(a instanceof f2)return a.options;if(a instanceof f3)return g.objectValues(a.enum);else if(a instanceof f8)return fT(a._def.innerType);else if(a instanceof fK)return[void 0];else if(a instanceof fL)return[null];else if(a instanceof f6)return[void 0,...fT(a.unwrap())];else if(a instanceof f7)return[null,...fT(a.unwrap())];else if(a instanceof gb)return fT(a.unwrap());else if(a instanceof gd)return fT(a.unwrap());else if(a instanceof f9)return fT(a._def.innerType);else return[]};class fU extends fm{_parse(a){let{ctx:b}=this._processInputParams(a);if(b.parsedType!==e7.object)return fd(b,{code:e9.invalid_type,expected:e7.object,received:b.parsedType}),ff;let c=this.discriminator,d=b.data[c],e=this.optionsMap.get(d);return e?b.common.async?e._parseAsync({data:b.data,path:b.path,parent:b}):e._parseSync({data:b.data,path:b.path,parent:b}):(fd(b,{code:e9.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[c]}),ff)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(a,b,c){let d=new Map;for(let c of b){let b=fT(c.shape[a]);if(!b.length)throw Error(`A discriminator value for key \`${a}\` could not be extracted from all schema options`);for(let e of b){if(d.has(e))throw Error(`Discriminator property ${String(a)} has duplicate value ${String(e)}`);d.set(e,c)}}return new fU({typeName:j.ZodDiscriminatedUnion,discriminator:a,options:b,optionsMap:d,...fl(c)})}}class fV extends fm{_parse(a){let{status:b,ctx:c}=this._processInputParams(a),d=(a,d)=>{if("aborted"===a.status||"aborted"===d.status)return ff;let e=function a(b,c){let d=e8(b),e=e8(c);if(b===c)return{valid:!0,data:b};if(d===e7.object&&e===e7.object){let d=g.objectKeys(c),e=g.objectKeys(b).filter(a=>-1!==d.indexOf(a)),f={...b,...c};for(let d of e){let e=a(b[d],c[d]);if(!e.valid)return{valid:!1};f[d]=e.data}return{valid:!0,data:f}}if(d===e7.array&&e===e7.array){if(b.length!==c.length)return{valid:!1};let d=[];for(let e=0;e<b.length;e++){let f=a(b[e],c[e]);if(!f.valid)return{valid:!1};d.push(f.data)}return{valid:!0,data:d}}if(d===e7.date&&e===e7.date&&+b==+c)return{valid:!0,data:b};return{valid:!1}}(a.value,d.value);return e.valid?(("dirty"===a.status||"dirty"===d.status)&&b.dirty(),{status:b.value,value:e.data}):(fd(c,{code:e9.invalid_intersection_types}),ff)};return c.common.async?Promise.all([this._def.left._parseAsync({data:c.data,path:c.path,parent:c}),this._def.right._parseAsync({data:c.data,path:c.path,parent:c})]).then(([a,b])=>d(a,b)):d(this._def.left._parseSync({data:c.data,path:c.path,parent:c}),this._def.right._parseSync({data:c.data,path:c.path,parent:c}))}}fV.create=(a,b,c)=>new fV({left:a,right:b,typeName:j.ZodIntersection,...fl(c)});class fW extends fm{_parse(a){let{status:b,ctx:c}=this._processInputParams(a);if(c.parsedType!==e7.array)return fd(c,{code:e9.invalid_type,expected:e7.array,received:c.parsedType}),ff;if(c.data.length<this._def.items.length)return fd(c,{code:e9.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),ff;!this._def.rest&&c.data.length>this._def.items.length&&(fd(c,{code:e9.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),b.dirty());let d=[...c.data].map((a,b)=>{let d=this._def.items[b]||this._def.rest;return d?d._parse(new fj(c,a,c.path,b)):null}).filter(a=>!!a);return c.common.async?Promise.all(d).then(a=>fe.mergeArray(b,a)):fe.mergeArray(b,d)}get items(){return this._def.items}rest(a){return new fW({...this._def,rest:a})}}fW.create=(a,b)=>{if(!Array.isArray(a))throw Error("You must pass an array of schemas to z.tuple([ ... ])");return new fW({items:a,typeName:j.ZodTuple,rest:null,...fl(b)})};class fX extends fm{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(a){let{status:b,ctx:c}=this._processInputParams(a);if(c.parsedType!==e7.object)return fd(c,{code:e9.invalid_type,expected:e7.object,received:c.parsedType}),ff;let d=[],e=this._def.keyType,f=this._def.valueType;for(let a in c.data)d.push({key:e._parse(new fj(c,a,c.path,a)),value:f._parse(new fj(c,c.data[a],c.path,a)),alwaysSet:a in c.data});return c.common.async?fe.mergeObjectAsync(b,d):fe.mergeObjectSync(b,d)}get element(){return this._def.valueType}static create(a,b,c){return new fX(b instanceof fm?{keyType:a,valueType:b,typeName:j.ZodRecord,...fl(c)}:{keyType:fE.create(),valueType:a,typeName:j.ZodRecord,...fl(b)})}}class fY extends fm{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(a){let{status:b,ctx:c}=this._processInputParams(a);if(c.parsedType!==e7.map)return fd(c,{code:e9.invalid_type,expected:e7.map,received:c.parsedType}),ff;let d=this._def.keyType,e=this._def.valueType,f=[...c.data.entries()].map(([a,b],f)=>({key:d._parse(new fj(c,a,c.path,[f,"key"])),value:e._parse(new fj(c,b,c.path,[f,"value"]))}));if(c.common.async){let a=new Map;return Promise.resolve().then(async()=>{for(let c of f){let d=await c.key,e=await c.value;if("aborted"===d.status||"aborted"===e.status)return ff;("dirty"===d.status||"dirty"===e.status)&&b.dirty(),a.set(d.value,e.value)}return{status:b.value,value:a}})}{let a=new Map;for(let c of f){let d=c.key,e=c.value;if("aborted"===d.status||"aborted"===e.status)return ff;("dirty"===d.status||"dirty"===e.status)&&b.dirty(),a.set(d.value,e.value)}return{status:b.value,value:a}}}}fY.create=(a,b,c)=>new fY({valueType:b,keyType:a,typeName:j.ZodMap,...fl(c)});class fZ extends fm{_parse(a){let{status:b,ctx:c}=this._processInputParams(a);if(c.parsedType!==e7.set)return fd(c,{code:e9.invalid_type,expected:e7.set,received:c.parsedType}),ff;let d=this._def;null!==d.minSize&&c.data.size<d.minSize.value&&(fd(c,{code:e9.too_small,minimum:d.minSize.value,type:"set",inclusive:!0,exact:!1,message:d.minSize.message}),b.dirty()),null!==d.maxSize&&c.data.size>d.maxSize.value&&(fd(c,{code:e9.too_big,maximum:d.maxSize.value,type:"set",inclusive:!0,exact:!1,message:d.maxSize.message}),b.dirty());let e=this._def.valueType;function f(a){let c=new Set;for(let d of a){if("aborted"===d.status)return ff;"dirty"===d.status&&b.dirty(),c.add(d.value)}return{status:b.value,value:c}}let g=[...c.data.values()].map((a,b)=>e._parse(new fj(c,a,c.path,b)));return c.common.async?Promise.all(g).then(a=>f(a)):f(g)}min(a,b){return new fZ({...this._def,minSize:{value:a,message:i.toString(b)}})}max(a,b){return new fZ({...this._def,maxSize:{value:a,message:i.toString(b)}})}size(a,b){return this.min(a,b).max(a,b)}nonempty(a){return this.min(1,a)}}fZ.create=(a,b)=>new fZ({valueType:a,minSize:null,maxSize:null,typeName:j.ZodSet,...fl(b)});class f$ extends fm{constructor(){super(...arguments),this.validate=this.implement}_parse(a){let{ctx:b}=this._processInputParams(a);if(b.parsedType!==e7.function)return fd(b,{code:e9.invalid_type,expected:e7.function,received:b.parsedType}),ff;function c(a,c){return fc({data:a,path:b.path,errorMaps:[b.common.contextualErrorMap,b.schemaErrorMap,fb,fb].filter(a=>!!a),issueData:{code:e9.invalid_arguments,argumentsError:c}})}function d(a,c){return fc({data:a,path:b.path,errorMaps:[b.common.contextualErrorMap,b.schemaErrorMap,fb,fb].filter(a=>!!a),issueData:{code:e9.invalid_return_type,returnTypeError:c}})}let e={errorMap:b.common.contextualErrorMap},f=b.data;if(this._def.returns instanceof f4){let a=this;return fh(async function(...b){let g=new fa([]),h=await a._def.args.parseAsync(b,e).catch(a=>{throw g.addIssue(c(b,a)),g}),i=await Reflect.apply(f,this,h);return await a._def.returns._def.type.parseAsync(i,e).catch(a=>{throw g.addIssue(d(i,a)),g})})}{let a=this;return fh(function(...b){let g=a._def.args.safeParse(b,e);if(!g.success)throw new fa([c(b,g.error)]);let h=Reflect.apply(f,this,g.data),i=a._def.returns.safeParse(h,e);if(!i.success)throw new fa([d(h,i.error)]);return i.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...a){return new f$({...this._def,args:fW.create(a).rest(fN.create())})}returns(a){return new f$({...this._def,returns:a})}implement(a){return this.parse(a)}strictImplement(a){return this.parse(a)}static create(a,b,c){return new f$({args:a||fW.create([]).rest(fN.create()),returns:b||fN.create(),typeName:j.ZodFunction,...fl(c)})}}class f_ extends fm{get schema(){return this._def.getter()}_parse(a){let{ctx:b}=this._processInputParams(a);return this._def.getter()._parse({data:b.data,path:b.path,parent:b})}}f_.create=(a,b)=>new f_({getter:a,typeName:j.ZodLazy,...fl(b)});class f0 extends fm{_parse(a){if(a.data!==this._def.value){let b=this._getOrReturnCtx(a);return fd(b,{received:b.data,code:e9.invalid_literal,expected:this._def.value}),ff}return{status:"valid",value:a.data}}get value(){return this._def.value}}function f1(a,b){return new f2({values:a,typeName:j.ZodEnum,...fl(b)})}f0.create=(a,b)=>new f0({value:a,typeName:j.ZodLiteral,...fl(b)});class f2 extends fm{_parse(a){if("string"!=typeof a.data){let b=this._getOrReturnCtx(a),c=this._def.values;return fd(b,{expected:g.joinValues(c),received:b.parsedType,code:e9.invalid_type}),ff}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(a.data)){let b=this._getOrReturnCtx(a),c=this._def.values;return fd(b,{received:b.data,code:e9.invalid_enum_value,options:c}),ff}return fh(a.data)}get options(){return this._def.values}get enum(){let a={};for(let b of this._def.values)a[b]=b;return a}get Values(){let a={};for(let b of this._def.values)a[b]=b;return a}get Enum(){let a={};for(let b of this._def.values)a[b]=b;return a}extract(a,b=this._def){return f2.create(a,{...this._def,...b})}exclude(a,b=this._def){return f2.create(this.options.filter(b=>!a.includes(b)),{...this._def,...b})}}f2.create=f1;class f3 extends fm{_parse(a){let b=g.getValidEnumValues(this._def.values),c=this._getOrReturnCtx(a);if(c.parsedType!==e7.string&&c.parsedType!==e7.number){let a=g.objectValues(b);return fd(c,{expected:g.joinValues(a),received:c.parsedType,code:e9.invalid_type}),ff}if(this._cache||(this._cache=new Set(g.getValidEnumValues(this._def.values))),!this._cache.has(a.data)){let a=g.objectValues(b);return fd(c,{received:c.data,code:e9.invalid_enum_value,options:a}),ff}return fh(a.data)}get enum(){return this._def.values}}f3.create=(a,b)=>new f3({values:a,typeName:j.ZodNativeEnum,...fl(b)});class f4 extends fm{unwrap(){return this._def.type}_parse(a){let{ctx:b}=this._processInputParams(a);return b.parsedType!==e7.promise&&!1===b.common.async?(fd(b,{code:e9.invalid_type,expected:e7.promise,received:b.parsedType}),ff):fh((b.parsedType===e7.promise?b.data:Promise.resolve(b.data)).then(a=>this._def.type.parseAsync(a,{path:b.path,errorMap:b.common.contextualErrorMap})))}}f4.create=(a,b)=>new f4({type:a,typeName:j.ZodPromise,...fl(b)});class f5 extends fm{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===j.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(a){let{status:b,ctx:c}=this._processInputParams(a),d=this._def.effect||null,e={addIssue:a=>{fd(c,a),a.fatal?b.abort():b.dirty()},get path(){return c.path}};if(e.addIssue=e.addIssue.bind(e),"preprocess"===d.type){let a=d.transform(c.data,e);if(c.common.async)return Promise.resolve(a).then(async a=>{if("aborted"===b.value)return ff;let d=await this._def.schema._parseAsync({data:a,path:c.path,parent:c});return"aborted"===d.status?ff:"dirty"===d.status||"dirty"===b.value?fg(d.value):d});{if("aborted"===b.value)return ff;let d=this._def.schema._parseSync({data:a,path:c.path,parent:c});return"aborted"===d.status?ff:"dirty"===d.status||"dirty"===b.value?fg(d.value):d}}if("refinement"===d.type){let a=a=>{let b=d.refinement(a,e);if(c.common.async)return Promise.resolve(b);if(b instanceof Promise)throw Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(!1!==c.common.async)return this._def.schema._parseAsync({data:c.data,path:c.path,parent:c}).then(c=>"aborted"===c.status?ff:("dirty"===c.status&&b.dirty(),a(c.value).then(()=>({status:b.value,value:c.value}))));{let d=this._def.schema._parseSync({data:c.data,path:c.path,parent:c});return"aborted"===d.status?ff:("dirty"===d.status&&b.dirty(),a(d.value),{status:b.value,value:d.value})}}if("transform"===d.type)if(!1!==c.common.async)return this._def.schema._parseAsync({data:c.data,path:c.path,parent:c}).then(a=>"valid"!==a.status?ff:Promise.resolve(d.transform(a.value,e)).then(a=>({status:b.value,value:a})));else{let a=this._def.schema._parseSync({data:c.data,path:c.path,parent:c});if("valid"!==a.status)return ff;let f=d.transform(a.value,e);if(f instanceof Promise)throw Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:b.value,value:f}}g.assertNever(d)}}f5.create=(a,b,c)=>new f5({schema:a,typeName:j.ZodEffects,effect:b,...fl(c)}),f5.createWithPreprocess=(a,b,c)=>new f5({schema:b,effect:{type:"preprocess",transform:a},typeName:j.ZodEffects,...fl(c)});class f6 extends fm{_parse(a){return this._getType(a)===e7.undefined?fh(void 0):this._def.innerType._parse(a)}unwrap(){return this._def.innerType}}f6.create=(a,b)=>new f6({innerType:a,typeName:j.ZodOptional,...fl(b)});class f7 extends fm{_parse(a){return this._getType(a)===e7.null?fh(null):this._def.innerType._parse(a)}unwrap(){return this._def.innerType}}f7.create=(a,b)=>new f7({innerType:a,typeName:j.ZodNullable,...fl(b)});class f8 extends fm{_parse(a){let{ctx:b}=this._processInputParams(a),c=b.data;return b.parsedType===e7.undefined&&(c=this._def.defaultValue()),this._def.innerType._parse({data:c,path:b.path,parent:b})}removeDefault(){return this._def.innerType}}f8.create=(a,b)=>new f8({innerType:a,typeName:j.ZodDefault,defaultValue:"function"==typeof b.default?b.default:()=>b.default,...fl(b)});class f9 extends fm{_parse(a){let{ctx:b}=this._processInputParams(a),c={...b,common:{...b.common,issues:[]}},d=this._def.innerType._parse({data:c.data,path:c.path,parent:{...c}});return fi(d)?d.then(a=>({status:"valid",value:"valid"===a.status?a.value:this._def.catchValue({get error(){return new fa(c.common.issues)},input:c.data})})):{status:"valid",value:"valid"===d.status?d.value:this._def.catchValue({get error(){return new fa(c.common.issues)},input:c.data})}}removeCatch(){return this._def.innerType}}f9.create=(a,b)=>new f9({innerType:a,typeName:j.ZodCatch,catchValue:"function"==typeof b.catch?b.catch:()=>b.catch,...fl(b)});class ga extends fm{_parse(a){if(this._getType(a)!==e7.nan){let b=this._getOrReturnCtx(a);return fd(b,{code:e9.invalid_type,expected:e7.nan,received:b.parsedType}),ff}return{status:"valid",value:a.data}}}ga.create=a=>new ga({typeName:j.ZodNaN,...fl(a)}),Symbol("zod_brand");class gb extends fm{_parse(a){let{ctx:b}=this._processInputParams(a),c=b.data;return this._def.type._parse({data:c,path:b.path,parent:b})}unwrap(){return this._def.type}}class gc extends fm{_parse(a){let{status:b,ctx:c}=this._processInputParams(a);if(c.common.async)return(async()=>{let a=await this._def.in._parseAsync({data:c.data,path:c.path,parent:c});return"aborted"===a.status?ff:"dirty"===a.status?(b.dirty(),fg(a.value)):this._def.out._parseAsync({data:a.value,path:c.path,parent:c})})();{let a=this._def.in._parseSync({data:c.data,path:c.path,parent:c});return"aborted"===a.status?ff:"dirty"===a.status?(b.dirty(),{status:"dirty",value:a.value}):this._def.out._parseSync({data:a.value,path:c.path,parent:c})}}static create(a,b){return new gc({in:a,out:b,typeName:j.ZodPipeline})}}class gd extends fm{_parse(a){let b=this._def.innerType._parse(a),c=a=>("valid"===a.status&&(a.value=Object.freeze(a.value)),a);return fi(b)?b.then(a=>c(a)):c(b)}unwrap(){return this._def.innerType}}gd.create=(a,b)=>new gd({innerType:a,typeName:j.ZodReadonly,...fl(b)}),fR.lazycreate,function(a){a.ZodString="ZodString",a.ZodNumber="ZodNumber",a.ZodNaN="ZodNaN",a.ZodBigInt="ZodBigInt",a.ZodBoolean="ZodBoolean",a.ZodDate="ZodDate",a.ZodSymbol="ZodSymbol",a.ZodUndefined="ZodUndefined",a.ZodNull="ZodNull",a.ZodAny="ZodAny",a.ZodUnknown="ZodUnknown",a.ZodNever="ZodNever",a.ZodVoid="ZodVoid",a.ZodArray="ZodArray",a.ZodObject="ZodObject",a.ZodUnion="ZodUnion",a.ZodDiscriminatedUnion="ZodDiscriminatedUnion",a.ZodIntersection="ZodIntersection",a.ZodTuple="ZodTuple",a.ZodRecord="ZodRecord",a.ZodMap="ZodMap",a.ZodSet="ZodSet",a.ZodFunction="ZodFunction",a.ZodLazy="ZodLazy",a.ZodLiteral="ZodLiteral",a.ZodEnum="ZodEnum",a.ZodEffects="ZodEffects",a.ZodNativeEnum="ZodNativeEnum",a.ZodOptional="ZodOptional",a.ZodNullable="ZodNullable",a.ZodDefault="ZodDefault",a.ZodCatch="ZodCatch",a.ZodPromise="ZodPromise",a.ZodBranded="ZodBranded",a.ZodPipeline="ZodPipeline",a.ZodReadonly="ZodReadonly"}(j||(j={}));let ge=fE.create;fF.create,ga.create,fG.create,fH.create,fI.create,fJ.create,fK.create,fL.create,fM.create,fN.create,fO.create,fP.create,fQ.create;let gf=fR.create;fR.strictCreate,fS.create,fU.create,fV.create,fW.create,fX.create,fY.create,fZ.create,f$.create,f_.create,f0.create;let gg=f2.create;f3.create,f4.create,f5.create,f6.create,f7.create,f5.createWithPreprocess,gc.create;let gh=function(a){let b="object"==typeof a.client?a.client:{},c="object"==typeof a.server?a.server:{},d=a.shared,e=a.runtimeEnv?a.runtimeEnv:{...process.env,...a.experimental__runtimeEnv};return function(a){let b=a.runtimeEnvStrict??a.runtimeEnv??process.env;if(a.emptyStringAsUndefined)for(let[a,c]of Object.entries(b))""===c&&delete b[a];if(a.skipValidation)return b;let c="object"==typeof a.client?a.client:{},d="object"==typeof a.server?a.server:{},e="object"==typeof a.shared?a.shared:{},f=a.isServer??("undefined"==typeof window||"Deno"in window),g=function(a,b){let c={},d=[];for(let e in a){let f=a[e],g=b[e],h=f["~standard"].validate(g);if(h instanceof Promise)throw Error(`Validation must be synchronous, but ${e} returned a Promise.`);if(h.issues){d.push(...h.issues.map(a=>({...a,path:[e,...a.path??[]]})));continue}c[e]=h.value}return d.length?{issues:d}:{value:c}}(f?{...d,...e,...c}:{...c,...e},b),h=a.onValidationError??(a=>{throw console.error(" Invalid environment variables:",a),Error("Invalid environment variables")}),i=a.onInvalidAccess??(()=>{throw Error(" Attempted to access a server-side environment variable on the client")});if(g.issues)return h(g.issues);let j=(a.extends??[]).reduce((a,b)=>Object.assign(a,b),{});return new Proxy(Object.assign(g.value,j),{get(b,c){if("string"==typeof c&&"__esModule"!==c&&"$$typeof"!==c)return f||a.clientPrefix&&(c.startsWith(a.clientPrefix)||c in e)?Reflect.get(b,c):i(c)}})}({...a,shared:d,client:b,server:c,clientPrefix:"NEXT_PUBLIC_",runtimeEnv:e})}({server:{NODE_ENV:gg(["development","test","production"]),DATABASE_URL:ge().url()},client:{},runtimeEnv:{NODE_ENV:"production",DATABASE_URL:process.env.DATABASE_URL},skipValidation:!!process.env.SKIP_ENV_VALIDATION,emptyStringAsUndefined:!0});class gi{constructor(a,b){this.unique=a,this.name=b}static [aY]="PgIndexBuilderOn";on(...a){return new gj(a.map(a=>{if(aZ(a,bE))return a;let b=new bf(a.name,!!a.keyAsName,a.columnType,a.indexConfig);return a.indexConfig=JSON.parse(JSON.stringify(a.defaultConfig)),b}),this.unique,!1,this.name)}onOnly(...a){return new gj(a.map(a=>{if(aZ(a,bE))return a;let b=new bf(a.name,!!a.keyAsName,a.columnType,a.indexConfig);return a.indexConfig=a.defaultConfig,b}),this.unique,!0,this.name)}using(a,...b){return new gj(b.map(a=>{if(aZ(a,bE))return a;let b=new bf(a.name,!!a.keyAsName,a.columnType,a.indexConfig);return a.indexConfig=JSON.parse(JSON.stringify(a.defaultConfig)),b}),this.unique,!0,this.name,a)}}class gj{static [aY]="PgIndexBuilder";config;constructor(a,b,c,d,e="btree"){this.config={name:d,columns:a,unique:b,only:c,method:e}}concurrently(){return this.config.concurrently=!0,this}with(a){return this.config.with=a,this}where(a){return this.config.where=a,this}build(a){return new gk(this.config,a)}}class gk{static [aY]="PgIndex";config;constructor(a,b){this.config={...a,table:b}}}let gl=function(a,b,c,d,e=a){let f=new d$(a,d,e),g="function"==typeof b?b({bigint:cE,bigserial:cJ,boolean:cM,char:cP,cidr:cS,customType:cV,date:cv,doublePrecision:cY,inet:c_,integer:c2,interval:c5,json:b5,jsonb:b2,line:da,macaddr:dd,macaddr8:dg,numeric:ch,point:dl,geometry:dt,real:dw,serial:dz,smallint:dC,smallserial:dF,text:dI,time:cl,timestamp:cq,uuid:cy,varchar:dL,bit:dO,halfvec:dR,sparsevec:dU,vector:dX}):b,h=Object.fromEntries(Object.entries(g).map(([a,b])=>{b.setName(a);let c=b.build(f);return f[dY].push(...b.buildForeignKeys(c,f)),[a,c]})),i=Object.fromEntries(Object.entries(g).map(([a,b])=>(b.setName(a),[a,b.buildExtraConfigColumn(f)]))),j=Object.assign(f,h);return j[bz.Symbol.Columns]=h,j[bz.Symbol.ExtraConfigColumns]=i,c&&(j[d$.Symbol.ExtraConfigBuilder]=c),Object.assign(j,{enableRLS:()=>(j[d$.Symbol.EnableRLS]=!0,j)})}("waitlist",{id:dz("id").primaryKey(),email:dL("email",{length:255}).notNull().unique(),createdAt:cq("created_at").defaultNow().notNull()},a=>({emailIdx:new gi(!1,"email_idx").on(a.email)}),void 0),gm=e6(aU(gh.DATABASE_URL),{schema:k}),gn=gf({email:ge().email("Invalid email address")});async function go(a){try{let b=await a.json(),{email:c}=gn.parse(b);return await gm.insert(gl).values({email:c}),C.NextResponse.json({success:!0,message:"Added to waitlist!"},{status:201})}catch(a){if(a instanceof fa)return C.NextResponse.json({success:!1,message:a.errors[0]?.message},{status:400});if(a&&"object"==typeof a&&"code"in a&&"23505"===a.code)return C.NextResponse.json({success:!1,message:"Email already registered"},{status:409});return console.error("Waitlist error:",a),C.NextResponse.json({success:!1,message:"Failed to join waitlist"},{status:500})}}let gp=new m.AppRouteRouteModule({definition:{kind:n.RouteKind.APP_ROUTE,page:"/api/waitlist/route",pathname:"/api/waitlist",filename:"route",bundlePath:"app/api/waitlist/route"},distDir:".next",relativeProjectDir:"",resolvedPagePath:"/Users/will/Documents/d/digi/landing/apps/web/src/app/api/waitlist/route.ts",nextConfigOutput:"",userland:l}),{workAsyncStorage:gq,workUnitAsyncStorage:gr,serverHooks:gs}=gp;function gt(){return(0,o.patchFetch)({workAsyncStorage:gq,workUnitAsyncStorage:gr})}async function gu(a,b,c){var d;let e="/api/waitlist/route";"/index"===e&&(e="/");let f=await gp.prepare(a,b,{srcPage:e,multiZoneDraftMode:!1});if(!f)return b.statusCode=400,b.end("Bad Request"),null==c.waitUntil||c.waitUntil.call(c,Promise.resolve()),null;let{buildId:g,params:h,nextConfig:i,isDraftMode:j,prerenderManifest:k,routerServerContext:l,isOnDemandRevalidate:m,revalidateOnlyGenerated:o,resolvedPathname:C}=f,D=(0,r.normalizeAppPath)(e),E=!!(k.dynamicRoutes[D]||k.routes[C]);if(E&&!j){let a=!!k.routes[C],b=k.dynamicRoutes[D];if(b&&!1===b.fallback&&!a)throw new A.NoFallbackError}let F=null;!E||gp.isDev||j||(F="/index"===(F=C)?"/":F);let G=!0===gp.isDev||!E,H=E&&!G,I=a.method||"GET",J=(0,q.getTracer)(),K=J.getActiveScopeSpan(),L={params:h,prerenderManifest:k,renderOpts:{experimental:{cacheComponents:!!i.experimental.cacheComponents,authInterrupts:!!i.experimental.authInterrupts},supportsDynamicResponse:G,incrementalCache:(0,p.getRequestMeta)(a,"incrementalCache"),cacheLifeProfiles:null==(d=i.experimental)?void 0:d.cacheLife,isRevalidate:H,waitUntil:c.waitUntil,onClose:a=>{b.on("close",a)},onAfterTaskError:void 0,onInstrumentationRequestError:(b,c,d)=>gp.onRequestError(a,b,d,l)},sharedContext:{buildId:g}},M=new s.NodeNextRequest(a),N=new s.NodeNextResponse(b),O=t.NextRequestAdapter.fromNodeNextRequest(M,(0,t.signalFromNodeResponse)(b));try{let d=async c=>gp.handle(O,L).finally(()=>{if(!c)return;c.setAttributes({"http.status_code":b.statusCode,"next.rsc":!1});let d=J.getRootSpanAttributes();if(!d)return;if(d.get("next.span_type")!==u.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${d.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let e=d.get("next.route");if(e){let a=`${I} ${e}`;c.setAttributes({"next.route":e,"http.route":e,"next.span_name":a}),c.updateName(a)}else c.updateName(`${I} ${a.url}`)}),f=async f=>{var g,h;let q=async({previousCacheEntry:g})=>{try{if(!(0,p.getRequestMeta)(a,"minimalMode")&&m&&o&&!g)return b.statusCode=404,b.setHeader("x-nextjs-cache","REVALIDATED"),b.end("This page could not be found"),null;let e=await d(f);a.fetchMetrics=L.renderOpts.fetchMetrics;let h=L.renderOpts.pendingWaitUntil;h&&c.waitUntil&&(c.waitUntil(h),h=void 0);let i=L.renderOpts.collectedTags;if(!E)return await (0,w.I)(M,N,e,L.renderOpts.pendingWaitUntil),null;{let a=await e.blob(),b=(0,x.toNodeOutgoingHttpHeaders)(e.headers);i&&(b[z.NEXT_CACHE_TAGS_HEADER]=i),!b["content-type"]&&a.type&&(b["content-type"]=a.type);let c=void 0!==L.renderOpts.collectedRevalidate&&!(L.renderOpts.collectedRevalidate>=z.INFINITE_CACHE)&&L.renderOpts.collectedRevalidate,d=void 0===L.renderOpts.collectedExpire||L.renderOpts.collectedExpire>=z.INFINITE_CACHE?void 0:L.renderOpts.collectedExpire;return{value:{kind:B.CachedRouteKind.APP_ROUTE,status:e.status,body:Buffer.from(await a.arrayBuffer()),headers:b},cacheControl:{revalidate:c,expire:d}}}}catch(b){throw(null==g?void 0:g.isStale)&&await gp.onRequestError(a,b,{routerKind:"App Router",routePath:e,routeType:"route",revalidateReason:(0,v.c)({isRevalidate:H,isOnDemandRevalidate:m})},l),b}},r=await gp.handleResponse({req:a,nextConfig:i,cacheKey:F,routeKind:n.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:k,isRoutePPREnabled:!1,isOnDemandRevalidate:m,revalidateOnlyGenerated:o,responseGenerator:q,waitUntil:c.waitUntil});if(!E)return null;if((null==r||null==(g=r.value)?void 0:g.kind)!==B.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==r||null==(h=r.value)?void 0:h.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});(0,p.getRequestMeta)(a,"minimalMode")||b.setHeader("x-nextjs-cache",m?"REVALIDATED":r.isMiss?"MISS":r.isStale?"STALE":"HIT"),j&&b.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let s=(0,x.fromNodeOutgoingHttpHeaders)(r.value.headers);return(0,p.getRequestMeta)(a,"minimalMode")&&E||s.delete(z.NEXT_CACHE_TAGS_HEADER),!r.cacheControl||b.getHeader("Cache-Control")||s.get("Cache-Control")||s.set("Cache-Control",(0,y.getCacheControlHeader)(r.cacheControl)),await (0,w.I)(M,N,new Response(r.value.body,{headers:s,status:r.value.status||200})),null};K?await f(K):await J.withPropagatedContext(a.headers,()=>J.trace(u.BaseServerSpan.handleRequest,{spanName:`${I} ${a.url}`,kind:q.SpanKind.SERVER,attributes:{"http.method":I,"http.target":a.url}},f))}catch(b){if(b instanceof A.NoFallbackError||await gp.onRequestError(a,b,{routerKind:"App Router",routePath:D,routeType:"route",revalidateReason:(0,v.c)({isRevalidate:H,isOnDemandRevalidate:m})}),E)throw b;return await (0,w.I)(M,N,new Response(null,{status:500})),null}}},4870:a=>{"use strict";a.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6439:a=>{"use strict";a.exports=require("next/dist/shared/lib/no-fallback-error.external")},6820:(a,b,c)=>{"use strict";Object.defineProperty(b,"I",{enumerable:!0,get:function(){return g}});let d=c(9004),e=c(4621),f=c(1374);async function g(a,b,c,g){if((0,d.isNodeNextResponse)(b)){var h;b.statusCode=c.status,b.statusMessage=c.statusText;let d=["set-cookie","www-authenticate","proxy-authenticate","vary"];null==(h=c.headers)||h.forEach((a,c)=>{if("x-middleware-set-cookie"!==c.toLowerCase())if("set-cookie"===c.toLowerCase())for(let d of(0,f.splitCookiesString)(a))b.appendHeader(c,d);else{let e=void 0!==b.getHeader(c);(d.includes(c.toLowerCase())||!e)&&b.appendHeader(c,a)}});let{originalResponse:i}=b;c.body&&"HEAD"!==a.method?await (0,e.pipeToNodeResponse)(c.body,i,g):i.end()}}},7132:(a,b)=>{"use strict";function c(){throw Object.defineProperty(Error('ImageResponse moved from "next/server" to "next/og" since Next.js 14, please import from "next/og" instead'),"__NEXT_ERROR_CODE",{value:"E183",enumerable:!1,configurable:!0})}Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"ImageResponse",{enumerable:!0,get:function(){return c}})},7324:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"NextResponse",{enumerable:!0,get:function(){return l}});let d=c(2284),e=c(2062),f=c(1374),g=c(2113),h=c(2284),i=Symbol("internal response"),j=new Set([301,302,303,307,308]);function k(a,b){var c;if(null==a||null==(c=a.request)?void 0:c.headers){if(!(a.request.headers instanceof Headers))throw Object.defineProperty(Error("request.headers must be an instance of Headers"),"__NEXT_ERROR_CODE",{value:"E119",enumerable:!1,configurable:!0});let c=[];for(let[d,e]of a.request.headers)b.set("x-middleware-request-"+d,e),c.push(d);b.set("x-middleware-override-headers",c.join(","))}}class l extends Response{constructor(a,b={}){super(a,b);let c=this.headers,j=new Proxy(new h.ResponseCookies(c),{get(a,e,f){switch(e){case"delete":case"set":return(...f)=>{let g=Reflect.apply(a[e],a,f),i=new Headers(c);return g instanceof h.ResponseCookies&&c.set("x-middleware-set-cookie",g.getAll().map(a=>(0,d.stringifyCookie)(a)).join(",")),k(b,i),g};default:return g.ReflectAdapter.get(a,e,f)}}});this[i]={cookies:j,url:b.url?new e.NextURL(b.url,{headers:(0,f.toNodeOutgoingHttpHeaders)(c),nextConfig:b.nextConfig}):void 0}}[Symbol.for("edge-runtime.inspect.custom")](){return{cookies:this.cookies,url:this.url,body:this.body,bodyUsed:this.bodyUsed,headers:Object.fromEntries(this.headers),ok:this.ok,redirected:this.redirected,status:this.status,statusText:this.statusText,type:this.type}}get cookies(){return this[i].cookies}static json(a,b){let c=Response.json(a,b);return new l(c.body,c)}static redirect(a,b){let c="number"==typeof b?b:(null==b?void 0:b.status)??307;if(!j.has(c))throw Object.defineProperty(RangeError('Failed to execute "redirect" on "response": Invalid status code'),"__NEXT_ERROR_CODE",{value:"E529",enumerable:!1,configurable:!0});let d="object"==typeof b?b:{},e=new Headers(null==d?void 0:d.headers);return e.set("Location",(0,f.validateURL)(a)),new l(null,{...d,headers:e,status:c})}static rewrite(a,b){let c=new Headers(null==b?void 0:b.headers);return c.set("x-middleware-rewrite",(0,f.validateURL)(a)),k(b,c),new l(null,{...b,headers:c})}static next(a){let b=new Headers(null==a?void 0:a.headers);return b.set("x-middleware-next","1"),k(a,b),new l(null,{...a,headers:b})}}},7746:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"connection",{enumerable:!0,get:function(){return j}});let d=c(9294),e=c(3033),f=c(3401),g=c(6433),h=c(1258),i=c(1261);function j(){let a=d.workAsyncStorage.getStore(),b=e.workUnitAsyncStorage.getStore();if(a){if(b&&"after"===b.phase&&!(0,i.isRequestAPICallableInsideAfter)())throw Object.defineProperty(Error(`Route ${a.route} used "connection" inside "after(...)". The \`connection()\` function is used to indicate the subsequent code must only run when there is an actual Request, but "after(...)" executes after the request, so this function is not allowed in this scope. See more info here: https://nextjs.org/docs/canary/app/api-reference/functions/after`),"__NEXT_ERROR_CODE",{value:"E186",enumerable:!1,configurable:!0});if(a.forceStatic)return Promise.resolve(void 0);if(a.dynamicShouldError)throw Object.defineProperty(new g.StaticGenBailoutError(`Route ${a.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`connection\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E562",enumerable:!1,configurable:!0});if(b)switch(b.type){case"cache":{let b=Object.defineProperty(Error(`Route ${a.route} used "connection" inside "use cache". The \`connection()\` function is used to indicate the subsequent code must only run when there is an actual request, but caches must be able to be produced before a request, so this function is not allowed in this scope. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E752",enumerable:!1,configurable:!0});throw Error.captureStackTrace(b,j),a.invalidDynamicUsageError??=b,b}case"private-cache":{let b=Object.defineProperty(Error(`Route ${a.route} used "connection" inside "use cache: private". The \`connection()\` function is used to indicate the subsequent code must only run when there is an actual navigation request, but caches must be able to be produced before a navigation request, so this function is not allowed in this scope. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E753",enumerable:!1,configurable:!0});throw Error.captureStackTrace(b,j),a.invalidDynamicUsageError??=b,b}case"unstable-cache":throw Object.defineProperty(Error(`Route ${a.route} used "connection" inside a function cached with "unstable_cache(...)". The \`connection()\` function is used to indicate the subsequent code must only run when there is an actual Request, but caches must be able to be produced before a Request so this function is not allowed in this scope. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`),"__NEXT_ERROR_CODE",{value:"E1",enumerable:!1,configurable:!0});case"prerender":case"prerender-client":case"prerender-runtime":return(0,h.makeHangingPromise)(b.renderSignal,a.route,"`connection()`");case"prerender-ppr":return(0,f.postponeWithTracking)(a.route,"connection",b.dynamicTracking);case"prerender-legacy":return(0,f.throwToInterruptStaticGeneration)("connection",a,b);case"request":return(0,f.trackDynamicDataInDynamicRender)(b),Promise.resolve(void 0)}}(0,e.throwForMissingRequestStore)("connection")}},8356:()=>{},8387:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{ImageResponse:function(){return d.ImageResponse},NextRequest:function(){return e.NextRequest},NextResponse:function(){return f.NextResponse},URLPattern:function(){return h.URLPattern},after:function(){return i.after},connection:function(){return j.connection},unstable_rootParams:function(){return k.unstable_rootParams},userAgent:function(){return g.userAgent},userAgentFromString:function(){return g.userAgentFromString}});let d=c(7132),e=c(5358),f=c(7324),g=c(2756),h=c(8481),i=c(1883),j=c(7746),k=c(3933)},8481:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"URLPattern",{enumerable:!0,get:function(){return c}});let c="undefined"==typeof URLPattern?void 0:URLPattern},9030:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"after",{enumerable:!0,get:function(){return e}});let d=c(9294);function e(a){let b=d.workAsyncStorage.getStore();if(!b)throw Object.defineProperty(Error("`after` was called outside a request scope. Read more: https://nextjs.org/docs/messages/next-dynamic-api-wrong-context"),"__NEXT_ERROR_CODE",{value:"E468",enumerable:!1,configurable:!0});let{afterContext:c}=b;return c.after(a)}},9121:a=>{"use strict";a.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9294:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-async-storage.external.js")}};var b=require("../../../webpack-runtime.js");b.C(a);var c=b.X(0,[977],()=>b(b.s=4774));module.exports=c})();